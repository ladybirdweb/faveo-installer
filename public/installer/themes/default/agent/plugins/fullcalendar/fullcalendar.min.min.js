/*!
 * FullCalendar v2.2.5
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery","moment"],b)}else{b(jQuery,moment)}})(function(cC,a8){var bE={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,isRTL:false,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:0.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200};var bk={dayPopoverFormat:"dddd, MMMM D"};var cl={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var co=cC.fullCalendar={version:"2.2.5"};var bU=co.views={};cC.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1);var a=this;this.each(function(f,h){var g=cC(h);var d=g.data("fullCalendar");var e;if(typeof b==="string"){if(d&&cC.isFunction(d[b])){e=d[b].apply(d,c);if(!f){a=e}if(b==="destroy"){g.removeData("fullCalendar")}}}else{if(!d){d=new bi(g,b);g.data("fullCalendar",d);d.render()}}});return a};function cK(a){cr(bE,a)}function cr(a){function b(e,d){if(cC.isPlainObject(d)&&cC.isPlainObject(a[e])&&!ck(e)){a[e]=cr({},a[e],d)}else{if(d!==undefined){a[e]=d}}}for(var c=1;c<arguments.length;c++){cC.each(arguments[c],b)}return a}function ck(a){return/(Time|Duration)$/.test(a)}var cA=co.langs={};co.datepickerLang=function(d,b,a){var c=cA[d]||(cA[d]={});c.isRTL=a.isRTL;c.weekNumberTitle=a.weekHeader;cC.each(cj,function(f,e){c[f]=e(a)});if(cC.datepicker){cC.datepicker.regional[b]=cC.datepicker.regional[d]=a;cC.datepicker.regional.en=cC.datepicker.regional[""];cC.datepicker.setDefaults(a)}};co.lang=function(d,a){var c;var b;c=cA[d]||(cA[d]={});if(a){cr(c,a)}b=by(d);cC.each(bm,function(f,e){if(c[f]===undefined){c[f]=e(b,c)}});bE.lang=d};var cj={defaultButtonText:function(a){return{prev:ch(a.prevText),next:ch(a.nextText),today:ch(a.currentText)}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}};var bm={dayOfMonthFormat:function(b,c){var a=b.longDateFormat("l");a=a.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(c.isRTL){a+=" ddd"}else{a="ddd "+a}return a},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}};function by(a){var b=a8.localeData||a8.langData;return b.call(a8,a)||b.call(a8,"en")}co.lang("en",bk);co.intersectionToSeg=cE;co.applyAll=bK;co.debounce=cN;function cq(a,b){if(b.left){a.css({"border-left-width":1,"margin-left":b.left-1})}if(b.right){a.css({"border-right-width":1,"margin-right":b.right-1})}}function cb(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function b5(){cC("body").addClass("fc-not-allowed")}function b4(){cC("body").removeClass("fc-not-allowed")}function bT(d,e,h){var g=Math.floor(e/d.length);var i=Math.floor(e-g*(d.length-1));var c=[];var b=[];var f=[];var a=0;bv(d);d.each(function(l,k){var j=l===d.length-1?i:g;var m=cC(k).outerHeight(true);if(m<j){c.push(k);b.push(m);f.push(cC(k).height())}else{a+=m}});if(h){e-=a;g=Math.floor(e/c.length);i=Math.floor(e-g*(c.length-1))}cC(c).each(function(l,k){var o=l===c.length-1?i:g;var m=b[l];var j=f[l];var n=o-(m-j);if(m<o){cC(k).height(n)}})}function bv(a){a.height("")}function bO(b){var a=0;b.find("> *").each(function(e,d){var c=cC(d).outerWidth();if(c>a){a=c}});a++;b.width(a);return a}function cp(a,b){a.height(b).addClass("fc-scroller");if(a[0].scrollHeight-1>a[0].clientHeight){return true}bg(a);return false}function bg(a){a.height("").removeClass("fc-scroller")}function b7(b){var c=b.css("position"),a=b.parents().filter(function(){var d=cC(this);return(/(auto|scroll)/).test(d.css("overflow")+d.css("overflow-y")+d.css("overflow-x"))}).eq(0);return c==="fixed"||!a.length?cC(b[0].ownerDocument||document):a}function bo(c){var a=c.offset().left;var e=a+c.width();var b=c.children();var f=b.offset().left;var d=f+b.outerWidth();return{left:f-a,right:e-d}}function bC(a){return a.which==1&&!a.ctrlKey}function cE(b,i){var f=b.start;var h=b.end;var c=i.start;var e=i.end;var d,a;var j,g;if(h>c&&f<e){if(f>=c){d=f.clone();j=true}else{d=c.clone();j=false}if(h<=e){a=h.clone();g=true}else{a=e.clone();g=false}return{start:d,end:a,isStart:j,isEnd:g}}}function bS(d,c){d=d||{};if(d[c]!==undefined){return d[c]}var e=c.split(/(?=[A-Z])/),a=e.length-1,b;for(;a>=0;a--){b=d[e[a].toLowerCase()];if(b!==undefined){return b}}return d["default"]}var cm=["sun","mon","tue","wed","thu","fri","sat"];var bp=["year","month","week","day","hour","minute","second","millisecond"];function be(a,b){return a8.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-b.time()})}function bD(a,b){return a8.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days")})}function bL(d,c){var b,a;for(b=0;b<bp.length;b++){a=bp[b];if(cI(a,d,c)){break}}return a}function cI(b,d,c){var a;if(c!=null){a=c.diff(d,b,true)}else{if(a8.isDuration(d)){a=d.as(b)}else{a=d.end.diff(d.start,b,true)}}if(a>=1&&bI(a)){return a}return false}function bN(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}function bM(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}var bd={}.hasOwnProperty;function bG(b){var a=function(){};a.prototype=b;return new a()}function ct(a,b){for(var c in a){if(cF(a,c)){b[c]=a[c]}}}function cF(a,b){return bd.call(a,b)}function cM(a){return/undefined|null|boolean|number|string/.test(cC.type(a))}function bK(e,d,b){if(cC.isFunction(e)){e=[e]}if(e){var a;var c;for(a=0;a<e.length;a++){c=e[a].apply(d,b)||c}return c}}function cP(){for(var a=0;a<arguments.length;a++){if(arguments[a]!==undefined){return arguments[a]}}}function cR(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ch(a){return a.replace(/&.*?;/g,"")}function cw(a){return a.charAt(0).toUpperCase()+a.slice(1)}function cd(a,b){return a-b}function bI(a){return a%1===0}function cN(g,e){var d;var b;var a;var f;var c=function(){var h=+new Date()-f;if(h<e&&h>0){d=setTimeout(c,e-h)}else{d=null;g.apply(a,b);if(!d){a=b=null}}};return function(){a=this;b=arguments;f=+new Date();if(!d){d=setTimeout(c,e)}}}var bc=/^\s*\d{4}-\d\d$/;var bF=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;var bB=a8.fn;var cG=cC.extend({},bB);var cB;var bs;var cg;co.moment=function(){return bb(arguments)};co.moment.utc=function(){var a=bb(arguments,true);if(a.hasTime()){a.utc()}return a};co.moment.parseZone=function(){return bb(arguments,true,true)};function bb(c,d,e){var a=c[0];var f=c.length==1&&typeof a==="string";var g;var b;var i;var h;if(a8.isMoment(a)){h=a8.apply(null,c);bh(a,h)}else{if(bN(a)||a===undefined){h=a8.apply(null,c)}else{g=false;b=false;if(f){if(bc.test(a)){a+="-01";c=[a];g=true;b=true}else{if((i=bF.exec(a))){g=!i[5];b=true}}}else{if(cC.isArray(a)){b=true}}if(d||g){h=a8.utc.apply(a8,c)}else{h=a8.apply(null,c)}if(g){h._ambigTime=true;h._ambigZone=true}else{if(e){if(b){h._ambigZone=true}else{if(f){h.zone(a)}}}}}}h._fullCalendar=true;return h}bB.clone=function(){var a=cG.clone.apply(this,arguments);bh(this,a);if(this._fullCalendar){a._fullCalendar=true}return a};bB.time=function(a){if(!this._fullCalendar){return cG.time.apply(this,arguments)}if(a==null){return a8.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=false;if(!a8.isDuration(a)&&!a8.isMoment(a)){a=a8.duration(a)}var b=0;if(a8.isDuration(a)){b=Math.floor(a.asDays())*24}return this.hours(b+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())}};bB.stripTime=function(){var a;if(!this._ambigTime){a=this.toArray();this.utc();bs(this,a.slice(0,3));this._ambigTime=true;this._ambigZone=true}return this};bB.hasTime=function(){return !this._ambigTime};bB.stripZone=function(){var b,a;if(!this._ambigZone){b=this.toArray();a=this._ambigTime;this.utc();bs(this,b);if(a){this._ambigTime=true}this._ambigZone=true}return this};bB.hasZone=function(){return !this._ambigZone};bB.zone=function(a){if(a!=null){this._ambigTime=false;this._ambigZone=false}return cG.zone.apply(this,arguments)};bB.local=function(){var b=this.toArray();var a=this._ambigZone;cG.local.apply(this,arguments);if(a){cg(this,b)}return this};bB.format=function(){if(this._fullCalendar&&arguments[0]){return bY(this,arguments[0])}if(this._ambigTime){return bt(this,"YYYY-MM-DD")}if(this._ambigZone){return bt(this,"YYYY-MM-DD[T]HH:mm:ss")}return cG.format.apply(this,arguments)};bB.toISOString=function(){if(this._ambigTime){return bt(this,"YYYY-MM-DD")}if(this._ambigZone){return bt(this,"YYYY-MM-DD[T]HH:mm:ss")}return cG.toISOString.apply(this,arguments)};bB.isWithin=function(a,b){var c=cH([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]};bB.isSame=function(a,b){var c;if(!this._fullCalendar){return cG.isSame.apply(this,arguments)}if(b){c=cH([this,a],true);return cG.isSame.call(c[0],c[1],b)}else{a=co.moment.parseZone(a);return cG.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)}};cC.each(["isBefore","isAfter"],function(a,b){bB[b]=function(d,e){var c;if(!this._fullCalendar){return cG[b].apply(this,arguments)}c=cH([this,d]);return cG[b].call(c[0],c[1],e)}});function cH(b,d){var h=false;var e=false;var c=b.length;var a=[];var g,f;for(g=0;g<c;g++){f=b[g];if(!a8.isMoment(f)){f=co.moment.parseZone(f)}h=h||f._ambigTime;e=e||f._ambigZone;a.push(f)}for(g=0;g<c;g++){f=a[g];if(!d&&h&&!f._ambigTime){a[g]=f.clone().stripTime()}else{if(e&&!f._ambigZone){a[g]=f.clone().stripZone()}}}return a}function bh(a,b){if(a._ambigTime){b._ambigTime=true}else{if(b._ambigTime){b._ambigTime=false}}if(a._ambigZone){b._ambigZone=true}else{if(b._ambigZone){b._ambigZone=false}}}function cQ(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}cB="_d" in a8()&&"updateOffset" in a8;bs=cB?function(a,b){a._d.setTime(Date.UTC.apply(Date,b));a8.updateOffset(a,false)}:cQ;cg=cB?function(a,b){a._d.setTime(+new Date(b[0]||0,b[1]||0,b[2]||0,b[3]||0,b[4]||0,b[5]||0,b[6]||0));a8.updateOffset(a,false)}:cQ;function bt(a,b){return cG.format.call(a,b)}function bY(a,b){return cn(a,bf(b))}function cn(c,d){var a="";var b;for(b=0;b<d.length;b++){a+=bz(c,d[b])}return a}var bu={t:function(a){return bt(a,"a").charAt(0)},T:function(a){return bt(a,"A").charAt(0)}};function bz(b,c){var a;var d;if(typeof c==="string"){return c}else{if((a=c.token)){if(bu[a]){return bu[a](b)}return bt(b,a)}else{if(c.maybe){d=cn(b,c.maybe);if(d.match(/[1-9]/)){return d}}}}return""}function bJ(d,f,c,e,b){var a;d=co.moment.parseZone(d);f=co.moment.parseZone(f);a=(d.localeData||d.lang).call(d);c=a.longDateFormat(c)||c;e=e||" - ";return bW(d,f,bf(c),e,b)}co.formatRange=bJ;function bW(a,c,i,j,m){var e;var b;var k="";var n;var g="";var d;var f="";var h="";var l="";for(b=0;b<i.length;b++){e=cD(a,c,i[b]);if(e===false){break}k+=e}for(n=i.length-1;n>b;n--){e=cD(a,c,i[n]);if(e===false){break}g=e+g}for(d=b;d<=n;d++){f+=bz(a,i[d]);h+=bz(c,i[d])}if(f||h){if(m){l=h+j+f}else{l=f+j+h}}return k+l+g}var cs={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function cD(d,e,c){var b;var a;if(typeof c==="string"){return c}else{if((b=c.token)){a=cs[b.charAt(0)];if(a&&d.isSame(e,a)){return bt(d,b)}}}return false}var a7={};function bf(a){if(a in a7){return a7[a]}return(a7[a]=b8(a))}function b8(b){var d=[];var c=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;var a;while((a=c.exec(b))){if(a[1]){d.push(a[1])}else{if(a[2]){d.push({maybe:b8(a[2])})}else{if(a[3]){d.push({token:a[3]})}else{if(a[5]){d.push(a[5])}}}}}return d}co.Class=cv;function cv(){}cv.extend=function(c){var b=this;var a;c=c||{};if(cF(c,"constructor")){a=c.constructor}if(typeof a!=="function"){a=c.constructor=function(){b.apply(this,arguments)}}a.prototype=bG(b.prototype);ct(c,a.prototype);ct(b,a);return a};cv.mixin=function(a){ct(a.prototype||a,this.prototype)};var bn=cv.extend({isHidden:true,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var a=this;var b=this.options;this.el=cC('<div class="fc-popover"/>').addClass(b.className||"").css({top:0,left:0}).append(b.content).appendTo(b.parentEl);this.el.on("click",".fc-close",function(){a.hide()});if(b.autoHide){cC(document).on("mousedown",this.documentMousedownProxy=cC.proxy(this,"documentMousedown"))}},documentMousedown:function(a){if(this.el&&!cC(a.target).closest(this.el).length){this.hide()}},destroy:function(){this.hide();if(this.el){this.el.remove();this.el=null}cC(document).off("mousedown",this.documentMousedownProxy)},position:function(){var a=this.options;var e=this.el.offsetParent().offset();var k=this.el.outerWidth();var c=this.el.outerHeight();var d=cC(window);var f=b7(this.el);var j;var h;var b;var g;var i;g=a.top||0;if(a.left!==undefined){i=a.left}else{if(a.right!==undefined){i=a.right-k}else{i=0}}if(f.is(window)||f.is(document)){f=d;j=0;h=0}else{b=f.offset();j=b.top;h=b.left}j+=d.scrollTop();h+=d.scrollLeft();if(a.viewportConstrain!==false){g=Math.min(g,j+f.outerHeight()-c-this.margin);g=Math.max(g,j+this.margin);i=Math.min(i,h+f.outerWidth()-k-this.margin);i=Math.max(i,h+this.margin)}this.el.css({top:g-e.top,left:i-e.left})},trigger:function(a){if(this.options[a]){this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}});var cf=cv.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,constructor:function(a){this.grid=a},build:function(){this.rowCoords=this.grid.computeRowCoords();this.colCoords=this.grid.computeColCoords();this.computeBounds()},clear:function(){this.rowCoords=null;this.colCoords=null},getCell:function(c,f){var a=this.rowCoords;var h=this.colCoords;var g=null;var d=null;var i,e;var b;if(this.inBounds(c,f)){for(i=0;i<a.length;i++){e=a[i];if(f>=e.top&&f<e.bottom){g=i;break}}for(i=0;i<h.length;i++){e=h[i];if(c>=e.left&&c<e.right){d=i;break}}if(g!==null&&d!==null){b=this.grid.getCell(g,d);b.grid=this.grid;return b}}return null},computeBounds:function(){var a;if(this.containerEl){a=this.containerEl.offset();this.minX=a.left;this.maxX=a.left+this.containerEl.outerWidth();this.minY=a.top;this.maxY=a.top+this.containerEl.outerHeight()}},inBounds:function(b,a){if(this.containerEl){return b>=this.minX&&b<this.maxX&&a>=this.minY&&a<this.maxY}return true}});var b0=cv.extend({coordMaps:null,constructor:function(a){this.coordMaps=a},build:function(){var a=this.coordMaps;var b;for(b=0;b<a.length;b++){a[b].build()}},getCell:function(b,d){var e=this.coordMaps;var c=null;var a;for(a=0;a<e.length&&!c;a++){c=e[a].getCell(b,d)}return c},clear:function(){var a=this.coordMaps;var b;for(b=0;b<a.length;b++){a[b].clear()}}});var cx=cv.extend({coordMap:null,options:null,isListening:false,isDragging:false,origCell:null,cell:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(a,b){this.coordMap=a;this.options=b||{}},mousedown:function(a){if(bC(a)){a.preventDefault();this.startListening(a);if(!this.options.distance){this.startDrag(a)}}},startListening:function(b){var a;var c;if(!this.isListening){if(b&&this.options.scroll){a=b7(cC(b.target));if(!a.is(window)&&!a.is(document)){this.scrollEl=a;this.scrollHandlerProxy=cN(cC.proxy(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}}this.computeCoords();if(b){c=this.getCell(b);this.origCell=c;this.mouseX0=b.pageX;this.mouseY0=b.pageY}cC(document).on("mousemove",this.mousemoveProxy=cC.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=cC.proxy(this,"mouseup")).on("selectstart",this.preventDefault);this.isListening=true;this.trigger("listenStart",b)}},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},mousemove:function(b){var a;var c;if(!this.isDragging){a=this.options.distance||1;c=Math.pow(b.pageX-this.mouseX0,2)+Math.pow(b.pageY-this.mouseY0,2);if(c>=a*a){this.startDrag(b)}}if(this.isDragging){this.drag(b)}},startDrag:function(a){var b;if(!this.isListening){this.startListening()}if(!this.isDragging){this.isDragging=true;this.trigger("dragStart",a);b=this.getCell(a);if(b){this.cellOver(b)}}},drag:function(a){var b;if(this.isDragging){b=this.getCell(a);if(!bQ(b,this.cell)){if(this.cell){this.cellOut()}if(b){this.cellOver(b)}}this.dragScroll(a)}},cellOver:function(a){this.cell=a;this.trigger("cellOver",a,bQ(a,this.origCell))},cellOut:function(){if(this.cell){this.trigger("cellOut",this.cell);this.cell=null}},mouseup:function(a){this.stopDrag(a);this.stopListening(a)},stopDrag:function(a){if(this.isDragging){this.stopScrolling();this.trigger("dragStop",a);this.isDragging=false}},stopListening:function(a){if(this.isListening){if(this.scrollEl){this.scrollEl.off("scroll",this.scrollHandlerProxy);this.scrollHandlerProxy=null}cC(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault);this.mousemoveProxy=null;this.mouseupProxy=null;this.isListening=false;this.trigger("listenStop",a);this.origCell=this.cell=null;this.coordMap.clear()}},getCell:function(a){return this.coordMap.getCell(a.pageX,a.pageY)},trigger:function(a){if(this.options[a]){this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var b=this.scrollEl;var a;if(b){a=b.offset();this.scrollBounds={top:a.top,left:a.left,bottom:a.top+b.outerHeight(),right:a.left+b.outerWidth()}}},dragScroll:function(c){var g=this.scrollSensitivity;var i=this.scrollBounds;var h,f;var b,a;var d=0;var e=0;if(i){h=(g-(c.pageY-i.top))/g;f=(g-(i.bottom-c.pageY))/g;b=(g-(c.pageX-i.left))/g;a=(g-(i.right-c.pageX))/g;if(h>=0&&h<=1){d=h*this.scrollSpeed*-1}else{if(f>=0&&f<=1){d=f*this.scrollSpeed}}if(b>=0&&b<=1){e=b*this.scrollSpeed*-1}else{if(a>=0&&a<=1){e=a*this.scrollSpeed}}}this.setScrollVel(d,e)},setScrollVel:function(a,b){this.scrollTopVel=a;this.scrollLeftVel=b;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(cC.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var a=this.scrollEl;if(this.scrollTopVel<0){if(a.scrollTop()<=0){this.scrollTopVel=0}}else{if(this.scrollTopVel>0){if(a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight){this.scrollTopVel=0}}}if(this.scrollLeftVel<0){if(a.scrollLeft()<=0){this.scrollLeftVel=0}}else{if(this.scrollLeftVel>0){if(a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth){this.scrollLeftVel=0}}}},scrollIntervalFunc:function(){var a=this.scrollEl;var b=this.scrollIntervalMs/1000;if(this.scrollTopVel){a.scrollTop(a.scrollTop()+this.scrollTopVel*b)}if(this.scrollLeftVel){a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.stopScrolling()}},stopScrolling:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.computeCoords()}},scrollHandler:function(){if(!this.scrollIntervalId){this.computeCoords()}}});function bQ(a,b){if(!a&&!b){return true}if(a&&b){return a.grid===b.grid&&a.row===b.row&&a.col===b.col}return false}var b2=cv.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:false,isHidden:false,isAnimating:false,constructor:function(b,a){this.options=a=a||{};this.sourceEl=b;this.parentEl=a.parentEl?cC(a.parentEl):b.parent()},start:function(a){if(!this.isFollowing){this.isFollowing=true;this.mouseY0=a.pageY;this.mouseX0=a.pageX;this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}cC(document).on("mousemove",this.mousemoveProxy=cC.proxy(this,"mousemove"))}},stop:function(b,d){var e=this;var a=this.options.revertDuration;function c(){this.isAnimating=false;e.destroyEl();this.top0=this.left0=null;if(d){d()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;cC(document).off("mousemove",this.mousemoveProxy);if(b&&a&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:a,complete:c})}else{c()}}},getEl:function(){var a=this.el;if(!a){this.sourceEl.width();a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)}return a},destroyEl:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var a;var b;this.getEl();if(this.top0===null){this.sourceEl.width();a=this.sourceEl.offset();b=this.el.offsetParent().offset();this.top0=a.top-b.top;this.left0=a.left-b.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0;this.leftDelta=a.pageX-this.mouseX0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}});var bA=cv.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(a){this.view=a;this.isRTL=a.opt("isRTL")},rowHtml:function(e,d){var b=this.getHtmlRenderer("cell",e);var f="";var a;var c;d=d||0;for(a=0;a<this.colCnt;a++){c=this.getCell(d,a);f+=b(c)}f=this.bookendCells(f,e,d);return"<tr>"+f+"</tr>"},bookendCells:function(a,g,e){var f=this.getHtmlRenderer("intro",g)(e||0);var c=this.getHtmlRenderer("outro",g)(e||0);var d=this.isRTL?c:f;var b=this.isRTL?f:c;if(typeof a==="string"){return d+a+b}else{return a.prepend(d).append(b)}},getHtmlRenderer:function(b,a){var c=this.view;var d;var g;var e;var f;d=b+"Html";if(a){g=a+cw(b)+"Html"}if(g&&(f=c[g])){e=c}else{if(g&&(f=this[g])){e=this}else{if((f=c[d])){e=c}else{if((f=this[d])){e=this}}}}if(typeof f==="function"){return function(){return f.apply(e,arguments)||""}}return function(){return f||""}}});var bP=co.Grid=bA.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,documentDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventEnd:null,constructor:function(){bA.apply(this,arguments);this.coordMap=new cf(this);this.elsByFill={};this.documentDragStartProxy=cC.proxy(this,"documentDragStart")},render:function(){this.bindHandlers()},destroy:function(){this.unbindHandlers()},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventEnd:function(){return false},setRange:function(a){var b=this.view;this.start=a.start.clone();this.end=a.end.clone();this.rowData=[];this.colData=[];this.updateCells();this.colHeadFormat=b.opt("columnFormat")||this.computeColHeadFormat();this.eventTimeFormat=b.opt("timeFormat")||this.computeEventTimeFormat();this.displayEventEnd=b.opt("displayEventEnd");if(this.displayEventEnd==null){this.displayEventEnd=this.computeDisplayEventEnd()}},updateCells:function(){},rangeToSegs:function(a){},getCell:function(a,b){var c;if(b==null){if(typeof a==="number"){b=a%this.colCnt;a=Math.floor(a/this.colCnt)}else{b=a.col;a=a.row}}c={row:a,col:b};cC.extend(c,this.getRowData(a),this.getColData(b));cC.extend(c,this.computeCellRange(c));return c},computeCellRange:function(a){},getRowData:function(a){return this.rowData[a]||{}},getColData:function(a){return this.colData[a]||{}},getRowEl:function(a){},getColEl:function(a){},getCellDayEl:function(a){return this.getColEl(a.col)||this.getRowEl(a.row)},computeRowCoords:function(){var c=[];var b,a;var d;for(b=0;b<this.rowCnt;b++){a=this.getRowEl(b);d={top:a.offset().top};if(b>0){c[b-1].bottom=d.top}c.push(d)}d.bottom=d.top+a.outerHeight();return c},computeColCoords:function(){var c=[];var b,a;var d;for(b=0;b<this.colCnt;b++){a=this.getColEl(b);d={left:a.offset().left};if(b>0){c[b-1].right=d.left}c.push(d)}d.right=d.left+a.outerWidth();return c},bindHandlers:function(){var a=this;this.el.on("mousedown",function(b){if(!cC(b.target).is(".fc-event-container *, .fc-more")&&!cC(b.target).closest(".fc-popover").length){a.dayMousedown(b)}});this.bindSegHandlers();cC(document).on("dragstart",this.documentDragStartProxy)},unbindHandlers:function(){cC(document).off("dragstart",this.documentDragStartProxy)},dayMousedown:function(f){var d=this;var a=this.view;var c=a.opt("selectable");var b;var e;var g=new cx(this.coordMap,{scroll:a.opt("dragScroll"),dragStart:function(){a.unselect()},cellOver:function(h,i){var j=g.origCell;if(j){b=i?h:null;if(c){e=d.computeSelection(j,h);if(e){d.renderSelection(e)}else{b5()}}}},cellOut:function(h){b=null;e=null;d.destroySelection();b4()},listenStop:function(h){if(b){a.trigger("dayClick",d.getCellDayEl(b),b.start,h)}if(e){a.reportSelection(e,h)}b4()}});g.mousedown(f)},renderRangeHelper:function(b,c){var a;a=c?bG(c.event):{};a.start=b.start.clone();a.end=b.end?b.end.clone():null;a.allDay=null;this.view.calendar.normalizeEventDateProps(a);a.className=(a.className||[]).concat("fc-helper");if(!c){a.editable=false}this.renderHelper(a,c)},renderHelper:function(a,b){},destroyHelper:function(){},renderSelection:function(a){this.renderHighlight(a)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(a,c){var d=[a.start,a.end,c.start,c.end];var b;d.sort(cd);b={start:d[0].clone(),end:d[3].clone()};if(!this.view.calendar.isSelectionRangeAllowed(b)){return null}return b},renderHighlight:function(a){this.renderFill("highlight",this.rangeToSegs(a))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a,b){},destroyFill:function(a){var b=this.elsByFill[a];if(b){b.remove();delete this.elsByFill[a]}},renderFillSegEls:function(e,b){var d=this;var c=this[e+"SegEl"];var f="";var g=[];var a;if(b.length){for(a=0;a<b.length;a++){f+=this.fillSegHtml(e,b[a])}cC(f).each(function(j,h){var k=b[j];var i=cC(h);if(c){i=c.call(d,k,i)}if(i){i=cC(i);if(i.is(d.fillSegTag)){k.el=i;g.push(k)}}})}return g},fillSegTag:"div",fillSegHtml:function(f,c){var d=this[f+"SegClasses"];var b=this[f+"SegStyles"];var a=d?d.call(this,c):[];var e=b?b.call(this,c):"";return"<"+this.fillSegTag+(a.length?' class="'+a.join(" ")+'"':"")+(e?' style="'+e+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(c){var b=this.view;var a=c.start;return'<th class="fc-day-header '+b.widgetHeaderClass+" fc-"+cm[a.day()]+'">'+cR(a.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(c){var b=this.view;var a=c.start;var d=this.getDayClasses(a);d.unshift("fc-day",b.widgetContentClass);return'<td class="'+d.join(" ")+'" data-date="'+a.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(a){var c=this.view;var b=c.calendar.getNow().stripTime();var d=["fc-"+cm[a.day()]];if(c.name==="month"&&a.month()!=c.intervalStart.month()){d.push("fc-other-month")}if(a.isSame(b,"day")){d.push("fc-today",c.highlightStateClass)}else{if(a<b){d.push("fc-past")}else{d.push("fc-future")}}return d}});bP.mixin({mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,segs:null,renderEvents:function(e){var b=this.eventsToSegs(e);var a=[];var d=[];var f,c;for(f=0;f<b.length;f++){c=b[f];if(b6(c.event)){a.push(c)}else{d.push(c)}}a=this.renderBgSegs(a)||a;d=this.renderFgSegs(d)||d;this.segs=a.concat(d)},destroyEvents:function(){this.triggerSegMouseout();this.destroyFgSegs();this.destroyBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},destroyFgSegs:function(){},renderFgSegEls:function(a,b){var c=this.view;var d="";var e=[];var f;if(a.length){for(f=0;f<a.length;f++){d+=this.fgSegHtml(a[f],b)}cC(d).each(function(i,g){var j=a[i];var h=c.resolveEventEl(j.event,cC(g));if(h){h.data("fc-seg",j);j.el=h;e.push(j)}})}return e},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(b,a){return this.view.resolveEventEl(b.event,a)},bgEventSegClasses:function(c){var b=c.event;var a=b.source||{};return["fc-bgevent"].concat(b.className,a.className||[])},bgEventSegStyles:function(b){var d=this.view;var f=b.event;var e=f.source||{};var h=f.color;var c=e.color;var g=d.opt("eventColor");var a=f.backgroundColor||h||e.backgroundColor||c||d.opt("eventBackgroundColor")||g;if(a){return"background-color:"+a}return""},businessHoursSegClasses:function(a){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var a=this;var b=this.view;cC.each({mouseenter:function(c,d){a.triggerSegMouseover(c,d)},mouseleave:function(c,d){a.triggerSegMouseout(c,d)},click:function(c,d){return b.trigger("eventClick",this,c.event,d)},mousedown:function(c,d){if(cC(d.target).is(".fc-resizer")&&b.isEventResizable(c.event)){a.segResizeMousedown(c,d)}else{if(b.isEventDraggable(c.event)){a.segDragMousedown(c,d)}}}},function(c,d){a.el.on(c,".fc-event-container > *",function(e){var f=cC(this).data("fc-seg");if(f&&!a.isDraggingSeg&&!a.isResizingSeg){return d.call(this,f,e)}})})},triggerSegMouseover:function(b,a){if(!this.mousedOverSeg){this.mousedOverSeg=b;this.view.trigger("eventMouseover",b.el[0],b.event,a)}},triggerSegMouseout:function(b,a){a=a||{};if(this.mousedOverSeg){b=b||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",b.el[0],b.event,a)}},segDragMousedown:function(e,b){var c=this;var a=this.view;var f=e.el;var g=e.event;var d;var h=new b2(e.el,{parentEl:a.el,opacity:a.opt("dragOpacity"),revertDuration:a.opt("dragRevertDuration"),zIndex:2});var i=new cx(a.coordMap,{distance:5,scroll:a.opt("dragScroll"),listenStart:function(j){h.hide();h.start(j)},dragStart:function(j){c.triggerSegMouseout(e,j);c.isDraggingSeg=true;a.hideEvent(g);a.trigger("eventDragStart",f[0],g,j,{})},cellOver:function(j,k){var l=e.cell||i.origCell;d=c.computeEventDrop(l,j,g);if(d){if(a.renderDrag(d,e)){h.hide()}else{h.show()}if(k){d=null}}else{h.show();b5()}},cellOut:function(){d=null;a.destroyDrag();h.show();b4()},dragStop:function(j){h.stop(!d,function(){c.isDraggingSeg=false;a.destroyDrag();a.showEvent(g);a.trigger("eventDragStop",f[0],g,j,{});if(d){a.reportEventDrop(g,d,f,j)}});b4()},listenStop:function(){h.stop()}});i.mousedown(b)},computeEventDrop:function(c,h,j){var b=c.start;var g=h.start;var a;var e;var f;var i;var d;if(b.hasTime()===g.hasTime()){a=be(g,b);e=j.start.clone().add(a);if(j.end===null){f=null}else{f=j.end.clone().add(a)}i=j.allDay}else{e=g.clone();f=null;i=!g.hasTime()}d={start:e,end:f,allDay:i};if(!this.view.calendar.isEventRangeAllowed(d,j)){return null}return d},documentDragStart:function(e,d){var c=this.view;var a;var b;if(c.opt("droppable")){a=cC(e.target);b=c.opt("dropAccept");if(cC.isFunction(b)?b.call(a[0],a):a.is(b)){this.startExternalDrag(a,e,d)}}},startExternalDrag:function(b,g,f){var d=this;var e=ce(b);var c;var a;c=new cx(this.coordMap,{cellOver:function(h){a=d.computeExternalDrop(h,e);if(a){d.renderDrag(a)}else{b5()}},cellOut:function(){a=null;d.destroyDrag();b4()}});cC(document).one("dragstop",function(i,h){d.destroyDrag();b4();if(a){d.view.reportExternalDrop(e,a,b,i,h)}});c.startDrag(g)},computeExternalDrop:function(c,a){var b={start:c.start.clone(),end:null};if(a.startTime&&!b.start.hasTime()){b.start.time(a.startTime)}if(a.duration){b.end=b.start.clone().add(a.duration)}if(!this.view.calendar.isExternalDropRangeAllowed(b,a.eventProps)){return null}return b},renderDrag:function(a,b){},destroyDrag:function(){},segResizeMousedown:function(g,d){var e=this;var c=this.view;var f=c.calendar;var i=g.el;var k=g.event;var j=k.start;var a=f.getEventEnd(k);var h;var l;function b(){e.destroyEventResize();c.showEvent(k);b4()}l=new cx(this.coordMap,{distance:5,scroll:c.opt("dragScroll"),dragStart:function(m){e.triggerSegMouseout(g,m);e.isResizingSeg=true;c.trigger("eventResizeStart",i[0],k,m,{})},cellOver:function(m){h=m.end;if(!h.isAfter(j)){h=j.clone().add(be(m.end,m.start))}if(h.isSame(a)){h=null}else{if(!f.isEventRangeAllowed({start:j,end:h},k)){h=null;b5()}else{e.renderEventResize({start:j,end:h},g);c.hideEvent(k)}}},cellOut:function(){h=null;b()},dragStop:function(m){e.isResizingSeg=false;b();c.trigger("eventResizeStop",i[0],k,m,{});if(h){c.reportEventResize(k,h,i,m)}}});l.mousedown(d)},renderEventResize:function(a,b){},destroyEventResize:function(){},getEventTimeText:function(a,b){b=b||this.eventTimeFormat;if(a.end&&this.displayEventEnd){return this.view.formatRange(a,b)}else{return a.start.format(b)}},getSegClasses:function(c,a,d){var e=c.event;var b=["fc-event",c.isStart?"fc-start":"fc-not-start",c.isEnd?"fc-end":"fc-not-end"].concat(e.className,e.source?e.source.className:[]);if(a){b.push("fc-draggable")}if(d){b.push("fc-resizable")}return b},getEventSkinCss:function(i){var d=this.view;var j=i.source||{};var c=i.color;var f=j.color;var g=d.opt("eventColor");var b=i.backgroundColor||c||j.backgroundColor||f||d.opt("eventBackgroundColor")||g;var h=i.borderColor||c||j.borderColor||f||d.opt("eventBorderColor")||g;var a=i.textColor||j.textColor||d.opt("eventTextColor");var e=[];if(b){e.push("background-color:"+b)}if(h){e.push("border-color:"+h)}if(a){e.push("color:"+a)}return e.join(";")},eventsToSegs:function(d,a){var b=this.eventsToRanges(d);var c=[];var e;for(e=0;e<b.length;e++){c.push.apply(c,this.eventRangeToSegs(b[e],a))}return c},eventsToRanges:function(b){var d=this;var a=cJ(b);var c=[];cC.each(a,function(e,f){if(f.length){c.push.apply(c,bw(f[0])?d.eventsToInverseRanges(f):d.eventsToNormalRanges(f))}});return c},eventsToNormalRanges:function(f){var d=this.view.calendar;var a=[];var g,e;var b,c;for(g=0;g<f.length;g++){e=f[g];b=e.start.clone().stripZone();c=d.getEventEnd(e).stripZone();a.push({event:e,start:b,end:c,eventStartMS:+b,eventDurationMS:c-b})}return a},eventsToInverseRanges:function(a){var e=this.view;var f=e.start.clone().stripZone();var b=e.end.clone().stripZone();var d=this.eventsToNormalRanges(a);var i=[];var c=a[0];var j=f;var h,g;d.sort(cz);for(h=0;h<d.length;h++){g=d[h];if(g.start>j){i.push({event:c,start:j,end:g.start})}j=g.end}if(j<b){i.push({event:c,start:j,end:b})}return i},eventRangeToSegs:function(d,a){var b;var e,c;if(a){b=a(d)}else{b=this.rangeToSegs(d)}for(e=0;e<b.length;e++){c=b[e];c.event=d.event;c.eventStartMS=d.eventStartMS;c.eventDurationMS=d.eventDurationMS}return b}});function b6(a){var b=b9(a);return b==="background"||b==="inverse-background"}function bw(a){return b9(a)==="inverse-background"}function b9(a){return cP((a.source||{}).rendering,a.rendering)}function cJ(b){var a={};var c,d;for(c=0;c<b.length;c++){d=b[c];(a[d._id]||(a[d._id]=[])).push(d)}return a}function cz(a,b){return a.eventStartMS-b.eventStartMS}function a9(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||(a.event.title||"").localeCompare(b.event.title)}co.compareSegs=a9;co.dataAttrPrefix="";function ce(a){var e=co.dataAttrPrefix;var f;var b;var d;var c;if(e){e+="-"}f=a.data(e+"event")||null;if(f){if(typeof f==="object"){f=cC.extend({},f)}else{f={}}b=f.start;if(b==null){b=f.time}d=f.duration;c=f.stick;delete f.start;delete f.time;delete f.duration;delete f.stick}if(b==null){b=a.data(e+"start")}if(b==null){b=a.data(e+"time")}if(d==null){d=a.data(e+"duration")}if(c==null){c=a.data(e+"stick")}b=b!=null?a8.duration(b):null;d=d!=null?a8.duration(d):null;c=Boolean(c);return{eventProps:f,startTime:b,duration:d,stick:c}}var cu=bP.extend({numbersVisible:false,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,render:function(i){var d=this.view;var e=this.rowCnt;var c=this.colCnt;var h=e*c;var f="";var a;var g,b;for(a=0;a<e;a++){f+=this.dayRowHtml(a,i)}this.el.html(f);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");for(g=0;g<h;g++){b=this.getCell(g);d.trigger("dayRender",null,b.start,this.dayEls.eq(g))}bP.prototype.render.call(this)},destroy:function(){this.destroySegPopover();bP.prototype.destroy.call(this)},dayRowHtml:function(d,b){var c=this.view;var a=["fc-row","fc-week",c.widgetContentClass];if(b){a.push("fc-rigid")}return'<div class="'+a.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",d)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",d)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a){return this.bgCellHtml(a)},computeColHeadFormat:function(){if(this.rowCnt>1){return"ddd"}else{if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}}},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return this.colCnt==1},updateCells:function(){var a;var c;var d;var b;this.updateCellDates();a=this.cellDates;if(this.breakOnWeeks){c=a[0].day();for(b=1;b<a.length;b++){if(a[b].day()==c){break}}d=Math.ceil(a.length/b)}else{d=1;b=a.length}this.rowCnt=d;this.colCnt=b},updateCellDates:function(){var c=this.view;var b=this.start.clone();var e=[];var d=-1;var a=[];while(b.isBefore(this.end)){if(c.isHiddenDay(b)){a.push(d+0.5)}else{d++;a.push(d);e.push(b.clone())}b.add(1,"days")}this.cellDates=e;this.dayToCellOffsets=a},computeCellRange:function(c){var e=this.colCnt;var a=c.row*e+(this.isRTL?e-c.col-1:c.col);var d=this.cellDates[a].clone();var b=d.clone().add(1,"day");return{start:d,end:b}},getRowEl:function(a){return this.rowEls.eq(a)},getColEl:function(a){return this.dayEls.eq(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.colCnt+a.col)},computeRowCoords:function(){var a=bP.prototype.computeRowCoords.call(this);a[a.length-1].bottom+=this.bottomCoordPadding;return a},rangeToSegs:function(i){var m=this.isRTL;var g=this.rowCnt;var d=this.colCnt;var n=[];var j,c;var a;var f,e;var o,l;var b,h;var k;i=this.view.computeDayRange(i);j=this.dateToCellOffset(i.start);c=this.dateToCellOffset(i.end.subtract(1,"days"));for(a=0;a<g;a++){f=a*d;e=f+d-1;b=Math.max(f,j);h=Math.min(e,c);b=Math.ceil(b);h=Math.floor(h);if(b<=h){o=b===j;l=h===c;b-=f;h-=f;k={row:a,isStart:o,isEnd:l};if(m){k.leftCol=d-h-1;k.rightCol=d-b-1}else{k.leftCol=b;k.rightCol=h}n.push(k)}}return n},dateToCellOffset:function(b){var a=this.dayToCellOffsets;var c=b.diff(this.start,"days");if(c<0){return a[0]-1}else{if(c>=a.length){return a[a.length-1]+1}else{return a[c]}}},renderDrag:function(a,c){var b;this.renderHighlight(this.view.calendar.ensureVisibleEventRange(a));if(c&&!c.el.closest(this.el).length){this.renderRangeHelper(a,c);b=this.view.opt("dragOpacity");if(b!==undefined){this.helperEls.css("opacity",b)}return true}},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderEventResize:function(a,b){this.renderHighlight(a);this.renderRangeHelper(a,b)},destroyEventResize:function(){this.destroyHighlight();this.destroyHelper()},renderHelper:function(d,a){var c=[];var b=this.eventsToSegs([d]);var e;b=this.renderFgSegEls(b);e=this.renderSegRows(b);this.rowEls.each(function(f,h){var i=cC(h);var g=cC('<div class="fc-helper-skeleton"><table/></div>');var j;if(a&&a.row===f){j=a.el.position().top}else{j=i.find(".fc-content-skeleton tbody").position().top}g.css("top",j).find("table").append(e[f].tbodyEl);i.append(g);c.push(g[0])});this.helperEls=cC(c)},destroyHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},fillSegTag:"td",renderFill:function(e,b){var a=[];var f,c;var d;b=this.renderFillSegEls(e,b);for(f=0;f<b.length;f++){c=b[f];d=this.renderFillRow(e,c);this.rowEls.eq(c.row).append(d);a.push(d[0])}this.elsByFill[e]=cC(a);return b},renderFillRow:function(a,c){var b=this.colCnt;var e=c.leftCol;var f=c.rightCol+1;var d;var g;d=cC('<div class="fc-'+a.toLowerCase()+'-skeleton"><table><tr/></table></div>');g=d.find("tr");if(e>0){g.append('<td colspan="'+e+'"/>')}g.append(c.el.attr("colspan",f-e));if(f<b){g.append('<td colspan="'+(b-f)+'"/>')}this.bookendCells(g,a);return d}});cu.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover();bP.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return bP.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(b){var a=cC.grep(b,function(c){return c.event.allDay});return bP.prototype.renderBgSegs.call(this,a)},renderFgSegs:function(b){var a;b=this.renderFgSegEls(b);a=this.rowStructs=this.renderSegRows(b);this.rowEls.each(function(c,d){cC(d).find(".fc-content-skeleton > table").append(a[c].tbodyEl)});return b},destroyFgSegs:function(){var a=this.rowStructs||[];var b;while((b=a.pop())){b.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(b){var a=[];var c;var d;c=this.groupSegRows(b);for(d=0;d<c.length;d++){a.push(this.renderSegRow(d,c[d]))}return a},fgSegHtml:function(e,h){var b=this.view;var i=e.event;var j=b.isEventDraggable(i);var g=!h&&i.allDay&&e.isEnd&&b.isEventResizable(i);var f=this.getSegClasses(e,j,g);var a=this.getEventSkinCss(i);var c="";var d;f.unshift("fc-day-grid-event");if(!i.allDay&&e.isStart){c='<span class="fc-time">'+cR(this.getEventTimeText(i))+"</span>"}d='<span class="fc-title">'+(cR(i.title||"")||"&nbsp;")+"</span>";return'<a class="'+f.join(" ")+'"'+(i.url?' href="'+cR(i.url)+'"':"")+(a?' style="'+a+'"':"")+'><div class="fc-content">'+(this.isRTL?d+" "+c:c+" "+d)+"</div>"+(g?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(b,a){var d=this.colCnt;var h=this.buildSegLevels(a);var q=Math.max(1,h.length);var i=cC("<tbody/>");var m=[];var g=[];var o=[];var j,e;var p;var f;var k,l;var n;function c(r){while(p<r){n=(o[j-1]||[])[p];if(n){n.attr("rowspan",parseInt(n.attr("rowspan")||1,10)+1)}else{n=cC("<td/>");f.append(n)}g[j][p]=n;o[j][p]=n;p++}}for(j=0;j<q;j++){e=h[j];p=0;f=cC("<tr/>");m.push([]);g.push([]);o.push([]);if(e){for(k=0;k<e.length;k++){l=e[k];c(l.leftCol);n=cC('<td class="fc-event-container"/>').append(l.el);if(l.leftCol!=l.rightCol){n.attr("colspan",l.rightCol-l.leftCol+1)}else{o[j][p]=n}while(p<=l.rightCol){g[j][p]=n;m[j][p]=l;p++}f.append(n)}}c(d);this.bookendCells(f,"eventSkeleton");i.append(f)}return{row:b,tbodyEl:i,cellMatrix:g,segMatrix:m,segLevels:h,segs:a}},buildSegLevels:function(b){var d=[];var e,c;var a;b.sort(a9);for(e=0;e<b.length;e++){c=b[e];for(a=0;a<d.length;a++){if(!b3(c,d[a])){break}}c.level=a;(d[a]||(d[a]=[])).push(c)}for(a=0;a<d.length;a++){d[a].sort(bR)}return d},groupSegRows:function(b){var c=[];var a;for(a=0;a<this.rowCnt;a++){c.push([])}for(a=0;a<b.length;a++){c[b[a].row].push(b[a])}return c}});function b3(c,d){var b,a;for(b=0;b<d.length;b++){a=d[b];if(a.leftCol<=c.rightCol&&a.rightCol>=c.leftCol){return true}}return false}function bR(a,b){return a.leftCol-b.leftCol}cu.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(a){var c=this.rowStructs||[];var d;var b;for(d=0;d<c.length;d++){this.unlimitRow(d);if(!a){b=false}else{if(typeof a==="number"){b=a}else{b=this.computeRowLevelLimit(d)}}if(b!==false){this.limitRow(d,b)}}},computeRowLevelLimit:function(d){var b=this.rowEls.eq(d);var e=b.height();var c=this.rowStructs[d].tbodyEl.children();var a,f;for(a=0;a<c.length;a++){f=c.eq(a).removeClass("fc-limited");if(f.position().top+f.outerHeight()>e){return a}}return false},limitRow:function(h,d){var b=this;var n=this.rowStructs[h];var i=[];var j=0;var q;var p;var k;var t;var v,u;var r;var g;var o;var f,s;var l;var a;var m,w,c;function e(x){while(j<x){q=b.getCell(h,j);r=b.getCellSegs(q,d);if(r.length){f=k[d-1][j];c=b.renderMoreLink(q,r);w=cC("<div/>").append(c);f.append(w);i.push(w[0])}j++}}if(d&&d<n.segLevels.length){p=n.segLevels[d-1];k=n.cellMatrix;t=n.tbodyEl.children().slice(d).addClass("fc-limited").get();for(v=0;v<p.length;v++){u=p[v];e(u.leftCol);o=[];g=0;while(j<=u.rightCol){q=this.getCell(h,j);r=this.getCellSegs(q,d);o.push(r);g+=r.length;j++}if(g){f=k[d-1][u.leftCol];s=f.attr("rowspan")||1;l=[];for(a=0;a<o.length;a++){m=cC('<td class="fc-more-cell"/>').attr("rowspan",s);r=o[a];q=this.getCell(h,u.leftCol+a);c=this.renderMoreLink(q,[u].concat(r));w=cC("<div/>").append(c);m.append(w);l.push(m[0]);i.push(m[0])}f.addClass("fc-limited").after(cC(l));t.push(f[0])}}e(this.colCnt);n.moreEls=cC(i);n.limitedEls=cC(t)}},unlimitRow:function(a){var b=this.rowStructs[a];if(b.moreEls){b.moreEls.remove();b.moreEls=null}if(b.limitedEls){b.limitedEls.removeClass("fc-limited");b.limitedEls=null}},renderMoreLink:function(c,a){var d=this;var b=this.view;return cC('<a class="fc-more"/>').text(this.getMoreLinkText(a.length)).on("click",function(h){var e=b.opt("eventLimitClick");var k=c.start;var g=cC(this);var f=d.getCellDayEl(c);var l=d.getCellSegs(c);var j=d.resliceDaySegs(l,k);var i=d.resliceDaySegs(a,k);if(typeof e==="function"){e=b.trigger("eventLimitClick",null,{date:k,dayEl:f,moreEl:g,segs:j,hiddenSegs:i},h)}if(e==="popover"){d.showSegPopover(c,g,j)}else{if(typeof e==="string"){b.calendar.zoomTo(k,e)}}})},showSegPopover:function(d,c,a){var e=this;var b=this.view;var g=c.parent();var f;var h;if(this.rowCnt==1){f=b.el}else{f=this.rowEls.eq(d.row)}h={className:"fc-more-popover",content:this.renderSegPopoverContent(d,a),parentEl:this.el,top:f.offset().top,autoHide:true,viewportConstrain:b.opt("popoverViewportConstrain"),hide:function(){e.segPopover.destroy();e.segPopover=null;e.popoverSegs=null}};if(this.isRTL){h.right=g.offset().left+g.outerWidth()+1}else{h.left=g.offset().left-1}this.segPopover=new bn(h);this.segPopover.show()},renderSegPopoverContent:function(d,a){var b=this.view;var c=b.opt("theme");var e=d.start.format(b.opt("dayPopoverFormat"));var f=cC('<div class="fc-header '+b.widgetHeaderClass+'"><span class="fc-close '+(c?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+cR(e)+'</span><div class="fc-clear"/></div><div class="fc-body '+b.widgetContentClass+'"><div class="fc-event-container"></div></div>');var g=f.find(".fc-event-container");var h;a=this.renderFgSegEls(a,true);this.popoverSegs=a;for(h=0;h<a.length;h++){a[h].cell=d;g.append(a[h].el)}return f},resliceDaySegs:function(a,c){var e=cC.map(a,function(g){return g.event});var b=c.clone().stripTime();var d=b.clone().add(1,"days");var f={start:b,end:d};return this.eventsToSegs(e,function(g){var h=cE(g,f);return h?[h]:[]})},getMoreLinkText:function(b){var a=this.view.opt("eventLimitText");if(typeof a==="function"){return a(b)}else{return"+"+b+" "+a}},getCellSegs:function(c,f){var e=this.rowStructs[c.row].segMatrix;var d=f||0;var a=[];var b;while(d<e.length){b=e[d][c.col];if(b){a.push(b)}d++}return a}});var bq=bP.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){bP.apply(this,arguments);this.processOptions()},render:function(){this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.computeSlatTops();this.renderBusinessHours();bP.prototype.render.call(this)},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a){return this.bgCellHtml(a)},slatRowHtml:function(){var d=this.view;var f=this.isRTL;var g="";var h=this.slotDuration.asMinutes()%15===0;var e=a8.duration(+this.minTime);var b;var a;var c;while(e<this.maxTime){b=this.start.clone().time(e);a=b.minutes();c='<td class="fc-axis fc-time '+d.widgetContentClass+'" '+d.axisStyleAttr()+">"+((!h||!a)?"<span>"+cR(b.format(this.axisFormat))+"</span>":"")+"</td>";g+="<tr "+(!a?"":'class="fc-minor"')+">"+(!f?c:"")+'<td class="'+d.widgetContentClass+'"/>'+(f?c:"")+"</tr>";e.add(this.slotDuration)}return g},processOptions:function(){var c=this.view;var a=c.opt("slotDuration");var b=c.opt("snapDuration");a=a8.duration(a);b=b?a8.duration(b):a;this.slotDuration=a;this.snapDuration=b;this.minTime=a8.duration(c.opt("minTime"));this.maxTime=a8.duration(c.opt("maxTime"));this.axisFormat=c.opt("axisFormat")||c.opt("smallTimeFormat")},computeColHeadFormat:function(){if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return true},updateCells:function(){var c=this.view;var a=[];var b;b=this.start.clone();while(b.isBefore(this.end)){a.push({day:b.clone()});b.add(1,"day");b=c.skipHiddenDays(b)}if(this.isRTL){a.reverse()}this.colData=a;this.colCnt=a.length;this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellRange:function(c){var a=this.computeSnapTime(c.row);var d=this.view.calendar.rezoneDate(c.day).time(a);var b=d.clone().add(this.snapDuration);return{start:d,end:b}},getColEl:function(a){return this.dayEls.eq(a)},computeSnapTime:function(a){return a8.duration(this.minTime+this.snapDuration*a)},rangeToSegs:function(g){var e=this.colCnt;var b=[];var c;var f;var d;var a;g={start:g.start.clone().stripZone(),end:g.end.clone().stripZone()};for(f=0;f<e;f++){d=this.colData[f].day;a={start:d.clone().time(this.minTime),end:d.clone().time(this.maxTime)};c=cE(g,a);if(c){c.col=f;b.push(c)}}return b},resize:function(){this.computeSlatTops();this.updateSegVerticals()},computeRowCoords:function(){var d=this.el.offset().top;var c=[];var b;var a;for(b=0;b<this.rowCnt;b++){a={top:d+this.computeTimeTop(this.computeSnapTime(b))};if(b>0){c[b-1].bottom=a.top}c.push(a)}a.bottom=a.top+this.computeTimeTop(this.computeSnapTime(b));return c},computeDateTop:function(b,a){return this.computeTimeTop(a8.duration(b.clone().stripZone()-a.clone().stripTime()))},computeTimeTop:function(d){var f=(d-this.minTime)/this.slotDuration;var a;var b;var e;var c;f=Math.max(0,f);f=Math.min(this.slatEls.length,f);a=Math.floor(f);b=f-a;e=this.slatTops[a];if(b){c=this.slatTops[a+1];return e+(c-e)*b}else{return e}},computeSlatTops:function(){var a=[];var b;this.slatEls.each(function(c,d){b=cC(d).position().top;a.push(b)});a.push(b+this.slatEls.last().outerHeight());this.slatTops=a},renderDrag:function(a,c){var b;if(c){this.renderRangeHelper(a,c);b=this.view.opt("dragOpacity");if(b!==undefined){this.helperEl.css("opacity",b)}return true}else{this.renderHighlight(this.view.calendar.ensureVisibleEventRange(a))}},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderEventResize:function(a,b){this.renderRangeHelper(a,b)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(d,f){var a=this.eventsToSegs([d]);var b;var e,c;var g;a=this.renderFgSegEls(a);b=this.renderSegTable(a);for(e=0;e<a.length;e++){c=a[e];if(f&&f.col===c.col){g=f.el;c.el.css({left:g.css("left"),right:g.css("right"),"margin-left":g.css("margin-left"),"margin-right":g.css("margin-right")})}}this.helperEl=cC('<div class="fc-helper-skeleton"/>').append(b).appendTo(this.el)},destroyHelper:function(){if(this.helperEl){this.helperEl.remove();this.helperEl=null}},renderSelection:function(a){if(this.view.opt("selectHelper")){this.renderRangeHelper(a)}else{this.renderHighlight(a)}},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderFill:function(d,l,e){var h;var k;var b;var j,a;var c;var f;var m;var g,i;if(l.length){l=this.renderFillSegEls(d,l);h=this.groupSegCols(l);e=e||d.toLowerCase();k=cC('<div class="fc-'+e+'-skeleton"><table><tr/></table></div>');b=k.find("tr");for(j=0;j<h.length;j++){a=h[j];c=cC("<td/>").appendTo(b);if(a.length){f=cC('<div class="fc-'+e+'-container"/>').appendTo(c);m=this.colData[j].day;for(g=0;g<a.length;g++){i=a[g];f.append(i.el.css({top:this.computeDateTop(i.start,m),bottom:-this.computeDateTop(i.end,m)}))}}}this.bookendCells(b,d);this.el.append(k);this.elsByFill[d]=k}return l}});bq.mixin({eventSkeletonEl:null,renderFgSegs:function(a){a=this.renderFgSegEls(a);this.el.append(this.eventSkeletonEl=cC('<div class="fc-content-skeleton"/>').append(this.renderSegTable(a)));return a},destroyFgSegs:function(a){if(this.eventSkeletonEl){this.eventSkeletonEl.remove();this.eventSkeletonEl=null}},renderSegTable:function(i){var g=cC("<table><tr/></table>");var b=g.find("tr");var f;var d,e;var h,a;var c;f=this.groupSegCols(i);this.computeSegVerticals(i);for(h=0;h<f.length;h++){a=f[h];cL(a);c=cC('<div class="fc-event-container"/>');for(d=0;d<a.length;d++){e=a[d];e.el.css(this.generateSegPositionCss(e));if(e.bottom-e.top<30){e.el.addClass("fc-short")}c.append(e.el)}b.append(cC("<td/>").append(c))}this.bookendCells(b,"eventSkeleton");return g},updateSegVerticals:function(){var b=(this.segs||[]).concat(this.businessHourSegs||[]);var a;this.computeSegVerticals(b);for(a=0;a<b.length;a++){b[a].el.css(this.generateSegVerticalCss(b[a]))}},computeSegVerticals:function(b){var a,c;for(a=0;a<b.length;a++){c=b[a];c.top=this.computeDateTop(c.start,c.start);c.bottom=this.computeDateTop(c.end,c.start)}},fgSegHtml:function(d,i){var b=this.view;var j=d.event;var k=b.isEventDraggable(j);var g=!i&&d.isEnd&&b.isEventResizable(j);var e=this.getSegClasses(d,k,g);var a=this.getEventSkinCss(j);var f;var c;var h;e.unshift("fc-time-grid-event");if(b.isMultiDayEvent(j)){if(d.isStart||d.isEnd){f=this.getEventTimeText(d);c=this.getEventTimeText(d,"LT");h=this.getEventTimeText({start:d.start})}}else{f=this.getEventTimeText(j);c=this.getEventTimeText(j,"LT");h=this.getEventTimeText({start:j.start})}return'<a class="'+e.join(" ")+'"'+(j.url?' href="'+cR(j.url)+'"':"")+(a?' style="'+a+'"':"")+'><div class="fc-content">'+(f?'<div class="fc-time" data-start="'+cR(h)+'" data-full="'+cR(c)+'"><span>'+cR(f)+"</span></div>":"")+(j.title?'<div class="fc-title">'+cR(j.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(g?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(c){var g=this.view.opt("slotEventOverlap");var b=c.backwardCoord;var a=c.forwardCoord;var e=this.generateSegVerticalCss(c);var d;var f;if(g){a=Math.min(1,b+(a-b)*2)}if(this.isRTL){d=1-a;f=b}else{d=b;f=1-a}e.zIndex=c.level+1;e.left=d*100+"%";e.right=f*100+"%";if(g&&c.forwardPressure){e[this.isRTL?"marginLeft":"marginRight"]=10*2}return e},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(b){var c=[];var a;for(a=0;a<this.colCnt;a++){c.push([])}for(a=0;a<b.length;a++){c[b[a].col].push(b[a])}return c}});function cL(c){var a;var d;var b;c.sort(a9);a=bV(c);ca(a);if((d=a[0])){for(b=0;b<d.length;b++){bZ(d[b])}for(b=0;b<d.length;b++){bH(d[b],0,0)}}}function bV(b){var d=[];var e,c;var a;for(e=0;e<b.length;e++){c=b[e];for(a=0;a<d.length;a++){if(!cO(c,d[a]).length){break}}c.level=a;(d[a]||(d[a]=[])).push(c)}return d}function ca(e){var f,d;var a,c;var b;for(f=0;f<e.length;f++){d=e[f];for(a=0;a<d.length;a++){c=d[a];c.forwardSegs=[];for(b=f+1;b<e.length;b++){cO(c,e[b],c.forwardSegs)}}}}function bZ(b){var c=b.forwardSegs;var d=0;var e,a;if(b.forwardPressure===undefined){for(e=0;e<c.length;e++){a=c[e];bZ(a);d=Math.max(d,1+a.forwardPressure)}b.forwardPressure=d}}function bH(b,e,d){var c=b.forwardSegs;var a;if(b.forwardCoord===undefined){if(!c.length){b.forwardCoord=1}else{c.sort(cy);bH(c[0],e+1,d);b.forwardCoord=c[0].backwardCoord}b.backwardCoord=b.forwardCoord-(b.forwardCoord-d)/(e+1);for(a=0;a<c.length;a++){bH(c[a],0,b.forwardCoord)}}}function cO(c,d,a){a=a||[];for(var b=0;b<d.length;b++){if(br(c,d[b])){a.push(d[b])}}return a}function br(a,b){return a.bottom>b.top&&a.top<b.bottom}function cy(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||a9(a,b)}var cS=co.View=cv.extend({type:null,name:null,calendar:null,options:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:false,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(a,b,c){this.calendar=a;this.options=b;this.type=this.name=c;this.nextDayThreshold=a8.duration(this.opt("nextDayThreshold"));this.initTheming();this.initHiddenDays();this.documentMousedownProxy=cC.proxy(this,"documentMousedown");this.initialize()},initialize:function(){},opt:function(b){var a;a=this.options[b];if(a!==undefined){return a}a=this.calendar.options[b];if(cC.isPlainObject(a)&&!ck(b)){return bS(a,this.type)}return a},trigger:function(c,a){var b=this.calendar;return b.trigger.apply(b,[c,a||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(a){cC.extend(this,a)},computeRange:function(a){var g=a8.duration(this.opt("duration")||this.constructor.duration||{days:1});var d=bL(g);var f=a.clone().startOf(d);var b=f.clone().add(g);var e,c;if(cI("days",g)){f.stripTime();b.stripTime()}else{if(!f.hasTime()){f=this.calendar.rezoneDate(f)}if(!b.hasTime()){b=this.calendar.rezoneDate(b)}}e=f.clone();e=this.skipHiddenDays(e);c=b.clone();c=this.skipHiddenDays(c,-1,true);return{intervalDuration:g,intervalUnit:d,intervalStart:f,intervalEnd:b,start:e,end:c}},computePrevDate:function(a){return this.skipHiddenDays(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.skipHiddenDays(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){if(this.intervalUnit=="year"){return"YYYY"}else{if(this.intervalUnit=="month"){return this.opt("monthYearFormat")}else{if(this.intervalDuration.as("days")>1){return"ll"}else{return"LL"}}}},formatRange:function(a,b,d){var c=a.end;if(!c.hasTime()){c=c.clone().subtract(1)}return bJ(a.start,c,b,d,this.opt("isRTL"))},renderView:function(){this.render();this.updateSize();this.initializeScroll();this.trigger("viewRender",this,this,this.el);cC(document).on("mousedown",this.documentMousedownProxy)},render:function(){},destroyView:function(){this.unselect();this.destroyViewEvents();this.destroy();this.trigger("viewDestroy",this,this,this.el);cC(document).off("mousedown",this.documentMousedownProxy)},destroy:function(){this.el.empty()},initTheming:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header";this.widgetContentClass=a+"-widget-content";this.highlightStateClass=a+"-state-highlight"},updateSize:function(a){if(a){this.recordScroll()}this.updateHeight();this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a=this.calendar;this.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())},setHeight:function(a,b){},computeScrollerHeight:function(b,c){var d;var a;c=c||this.scrollerEl;d=this.el.add(c);d.css({position:"relative",left:-1});a=this.el.outerHeight()-c.height();d.css({position:"",left:""});return b-a},initializeScroll:function(){},recordScroll:function(){if(this.scrollerEl){this.scrollTop=this.scrollerEl.scrollTop()}},restoreScroll:function(){if(this.scrollTop!==null){this.scrollerEl.scrollTop(this.scrollTop)}},renderViewEvents:function(a){this.renderEvents(a);this.eventSegEach(function(b){this.trigger("eventAfterRender",b.event,b.event,b.el)});this.trigger("eventAfterAllRender")},renderEvents:function(){},destroyViewEvents:function(){this.eventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)});this.destroyEvents()},destroyEvents:function(){},resolveEventEl:function(b,c){var a=this.trigger("eventRender",b,b,c);if(a===false){c=null}else{if(a&&a!==true){c=cC(a)}}return c},showEvent:function(a){this.eventSegEach(function(b){b.el.css("visibility","")},a)},hideEvent:function(a){this.eventSegEach(function(b){b.el.css("visibility","hidden")},a)},eventSegEach:function(d,a){var c=this.getEventSegs();var b;for(b=0;b<c.length;b++){if(!a||c[b].event._id===a._id){d.call(this,c[b])}}},getEventSegs:function(){return[]},isEventDraggable:function(b){var a=b.source||{};return cP(b.startEditable,a.startEditable,this.opt("eventStartEditable"),b.editable,a.editable,this.opt("editable"))},reportEventDrop:function(f,g,b,a){var d=this.calendar;var e=d.mutateEvent(f,g);var c=function(){e.undo();d.reportEventChange()};this.triggerEventDrop(f,e.dateDelta,c,b,a);d.reportEventChange()},triggerEventDrop:function(e,d,c,b,a){this.trigger("eventDrop",b[0],e,d,c,a,{})},reportExternalDrop:function(d,g,b,h,e){var f=d.eventProps;var c;var a;if(f){c=cC.extend({},f,g);a=this.calendar.renderEvent(c,d.stick)[0]}this.triggerExternalDrop(a,g,b,h,e)},triggerExternalDrop:function(e,a,c,b,d){this.trigger("drop",c[0],a.start,b,d);if(e){this.trigger("eventReceive",null,e)}},renderDrag:function(a,b){},destroyDrag:function(){},isEventResizable:function(b){var a=b.source||{};return cP(b.durationEditable,a.durationEditable,this.opt("eventDurationEditable"),b.editable,a.editable,this.opt("editable"))},reportEventResize:function(f,g,b,a){var d=this.calendar;var e=d.mutateEvent(f,{end:g});var c=function(){e.undo();d.reportEventChange()};this.triggerEventResize(f,e.durationDelta,c,b,a);d.reportEventChange()},triggerEventResize:function(d,b,c,a,e){this.trigger("eventResize",a[0],d,b,c,e,{})},select:function(b,a){this.unselect(a);this.renderSelection(b);this.reportSelection(b,a)},renderSelection:function(a){},reportSelection:function(b,a){this.isSelected=true;this.trigger("select",null,b.start,b.end,a)},unselect:function(a){if(this.isSelected){this.isSelected=false;this.destroySelection();this.trigger("unselect",null,a)}},destroySelection:function(){},documentMousedown:function(b){var a;if(this.isSelected&&this.opt("unselectAuto")&&bC(b)){a=this.opt("unselectCancel");if(!a||!cC(b.target).closest(a).length){this.unselect(b)}}},initHiddenDays:function(){var b=this.opt("hiddenDays")||[];var d=[];var c=0;var a;if(this.opt("weekends")===false){b.push(0,6)}for(a=0;a<7;a++){if(!(d[a]=cC.inArray(a,b)!==-1)){c++}}if(!c){throw"invalid hiddenDays"}this.isHiddenDayHash=d},isHiddenDay:function(a){if(a8.isMoment(a)){a=a.day()}return this.isHiddenDayHash[a]},skipHiddenDays:function(a,d,c){var b=a.clone();d=d||1;while(this.isHiddenDayHash[(b.day()+(c?d:0)+7)%7]){b.add(d,"days")}return b},computeDayRange:function(b){var d=b.start.clone().stripTime();var c=b.end;var e=null;var a;if(c){e=c.clone().stripTime();a=+c.time();if(a&&a>=this.nextDayThreshold){e.add(1,"days")}}if(!c||e<=d){e=d.clone().add(1,"days")}return{start:d,end:e}},isMultiDayEvent:function(a){var b=this.computeDayRange(a);return b.end.diff(b.start,"days")>1}});function bi(S,W){var d=this;W=W||{};var y=cr({},bE,W);var m;if(y.lang in cA){m=cA[y.lang]}else{m=cA[bE.lang]}if(m){y=cr({},bE,m,W)}if(y.isRTL){y=cr({},bE,cl,m||{},W)}d.options=y;d.render=p;d.destroy=b;d.refetchEvents=Z;d.reportEvents=U;d.reportEventChange=F;d.rerenderEvents=ae;d.changeView=ab;d.select=c;d.unselect=aa;d.prev=t;d.next=ai;d.prevYear=G;d.nextYear=L;d.today=R;d.gotoDate=q;d.incrementDate=M;d.zoomTo=B;d.getDate=K;d.getCalendar=j;d.getView=v;d.option=g;d.trigger=r;d.isValidViewType=l;d.getViewButtonText=H;var n=bG(by(y.lang));if(y.monthNames){n._months=y.monthNames}if(y.monthNamesShort){n._monthsShort=y.monthNamesShort}if(y.dayNames){n._weekdays=y.dayNames}if(y.dayNamesShort){n._weekdaysShort=y.dayNamesShort}if(y.firstDay!=null){var aj=bG(n._week);aj.dow=y.firstDay;n._week=aj}d.defaultAllDayEventDuration=a8.duration(y.defaultAllDayEventDuration);d.defaultTimedEventDuration=a8.duration(y.defaultTimedEventDuration);d.moment=function(){var ak;if(y.timezone==="local"){ak=co.moment.apply(null,arguments);if(ak.hasTime()){ak.local()}}else{if(y.timezone==="UTC"){ak=co.moment.utc.apply(null,arguments)}else{ak=co.moment.parseZone.apply(null,arguments)}}if("_locale" in ak){ak._locale=n}else{ak._lang=n}return ak};d.getIsAmbigTimezone=function(){return y.timezone!=="local"&&y.timezone!=="UTC"};d.rezoneDate=function(ak){return d.moment(ak.toArray())};d.getNow=function(){var ak=y.now;if(typeof ak==="function"){ak=ak()}return d.moment(ak)};d.calculateWeekNumber=function(ak){var al=y.weekNumberCalculation;if(typeof al==="function"){return al(ak)}else{if(al==="local"){return ak.week()}else{if(al.toUpperCase()==="ISO"){return ak.isoWeek()}}}};d.getEventEnd=function(ak){if(ak.end){return ak.end.clone()}else{return d.getDefaultEventEnd(ak.allDay,ak.start)}};d.getDefaultEventEnd=function(al,ak){var am=ak.clone();if(al){am.stripTime().add(d.defaultAllDayEventDuration)}else{am.add(d.defaultTimedEventDuration)}if(d.getIsAmbigTimezone()){am.stripZone()}return am};function z(ak){return(ak.locale||ak.lang).call(ak,y.lang).humanize()}bj.call(d,y);var N=d.isFetchNeeded;var C=d.fetchEvents;var f=S[0];var ag;var o;var X;var A;var s={};var Y;var ad;var D;var e=0;var E;var w=[];if(y.defaultDate!=null){E=d.moment(y.defaultDate)}else{E=d.getNow()}function p(ak){if(!X){x()}else{if(h()){k();J(ak)}}}function x(){A=y.theme?"ui":"fc";S.addClass("fc");if(y.isRTL){S.addClass("fc-rtl")}else{S.addClass("fc-ltr")}if(y.theme){S.addClass("ui-widget")}else{S.addClass("fc-unthemed")}X=cC("<div class='fc-view-container'/>").prependTo(S);ag=new ci(d,y);o=ag.render();if(o){S.prepend(o)}ab(y.defaultView);if(y.handleWindowResize){D=cN(V,y.windowResizeDelay);cC(window).resize(D)}}function b(){if(Y){Y.destroyView()}ag.destroy();X.remove();S.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");cC(window).unbind("resize",D)}function h(){return S.is(":visible")}function ab(ak){J(0,ak)}function J(ak,al){e++;if(Y&&al&&Y.type!==al){ag.deactivateButton(Y.type);ah();if(Y.start){Y.destroyView()}Y.el.remove();Y=null}if(!Y&&al){Y=a(al);Y.el=cC("<div class='fc-view fc-"+al+"-view' />").appendTo(X);ag.activateButton(al)}if(Y){if(ak<0){E=Y.computePrevDate(E)}else{if(ak>0){E=Y.computeNextDate(E)}}if(!Y.start||ak||!E.isWithin(Y.intervalStart,Y.intervalEnd)){if(h()){ah();if(Y.start){Y.destroyView()}Y.setDate(E);Y.renderView();T();Q();u();ac()}}}T();e--}function a(al){var ak=I(al);return new ak["class"](d,ak.options,al)}function I(aq){var am=y.defaultButtonText||{};var ak=y.buttonText||{};var ap=y.views||{};var ao=aq;var an=[];var av;var al;var au,aw,ar=false;var ax;if(s[aq]){return s[aq]}function at(ay){if(typeof ay==="function"){al=ay}else{if(typeof ay==="object"){cC.extend(av,ay)}}}while(ao&&!al){av={};at(bU[ao]);at(ap[ao]);an.unshift(av);ao=av.type}an.unshift({});av=cC.extend.apply(cC,an);if(al){au=av.duration||al.duration;if(au){au=a8.duration(au);aw=bL(au);ar=cI(aw,au)===1}if(ar&&ap[aw]){av=cC.extend({},ap[aw],av)}ax=ak[aq]||(ar?ak[aw]:null)||am[aq]||(ar?am[aw]:null)||av.buttonText||al.buttonText||(au?z(au):null)||aq;return(s[aq]={"class":al,options:av,buttonText:ax})}}function l(ak){return Boolean(I(ak))}function H(al){var ak=I(al);if(ak){return ak.buttonText}}d.getSuggestedViewHeight=function(){if(ad===undefined){k()}return ad};d.isHeightAuto=function(){return y.contentHeight==="auto"||y.height==="auto"};function P(ak){if(h()){if(ak){af()}e++;Y.updateSize(true);e--;return true}}function k(){if(h()){af()}}function af(){if(typeof y.contentHeight==="number"){ad=y.contentHeight}else{if(typeof y.height==="number"){ad=y.height-(o?o.outerHeight(true):0)}else{ad=Math.round(X.width()/Math.max(y.aspectRatio,0.5))}}}function V(ak){if(!e&&ak.target===window&&Y.start){if(P(true)){Y.trigger("windowResize",f)}}}function Z(){O();i()}function ae(){if(h()){ah();Y.destroyViewEvents();Y.renderViewEvents(w);T()}}function O(){ah();Y.destroyViewEvents();T()}function ac(){if(!y.lazyFetching||N(Y.start,Y.end)){i()}else{ae()}}function i(){C(Y.start,Y.end)}function U(ak){w=ak;ae()}function F(){ae()}function Q(){ag.updateTitle(Y.computeTitle())}function u(){var ak=d.getNow();if(ak.isWithin(Y.intervalStart,Y.intervalEnd)){ag.disableButton("today")}else{ag.enableButton("today")}}function c(ak,al){ak=d.moment(ak);if(al){al=d.moment(al)}else{if(ak.hasTime()){al=ak.clone().add(d.defaultTimedEventDuration)}else{al=ak.clone().add(d.defaultAllDayEventDuration)}}Y.select({start:ak,end:al})}function aa(){if(Y){Y.unselect()}}function t(){J(-1)}function ai(){J(1)}function G(){E.add(-1,"years");J()}function L(){E.add(1,"years");J()}function R(){E=d.getNow();J()}function q(ak){E=d.moment(ak);J()}function M(ak){E.add(a8.duration(ak));J()}function B(al,an){var am;var ak;if(!an||!l(an)){an=an||"day";am=ag.getViewsWithButtons().join(" ");ak=am.match(new RegExp("\\w+"+cw(an)));if(!ak){ak=am.match(/\w+Day/)}an=ak?ak[0]:"agendaDay"}E=al;ab(an)}function K(){return E.clone()}function ah(){X.css({width:"100%",height:X.height(),overflow:"hidden"})}function T(){X.css({width:"",height:"",overflow:""})}function j(){return d}function v(){return Y}function g(al,ak){if(ak===undefined){return y[al]}if(al=="height"||al=="contentHeight"||al=="aspectRatio"){y[al]=ak;P(true)}}function r(al,ak){if(y[al]){return y[al].apply(ak||f,Array.prototype.slice.call(arguments,2))}}}function ci(j,a){var b=this;b.render=n;b.destroy=g;b.updateTitle=i;b.activateButton=o;b.deactivateButton=d;b.disableButton=k;b.enableButton=h;b.getViewsWithButtons=l;var m=cC();var f=[];var e;function n(){var p=a.header;e=a.theme?"ui":"fc";if(p){m=cC("<div class='fc-toolbar'/>").append(c("left")).append(c("right")).append(c("center")).append('<div class="fc-clear"/>');return m}}function g(){m.remove()}function c(r){var q=cC('<div class="fc-'+r+'"/>');var p=a.header[r];if(p){cC.each(p.split(" "),function(v){var u=cC();var t=true;var s;cC.each(this.split(","),function(A,F){var x;var D;var B;var G;var w;var y;var E;var C;var z;if(F=="title"){u=u.add(cC("<h2>&nbsp;</h2>"));t=false}else{if(j[F]){x=function(){j[F]()}}else{if(j.isValidViewType(F)){x=function(){j.changeView(F)};f.push(F);w=j.getViewButtonText(F)}}if(x){D=bS(a.themeButtonIcons,F);B=bS(a.buttonIcons,F);G=bS(a.defaultButtonText,F);y=bS(a.buttonText,F);if(w||y){E=cR(w||y)}else{if(D&&a.theme){E="<span class='ui-icon ui-icon-"+D+"'></span>"}else{if(B&&!a.theme){E="<span class='fc-icon fc-icon-"+B+"'></span>"}else{E=cR(G||F)}}}C=["fc-"+F+"-button",e+"-button",e+"-state-default"];z=cC('<button type="button" class="'+C.join(" ")+'">'+E+"</button>").click(function(){if(!z.hasClass(e+"-state-disabled")){x();if(z.hasClass(e+"-state-active")||z.hasClass(e+"-state-disabled")){z.removeClass(e+"-state-hover")}}}).mousedown(function(){z.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-down")}).mouseup(function(){z.removeClass(e+"-state-down")}).hover(function(){z.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-hover")},function(){z.removeClass(e+"-state-hover").removeClass(e+"-state-down")});u=u.add(z)}}});if(t){u.first().addClass(e+"-corner-left").end().last().addClass(e+"-corner-right").end()}if(u.length>1){s=cC("<div/>");if(t){s.addClass("fc-button-group")}s.append(u);q.append(s)}else{q.append(u)}})}return q}function i(p){m.find("h2").text(p)}function o(p){m.find(".fc-"+p+"-button").addClass(e+"-state-active")}function d(p){m.find(".fc-"+p+"-button").removeClass(e+"-state-active")}function k(p){m.find(".fc-"+p+"-button").attr("disabled","disabled").addClass(e+"-state-disabled")}function h(p){m.find(".fc-"+p+"-button").removeAttr("disabled").removeClass(e+"-state-disabled")}function l(){return f}}co.sourceNormalizers=[];co.sourceFetchers=[];var bl={dataType:"json",cache:false};var cc=1;function bj(s){var g=this;g.isFetchNeeded=v;g.fetchEvents=d;g.addEventSource=M;g.removeEventSource=S;g.updateEvent=l;g.renderEvent=D;g.removeEvents=f;g.clientEvents=K;g.mutateEvent=u;g.normalizeEventDateProps=o;g.ensureVisibleEventRange=x;var n=g.trigger;var p=g.getView;var G=g.reportEvents;var P={events:[]};var j=[P];var J,F;var c=0;var z=0;var a=0;var H=[];cC.each((s.events?[s.events]:[]).concat(s.eventSources||[]),function(V,T){var U=y(T);if(U){j.push(U)}});function v(T,U){return !J||T.clone().stripZone()<J.clone().stripZone()||U.clone().stripZone()>F.clone().stripZone()}function d(T,W){J=T;F=W;H=[];var U=++c;var X=j.length;z=X;for(var V=0;V<X;V++){C(j[V],U)}}function C(T,U){O(T,function(Y){var Z=cC.isArray(T.events);var V,W;var X;if(U==c){if(Y){for(V=0;V<Y.length;V++){W=Y[V];if(Z){X=W}else{X=Q(W,T)}if(X){H.push.apply(H,b(X))}}}z--;if(!z){G(H)}}})}function O(ab,af){var W;var ah=co.sourceFetchers;var U;for(W=0;W<ah.length;W++){U=ah[W].call(g,ab,J.clone(),F.clone(),s.timezone,af);if(U===true){return}else{if(typeof U=="object"){O(U,af);return}}}var ad=ab.events;if(ad){if(cC.isFunction(ad)){N();ad.call(g,J.clone(),F.clone(),s.timezone,function(ai){af(ai);R()})}else{if(cC.isArray(ad)){af(ad)}else{af()}}}else{var aa=ab.url;if(aa){var ae=ab.success;var T=ab.error;var Z=ab.complete;var ac;if(cC.isFunction(ab.data)){ac=ab.data()}else{ac=ab.data}var X=cC.extend({},ac||{});var V=cP(ab.startParam,s.startParam);var Y=cP(ab.endParam,s.endParam);var ag=cP(ab.timezoneParam,s.timezoneParam);if(V){X[V]=J.format()}if(Y){X[Y]=F.format()}if(s.timezone&&s.timezone!="local"){X[ag]=s.timezone}N();cC.ajax(cC.extend({},bl,ab,{data:X,success:function(ai){ai=ai||[];var aj=bK(ae,this,arguments);if(cC.isArray(aj)){ai=aj}af(ai)},error:function(){bK(T,this,arguments);af()},complete:function(){bK(Z,this,arguments);R()}}))}else{af()}}}function M(T){var U=y(T);if(U){j.push(U);z++;C(U,c)}}function y(T){var V=co.sourceNormalizers;var U;var W;if(cC.isFunction(T)||cC.isArray(T)){U={events:T}}else{if(typeof T==="string"){U={url:T}}else{if(typeof T==="object"){U=cC.extend({},T)}}}if(U){if(U.className){if(typeof U.className==="string"){U.className=U.className.split(/\s+/)}}else{U.className=[]}if(cC.isArray(U.events)){U.origArray=U.events;U.events=cC.map(U.events,function(X){return Q(X,U)})}for(W=0;W<V.length;W++){V[W].call(g,U)}return U}}function S(T){j=cC.grep(j,function(U){return !h(U,T)});H=cC.grep(H,function(U){return !h(U.source,T)});G(H)}function h(T,U){return T&&U&&I(T)==I(U)}function I(T){return((typeof T==="object")?(T.origArray||T.googleCalendarId||T.url||T.events):null)||T}function l(T){T.start=g.moment(T.start);if(T.end){T.end=g.moment(T.end)}else{T.end=null}u(T,r(T));G(H)}function r(T){var U={};cC.each(T,function(W,V){if(i(W)){if(V!==undefined&&cM(V)){U[W]=V}}});return U}function i(T){return !/^_|^(id|allDay|start|end)$/.test(T)}function D(T,X){var W=Q(T);var U;var V,Y;if(W){U=b(W);for(V=0;V<U.length;V++){Y=U[V];if(!Y.source){if(X){P.events.push(Y);Y.source=P}H.push(Y)}}G(H);return U}return[]}function f(T){var U;var V;if(T==null){T=function(){return true}}else{if(!cC.isFunction(T)){U=T+"";T=function(W){return W._id==U}}}H=cC.grep(H,T,true);for(V=0;V<j.length;V++){if(cC.isArray(j[V].events)){j[V].events=cC.grep(j[V].events,T,true)}}G(H)}function K(T){if(cC.isFunction(T)){return cC.grep(H,T)}else{if(T!=null){T+="";return cC.grep(H,function(U){return U._id==T})}}return H}function N(){if(!(a++)){n("loading",null,true,p())}}function R(){if(!(--a)){n("loading",null,false,p())}}function Q(W,T){var V={};var Y,X;var U;if(s.eventDataTransform){W=s.eventDataTransform(W)}if(T&&T.eventDataTransform){W=T.eventDataTransform(W)}cC.extend(V,W);if(T){V.source=T}V._id=W._id||(W.id===undefined?"_fc"+cc++:W.id+"");if(W.className){if(typeof W.className=="string"){V.className=W.className.split(/\s+/)}else{V.className=W.className}}else{V.className=[]}Y=W.start||W.date;X=W.end;if(bM(Y)){Y=a8.duration(Y)}if(bM(X)){X=a8.duration(X)}if(W.dow||a8.isDuration(Y)||a8.isDuration(X)){V.start=Y?a8.duration(Y):null;V.end=X?a8.duration(X):null;V._recurring=true}else{if(Y){Y=g.moment(Y);if(!Y.isValid()){return false}}if(X){X=g.moment(X);if(!X.isValid()){X=null}}U=W.allDay;if(U===undefined){U=cP(T?T.allDayDefault:undefined,s.allDayDefault)}w(Y,X,U,V)}return V}function w(T,W,U,V){V.start=T;V.end=W;V.allDay=U;o(V);b1(V)}function o(T){if(T.allDay==null){T.allDay=!(T.start.hasTime()||(T.end&&T.end.hasTime()))}if(T.allDay){T.start.stripTime();if(T.end){T.end.stripTime()}}else{if(!T.start.hasTime()){T.start=g.rezoneDate(T.start)}if(T.end&&!T.end.hasTime()){T.end=g.rezoneDate(T.end)}}if(T.end&&!T.end.isAfter(T.start)){T.end=null}if(!T.end){if(s.forceEventDuration){T.end=g.getDefaultEventEnd(T.allDay,T.start)}else{T.end=null}}}function x(U){var T;if(!U.end){T=U.allDay;if(T==null){T=!U.start.hasTime()}U={start:U.start,end:g.getDefaultEventEnd(T,U.start)}}return U}function b(U,ae,Y){var ac=[];var af;var ad;var V;var X;var Z,T;var aa,W;var ab;ae=ae||J;Y=Y||F;if(U){if(U._recurring){if((ad=U.dow)){af={};for(V=0;V<ad.length;V++){af[ad[V]]=true}}X=ae.clone().stripTime();while(X.isBefore(Y)){if(!af||af[X.day()]){Z=U.start;T=U.end;aa=X.clone();W=null;if(Z){aa=aa.time(Z)}if(T){W=X.clone().time(T)}ab=cC.extend({},U);w(aa,W,!Z&&!T,ab);ac.push(ab)}X.add(1,"days")}}else{ac.push(U)}}return ac}function u(T,U){var V={};var Y;var Z;var W;var X;U=U||{};if(!U.start){U.start=T.start.clone()}if(U.end===undefined){U.end=T.end?T.end.clone():null}if(U.allDay==null){U.allDay=T.allDay}o(U);Y=T._end!==null&&U.end===null;if(U.allDay){Z=bD(U.start,T._start)}else{Z=be(U.start,T._start)}if(!Y&&U.end){W=be(U.end,U.start).subtract(be(T._end||g.getDefaultEventEnd(T._allDay,T._start),T._start))}cC.each(U,function(ab,aa){if(i(ab)){if(aa!==undefined){V[ab]=aa}}});X=q(K(T._id),Y,U.allDay,Z,W,V);return{dateDelta:Z,durationDelta:W,undo:X}}function q(T,Y,Z,aa,V,U){var W=g.getIsAmbigTimezone();var X=[];if(aa&&!aa.valueOf()){aa=null}if(V&&!V.valueOf()){V=null}cC.each(T,function(ad,ab){var ae;var ac;ae={start:ab.start.clone(),end:ab.end?ab.end.clone():null,allDay:ab.allDay};cC.each(U,function(af){ae[af]=ab[af]});ac={start:ab._start,end:ab._end,allDay:ab._allDay};if(Y){ac.end=null}ac.allDay=Z;o(ac);if(aa){ac.start.add(aa);if(ac.end){ac.end.add(aa)}}if(V){if(!ac.end){ac.end=g.getDefaultEventEnd(ac.allDay,ac.start)}ac.end.add(V)}if(W&&!ac.allDay&&(aa||V)){ac.start.stripZone();if(ac.end){ac.end.stripZone()}}cC.extend(ab,U,ac);b1(ab);X.push(function(){cC.extend(ab,ae);b1(ab)})});return function(){for(var ab=0;ab<X.length;ab++){X[ab]()}}}g.getBusinessHoursEvents=E;function E(){var U=s.businessHours;var T={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};var W=g.getView();var V;if(U){if(typeof U==="object"){V=cC.extend({},T,U)}else{V=T}}if(V){return b(Q(V),W.start,W.end)}return[]}g.isEventRangeAllowed=A;g.isSelectionRangeAllowed=B;g.isExternalDropRangeAllowed=k;function A(W,V){var U=V.source||{};var T=cP(V.constraint,U.constraint,s.eventConstraint);var X=cP(V.overlap,U.overlap,s.eventOverlap);W=x(W);return t(W,T,X,V)}function B(T){return t(T,s.selectConstraint,s.selectOverlap)}function k(W,T){var V;var U;if(T){V=cC.extend({},T,W);U=b(Q(V))[0]}if(U){return A(W,U)}else{W=x(W);return B(W)}}function t(V,Z,T,aa){var ab;var Y;var W,U;var X;V={start:V.start.clone().stripZone(),end:V.end.clone().stripZone()};if(Z!=null){ab=m(Z);Y=false;for(W=0;W<ab.length;W++){if(L(ab[W],V)){Y=true;break}}if(!Y){return false}}for(W=0;W<H.length;W++){U=H[W];if(aa&&aa._id===U._id){continue}if(e(U,V)){if(T===false){return false}else{if(typeof T==="function"&&!T(U,aa)){return false}}if(aa){X=cP(U.overlap,(U.source||{}).overlap);if(X===false){return false}if(typeof X==="function"&&!X(aa,U)){return false}}}}return true}function m(T){if(T==="businessHours"){return E()}if(typeof T==="object"){return b(Q(T))}return K(T)}function L(T,U){var V=T.start.clone().stripZone();var W=g.getEventEnd(T).stripZone();return U.start>=V&&U.end<=W}function e(T,U){var V=T.start.clone().stripZone();var W=g.getEventEnd(T).stripZone();return U.start<W&&U.end>V}}function b1(a){a._allDay=a.allDay;a._start=a.start.clone();a._end=a.end?a.end.clone():null}var ba=bU.basic=cS.extend({dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new cu(this);this.coordMap=this.dayGrid.coordMap},setRange:function(a){cS.prototype.setRange.call(this,a);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);this.dayGrid.setRange(a)},computeRange:function(a){var b=cS.prototype.computeRange.call(this,a);if(/year|month/.test(b.intervalUnit)){b.start.startOf("week");b.start=this.skipHiddenDays(b.start);if(b.end.weekday()){b.end.add(1,"week").startOf("week");b.end=this.skipHiddenDays(b.end,-1,true)}}return b},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render(this.hasRigidRows())},destroy:function(){this.dayGrid.destroy();cS.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible){return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+cR(this.opt("weekNumberTitle"))+"</span></th>"}},numberIntroHtml:function(a){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.dayGrid.getCell(a,0).start)+"</span></td>"}},dayIntroHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"}},introHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"}},numberCellHtml:function(c){var b=c.start;var a;if(!this.dayNumbersVisible){return"<td/>"}a=this.dayGrid.getDayClasses(b);a.unshift("fc-day-number");return'<td class="'+a.join(" ")+'" data-date="'+b.format()+'">'+b.date()+"</td>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&typeof a!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=bO(this.el.find(".fc-week-number"))}},setHeight:function(a,c){var b=this.opt("eventLimit");var d;bg(this.scrollerEl);cb(this.headRowEl);this.dayGrid.destroySegPopover();if(b&&typeof b==="number"){this.dayGrid.limitRows(b)}d=this.computeScrollerHeight(a);this.setGridHeight(d,c);if(b&&typeof b!=="number"){this.dayGrid.limitRows(b)}if(!c&&cp(this.scrollerEl,d)){cq(this.headRowEl,bo(this.scrollerEl));d=this.computeScrollerHeight(a);this.scrollerEl.height(d);this.restoreScroll()}},setGridHeight:function(a,b){if(b){bv(this.dayGrid.rowEls)}else{bT(this.dayGrid.rowEls,a,true)}},renderEvents:function(a){this.dayGrid.renderEvents(a);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.recordScroll();this.dayGrid.destroyEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a){this.dayGrid.renderSelection(a)},destroySelection:function(){this.dayGrid.destroySelection()}});cK({fixedWeekCount:true});var bX=bU.month=ba.extend({computeRange:function(a){var b=ba.prototype.computeRange.call(this,a);if(this.isFixedWeeks()){b.end.add(6-b.end.diff(b.start,"weeks"),"weeks")}return b},setGridHeight:function(a,b){b=b||this.opt("weekMode")==="variable";if(b){a*=this.rowCnt/6}bT(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");if(a){return a==="fixed"}return this.opt("fixedWeekCount")}});bX.duration={months:1};bU.basicWeek={type:"basic",duration:{weeks:1}};bU.basicDay={type:"basic",duration:{days:1}};cK({allDaySlot:true,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true});var bx=5;bU.agenda=cS.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new bq(this);if(this.opt("allDaySlot")){this.dayGrid=new cu(this);this.coordMap=new b0([this.dayGrid.coordMap,this.timeGrid.coordMap])}else{this.coordMap=this.timeGrid.coordMap}},setRange:function(a){cS.prototype.setRange.call(this,a);this.timeGrid.setRange(a);if(this.dayGrid){this.dayGrid.setRange(a)}},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.el=this.el.find(".fc-time-grid");this.timeGrid.render();this.bottomRuleEl=cC('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroy();if(this.dayGrid){this.dayGrid.destroy()}cS.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var a;var b;var c;var d;if(this.opt("weekNumbers")){a=this.timeGrid.getCell(0).start;b=this.calendar.calculateWeekNumber(a);c=this.opt("weekNumberTitle");if(this.opt("isRTL")){d=b+c}else{d=c+b}return'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+cR(d)+"</span></th>"}else{return'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"}},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||cR(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},updateSize:function(a){if(a){this.timeGrid.resize()}cS.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=bO(this.el.find(".fc-axis"))},setHeight:function(a,c){var b;var d;if(this.bottomRuleHeight===null){this.bottomRuleHeight=this.bottomRuleEl.outerHeight()}this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");bg(this.scrollerEl);cb(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.destroySegPopover();b=this.opt("eventLimit");if(b&&typeof b!=="number"){b=bx}if(b){this.dayGrid.limitRows(b)}}if(!c){d=this.computeScrollerHeight(a);if(cp(this.scrollerEl,d)){cq(this.noScrollRowEls,bo(this.scrollerEl));d=this.computeScrollerHeight(a);this.scrollerEl.height(d);this.restoreScroll()}else{this.scrollerEl.height(d).css("overflow","hidden");this.bottomRuleEl.show()}}},initializeScroll:function(){var d=this;var a=a8.duration(this.opt("scrollTime"));var b=this.timeGrid.computeTimeTop(a);b=Math.ceil(b);if(b){b++}function c(){d.scrollerEl.scrollTop(b)}c();setTimeout(c,0)},renderEvents:function(b){var e=[];var a=[];var d=[];var f;var c;for(c=0;c<b.length;c++){if(b[c].allDay){e.push(b[c])}else{a.push(b[c])}}f=this.timeGrid.renderEvents(a);if(this.dayGrid){d=this.dayGrid.renderEvents(e)}this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.recordScroll();this.timeGrid.destroyEvents();if(this.dayGrid){this.dayGrid.destroyEvents()}},renderDrag:function(a,b){if(a.start.hasTime()){return this.timeGrid.renderDrag(a,b)}else{if(this.dayGrid){return this.dayGrid.renderDrag(a,b)}}},destroyDrag:function(){this.timeGrid.destroyDrag();if(this.dayGrid){this.dayGrid.destroyDrag()}},renderSelection:function(a){if(a.start.hasTime()||a.end.hasTime()){this.timeGrid.renderSelection(a)}else{if(this.dayGrid){this.dayGrid.renderSelection(a)}}},destroySelection:function(){this.timeGrid.destroySelection();if(this.dayGrid){this.dayGrid.destroySelection()}}});bU.agendaWeek={type:"agenda",duration:{weeks:1}};bU.agendaDay={type:"agenda",duration:{days:1}}});