if(window.XMLHttpRequest&&!(window.FileAPI&&FileAPI.shouldLoad)){window.XMLHttpRequest.prototype.setRequestHeader=(function(a){return function(d,b){if(d==="__setXHR_"){var c=b(this);if(c instanceof Function){c(this)}}else{a.apply(this,arguments)}}})(window.XMLHttpRequest.prototype.setRequestHeader)}var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.13";ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(g,b,d){var c=this;c.promisesCount=0;this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var a=this.isResumeSupported();function e(j){j.method=j.method||"POST";j.headers=j.headers||{};var h=j._deferred=j._deferred||b.defer();var m=h.promise;function l(n){if(h.notify){h.notify(n)}if(m.progressFunc){d(function(){m.progressFunc(n)})}}function i(o){if(j._start!=null&&a){return{loaded:o.loaded+j._start,total:(j._file&&j._file.size)||o.total,type:o.type,config:j,lengthComputable:!0,target:o.target}}else{return o}}if(!j.disableProgress){j.headers.__setXHR_=function(){return function(n){if(!n||!n.upload||!n.upload.addEventListener){return}j.__XHR=n;if(j.xhrFn){j.xhrFn(n)}n.upload.addEventListener("progress",function(o){o.config=j;l(i(o))},!1);n.upload.addEventListener("load",function(o){if(o.lengthComputable){o.config=j;l(i(o))}},!1)}}}function k(){g(j).then(function(o){if(a&&j._chunkSize&&!j._finished&&j._file){var n=j._file&&j._file.size||0;l({loaded:Math.min(j._end,n),total:n,config:j,type:"progress"});c.upload(j,!0)}else{if(j._finished){delete j._finished}h.resolve(o)}},function(n){h.reject(n)},function(o){h.notify(o)})}if(!a){k()}else{if(j._chunkSize&&j._end&&!j._finished){j._start=j._end;j._end+=j._chunkSize;k()}else{if(j.resumeSizeUrl){g.get(j.resumeSizeUrl).then(function(n){if(j.resumeSizeResponseReader){j._start=j.resumeSizeResponseReader(n.data)}else{j._start=parseInt((n.data.size==null?n.data:n.data.size).toString())}if(j._chunkSize){j._end=j._start+j._chunkSize}k()},function(n){throw n})}else{if(j.resumeSize){j.resumeSize().then(function(n){j._start=n;if(j._chunkSize){j._end=j._start+j._chunkSize}k()},function(n){throw n})}else{if(j._chunkSize){j._start=0;j._end=j._start+j._chunkSize}k()}}}}m.success=function(n){m.then(function(o){n(o.data,o.status,o.headers,j)});return m};m.error=function(n){m.then(null,function(o){n(o.data,o.status,o.headers,j)});return m};m.progress=function(n){m.progressFunc=n;m.then(null,null,function(o){n(o)});return m};m.abort=m.pause=function(){if(j.__XHR){d(function(){j.__XHR.abort()})}return m};m.xhr=function(n){j.xhrFn=(function(o){return function(){if(o){o.apply(m,arguments)}n.apply(m,arguments)}})(j.xhrFn);return m};c.promisesCount++;if(m["finally"]&&m["finally"] instanceof Function){m["finally"](function(){c.promisesCount--})}return m}this.isUploadInProgress=function(){return c.promisesCount>0};this.rename=function(i,h){i.ngfName=h;return i};this.jsonBlob=function(i){if(i!=null&&!angular.isString(i)){i=JSON.stringify(i)}var h=new window.Blob([i],{type:"application/json"});h._ngfBlob=!0;return h};this.json=function(h){return angular.toJson(h)};function f(i){var j={};for(var h in i){if(i.hasOwnProperty(h)){j[h]=i[h]}}return j}this.isFile=function(h){return h!=null&&(h instanceof window.Blob||(h.flashId&&h.name&&h.size))};this.upload=function(i,h){function k(m,n){if(m._ngfBlob){return m}i._file=i._file||m;if(i._start!=null&&a){if(i._end&&i._end>=m.size){i._finished=!0;i._end=m.size}var o=m.slice(i._start,i._end||m.size);o.name=m.name;o.ngfName=m.ngfName;if(i._chunkSize){n.append("_chunkSize",i._chunkSize);n.append("_currentChunkSize",i._end-i._start);n.append("_chunkNumber",Math.floor(i._start/i._chunkSize));n.append("_totalSize",i._file.size)}return o}return m}function j(r,s,q){if(s!==undefined){if(angular.isDate(s)){s=s.toISOString()}if(angular.isString(s)){r.append(q,s)}else{if(c.isFile(s)){var p=k(s,r);var o=q.split(",");if(o[1]){p.ngfName=o[1].replace(/^\s+|\s+$/g,"");q=o[0]}i._fileKey=i._fileKey||q;r.append(q,p,p.ngfName||p.name)}else{if(angular.isObject(s)){if(s.$$ngfCircularDetection){throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+q}s.$$ngfCircularDetection=!0;try{for(var m in s){if(s.hasOwnProperty(m)&&m!=="$$ngfCircularDetection"){var n=i.objectKey==null?"[i]":i.objectKey;if(s.length&&parseInt(m)>-1){n=i.arrayKey==null?n:i.arrayKey}j(r,s[m],q+n.replace(/[ik]/g,m))}}}finally{delete s.$$ngfCircularDetection}}else{r.append(q,s)}}}}}function l(){i._chunkSize=c.translateScalars(i.resumeChunkSize);i._chunkSize=i._chunkSize?parseInt(i._chunkSize.toString()):null;i.headers=i.headers||{};i.headers["Content-Type"]=undefined;i.transformRequest=i.transformRequest?(angular.isArray(i.transformRequest)?i.transformRequest:[i.transformRequest]):[];i.transformRequest.push(function(n){var o=new window.FormData(),m;n=n||i.fields||{};if(i.file){n.file=i.file}for(m in n){if(n.hasOwnProperty(m)){var p=n[m];if(i.formDataAppender){i.formDataAppender(o,m,p)}else{j(o,p,m)}}}return o})}if(!h){i=f(i)}if(!i._isDigested){i._isDigested=!0;l()}return e(i)};this.http=function(h){h=f(h);h.transformRequest=h.transformRequest||function(i){if((window.ArrayBuffer&&i instanceof window.ArrayBuffer)||i instanceof window.Blob){return i}return g.defaults.transformRequest[0].apply(this,arguments)};h._chunkSize=c.translateScalars(h.resumeChunkSize);h._chunkSize=h._chunkSize?parseInt(h._chunkSize.toString()):null;return e(h)};this.translateScalars=function(h){if(angular.isString(h)){if(h.search(/kb/i)===h.length-2){return parseFloat(h.substring(0,h.length-2)*1024)}else{if(h.search(/mb/i)===h.length-2){return parseFloat(h.substring(0,h.length-2)*1048576)}else{if(h.search(/gb/i)===h.length-2){return parseFloat(h.substring(0,h.length-2)*1073741824)}else{if(h.search(/b/i)===h.length-1){return parseFloat(h.substring(0,h.length-1))}else{if(h.search(/s/i)===h.length-1){return parseFloat(h.substring(0,h.length-1))}else{if(h.search(/m/i)===h.length-1){return parseFloat(h.substring(0,h.length-1)*60)}else{if(h.search(/h/i)===h.length-1){return parseFloat(h.substring(0,h.length-1)*3600)}}}}}}}}return h};this.urlToBlob=function(h){var i=b.defer();g({url:h,method:"get",responseType:"arraybuffer"}).then(function(n){var l=new Uint8Array(n.data);var k=n.headers("content-type")||"image/WebP";var j=new window.Blob([l],{type:k});var m=h.match(/.*\/(.+?)(\?.*)?$/);if(m.length>1){j.name=m[1]}i.resolve(j)},function(j){i.reject(j)});return i.promise};this.setDefaults=function(h){this.defaults=h||{}};this.defaults={};this.version=ngFileUpload.version}]);ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(c,b,e,g,d){var i=d;i.getAttrWithDefaults=function(j,k){if(j[k]!=null){return j[k]}var l=i.defaults[k];return(l==null?l:(angular.isString(l)?l:JSON.stringify(l)))};i.attrGetter=function(l,j,m,o){var k=this.getAttrWithDefaults(j,l);if(m){try{if(o){return c(k)(m,o)}else{return c(k)(m)}}catch(n){if(l.search(/min|max|pattern/i)){return k}else{throw n}}}else{return k}};i.shouldUpdateOn=function(l,j,k){var m=i.attrGetter("ngfModelOptions",j,k);if(m&&m.updateOn){return m.updateOn.split(" ").indexOf(l)>-1}return !0};i.emptyPromise=function(){var k=g.defer();var j=arguments;b(function(){k.resolve.apply(k,j)});return k.promise};i.rejectPromise=function(){var k=g.defer();var j=arguments;b(function(){k.reject.apply(k,j)});return k.promise};i.happyPromise=function(l,j){var k=g.defer();l.then(function(m){k.resolve(m)},function(m){b(function(){throw m});k.resolve(j)});return k.promise};function f(m,j,l){var k=[i.emptyPromise()];angular.forEach(m,function(o,n){if(o.type.indexOf("image/jpeg")===0&&i.attrGetter("ngfFixOrientation",j,l,{$file:o})){k.push(i.happyPromise(i.applyExifRotation(o),o).then(function(p){m.splice(n,1,p)}))}});return g.all(k)}function h(m,k,l,o){var j=i.attrGetter("ngfResize",k,l);if(!j||!i.isResizeSupported()||!m.length){return i.emptyPromise()}if(j instanceof Function){var n=g.defer();return j(m).then(function(q){a(q,m,k,l,o).then(function(p){n.resolve(p)},function(p){n.reject(p)})},function(p){n.reject(p)})}else{return a(j,m,k,l,o)}}function a(q,o,j,n,p){var m=[i.emptyPromise()];function k(s,r){if(s.type.indexOf("image")===0){if(q.pattern&&!i.validatePattern(s,q.pattern)){return}q.resizeIf=function(v,u){return i.attrGetter("ngfResizeIf",j,n,{$width:v,$height:u,$file:s})};var t=i.resize(s,q);m.push(t);t.then(function(u){o.splice(r,1,u)},function(u){s.$error="resize";(s.$errorMessages=(s.$errorMessages||{})).resize=!0;s.$errorParam=(u?(u.message?u.message:u)+": ":"")+(s&&s.name);p.$ngfValidations.push({name:"resize",valid:!1});i.applyModelValidation(p,o)})}}for(var l=0;l<o.length;l++){k(o[l],l)}return g.all(m)}i.updateModel=function(s,x,k,j,o,t,n){function p(I,L,J,K,G){x.$$ngfPrevValidFiles=I;x.$$ngfPrevInvalidFiles=L;var F=I&&I.length?I[0]:null;var E=L&&L.length?L[0]:null;if(s){i.applyModelValidation(s,I);s.$setViewValue(G?F:I)}if(j){c(j)(k,{$files:I,$file:F,$newFiles:J,$duplicateFiles:K,$invalidFiles:L,$invalidFile:E,$event:t})}var H=i.attrGetter("ngfModelInvalid",x);if(H){b(function(){c(H).assign(k,G?E:L)})}b(function(){})}var q,v=[],u,y,r=[],l=[];function C(){function G(H,I){return H.name===I.name&&(H.$ngfOrigSize||H.size)===(I.$ngfOrigSize||I.size)&&H.type===I.type}function E(I){var H;for(H=0;H<u.length;H++){if(G(I,u[H])){return !0}}for(H=0;H<y.length;H++){if(G(I,y[H])){return !0}}return !1}if(o){q=[];v=[];for(var F=0;F<o.length;F++){if(E(o[F])){v.push(o[F])}else{q.push(o[F])}}}}function z(E){return angular.isArray(E)?E:[E]}function D(){function F(){b(function(){p(A?u.concat(l):l,A?y.concat(r):r,o,v,w)},m&&m.debounce?m.debounce.change||m.debounce:0)}var E=B?q:l;h(E,x,k,s).then(function(){if(B){i.validate(q,A?u.length:0,s,x,k).then(function(G){l=G.validsFiles;r=G.invalidsFiles;F()})}else{F()}},function(){for(var H=0;H<E.length;H++){var I=E[H];if(I.$error==="resize"){var G=l.indexOf(I);if(G>-1){l.splice(G,1);r.push(I)}F()}}})}u=x.$$ngfPrevValidFiles||[];y=x.$$ngfPrevInvalidFiles||[];if(s&&s.$modelValue){u=z(s.$modelValue)}var A=i.attrGetter("ngfKeep",x,k);q=(o||[]).slice(0);if(A==="distinct"||i.attrGetter("ngfKeepDistinct",x,k)===!0){C(x,k)}var w=!A&&!i.attrGetter("ngfMultiple",x,k)&&!i.attrGetter("multiple",x);if(A&&!q.length){return}i.attrGetter("ngfBeforeModelChange",x,k,{$files:o,$file:o&&o.length?o[0]:null,$newFiles:q,$duplicateFiles:v,$event:t});var B=i.attrGetter("ngfValidateAfterResize",x,k);var m=i.attrGetter("ngfModelOptions",x,k);i.validate(q,A?u.length:0,s,x,k).then(function(E){if(n){p(q,[],o,v,w)}else{if((!m||!m.allowInvalid)&&!B){l=E.validFiles;r=E.invalidFiles}else{l=q}if(i.attrGetter("ngfFixOrientation",x,k)&&i.isExifSupported()){f(l,x,k).then(function(){D()})}else{D()}}})};return i}]);ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(g,f,e,b){var d=[];function c(j){var h=j.match(/Android[^\d]*(\d+)\.(\d+)/);if(h&&h.length>2){var i=b.defaults.androidFixMinorVersion||4;return parseInt(h[1])<4||(parseInt(h[1])===i&&parseInt(h[2])<i)}return j.indexOf("Chrome")===-1&&/.*Windows.*Safari.*/.test(j)}function a(h,y,u,o,k,B,x,z){var l=function(D,E){return z.attrGetter(D,u,E)};function t(){return y[0].tagName.toLowerCase()==="input"&&u.type&&u.type.toLowerCase()==="file"}function C(){return l("ngfChange")||l("ngfSelect")}function i(D){if(z.shouldUpdateOn("change",u,h)){var E=D.__files_||(D.target&&D.target.files),G=[];if(!E){return}for(var F=0;F<E.length;F++){G.push(E[F])}z.updateModel(o,u,h,C(),G.length?G:null,D)}}z.registerModelChangeValidator(o,u,h);var s=[];if(l("ngfMultiple")){s.push(h.$watch(l("ngfMultiple"),function(){w.attr("multiple",l("ngfMultiple",h))}))}if(l("ngfCapture")){s.push(h.$watch(l("ngfCapture"),function(){w.attr("capture",l("ngfCapture",h))}))}if(l("ngfAccept")){s.push(h.$watch(l("ngfAccept"),function(){w.attr("accept",l("ngfAccept",h))}))}s.push(u.$observe("accept",function(){w.attr("accept",l("accept"))}));function A(D,E){function G(I){D.attr("id","ngf-"+I);E.attr("id","ngf-label-"+I)}for(var F=0;F<y[0].attributes.length;F++){var H=y[0].attributes[F];if(H.name!=="type"&&H.name!=="class"&&H.name!=="style"){if(H.name==="id"){G(H.value);s.push(u.$observe("id",G))}else{D.attr(H.name,(!H.value&&(H.name==="required"||H.name==="multiple"))?H.name:H.value)}}}}function m(){if(t()){return y}var D=angular.element('<input type="file">');var E=angular.element("<label>upload</label>");E.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1");A(D,E);d.push({el:y,ref:E});document.body.appendChild(E.append(D)[0]);return D}function n(D){if(y.attr("disabled")){return !1}if(l("ngfSelectDisabled",h)){return}var E=j(D);if(E!=null){return E}v(D);try{if(!t()&&!document.body.contains(w[0])){d.push({el:y,ref:w.parent()});document.body.appendChild(w.parent()[0]);w.bind("change",i)}}catch(F){}if(c(navigator.userAgent)){setTimeout(function(){w[0].click()},0)}else{w[0].click()}return !1}var p=0;var q=0;function j(E){var G=E.changedTouches||(E.originalEvent&&E.originalEvent.changedTouches);if(G){if(E.type==="touchstart"){q=G[0].clientX;p=G[0].clientY;return !0}else{if(E.type==="touchend"){var F=G[0].clientX;var D=G[0].clientY;if((Math.abs(F-q)>20)||(Math.abs(D-p)>20)){E.stopPropagation();E.preventDefault();return !1}}return !0}}}var w=y;function v(D){if(z.shouldUpdateOn("click",u,h)&&w.val()){w.val(null);z.updateModel(o,u,h,C(),null,D,!0)}}if(!t()){w=m()}w.bind("change",i);if(!t()){y.bind("click touchstart touchend",n)}else{y.bind("click",v)}function r(D){if(w&&!w.attr("__ngf_ie10_Fix_")){if(!w[0].parentNode){w=null;return}D.preventDefault();D.stopPropagation();w.unbind("click");var E=w.clone();w.replaceWith(E);w=E;w.attr("__ngf_ie10_Fix_","true");w.bind("change",i);w.bind("click",r);w[0].click();return !1}else{w.removeAttr("__ngf_ie10_Fix_")}}if(navigator.appVersion.indexOf("MSIE 10")!==-1){w.bind("click",r)}if(o){o.$formatters.push(function(D){if(D==null||D.length===0){if(w.val()){w.val(null)}}return D})}h.$on("$destroy",function(){if(!t()){w.parent().remove()}angular.forEach(s,function(D){D()})});B(function(){for(var D=0;D<d.length;D++){var E=d[D];if(!document.body.contains(E.el[0])){d.splice(D,1);E.ref.remove()}}});if(window.FileAPI&&window.FileAPI.ngfFixIE){window.FileAPI.ngfFixIE(y,w,i)}}return{restrict:"AEC",require:"?ngModel",link:function(i,j,h,k){a(i,j,h,k,g,f,e,b)}}}]);(function(){ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(f,e,c){var d=f;d.base64DataUrl=function(g){if(angular.isArray(g)){var i=c.defer(),h=0;angular.forEach(g,function(j){d.dataUrl(j,!0)["finally"](function(){h++;if(h===g.length){var k=[];angular.forEach(g,function(l){k.push(l.$ngfDataUrl)});i.resolve(k,g)}})});return i.promise}else{return d.dataUrl(g,!0)}};d.dataUrl=function(h,i){if(!h){return d.emptyPromise(h,h)}if((i&&h.$ngfDataUrl!=null)||(!i&&h.$ngfBlobUrl!=null)){return d.emptyPromise(i?h.$ngfDataUrl:h.$ngfBlobUrl,h)}var j=i?h.$$ngfDataUrlPromise:h.$$ngfBlobUrlPromise;if(j){return j}var g=c.defer();e(function(){if(window.FileReader&&h&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 8")===-1||h.size<20000)&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 9")===-1||h.size<4000000)){var k=window.URL||window.webkitURL;if(k&&k.createObjectURL&&!i){var m;try{m=k.createObjectURL(h)}catch(n){e(function(){h.$ngfBlobUrl="";g.reject()});return}e(function(){h.$ngfBlobUrl=m;if(m){g.resolve(m,h);d.blobUrls=d.blobUrls||[];d.blobUrlsTotalSize=d.blobUrlsTotalSize||0;d.blobUrls.push({url:m,size:h.size});d.blobUrlsTotalSize+=h.size||0;var p=d.defaults.blobUrlsMaxMemory||268435456;var o=d.defaults.blobUrlsMaxQueueSize||200;while((d.blobUrlsTotalSize>p||d.blobUrls.length>o)&&d.blobUrls.length>1){var q=d.blobUrls.splice(0,1)[0];k.revokeObjectURL(q.url);d.blobUrlsTotalSize-=q.size}}})}else{var l=new FileReader();l.onload=function(o){e(function(){h.$ngfDataUrl=o.target.result;g.resolve(o.target.result,h);e(function(){delete h.$ngfDataUrl},1000)})};l.onerror=function(){e(function(){h.$ngfDataUrl="";g.reject()})};l.readAsDataURL(h)}}else{e(function(){h[i?"$ngfDataUrl":"$ngfBlobUrl"]="";g.reject()})}});if(i){j=h.$$ngfDataUrlPromise=g.promise}else{j=h.$$ngfBlobUrlPromise=g.promise}j["finally"](function(){delete h[i?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]});return j};return d}]);function b(c){if(c.tagName.toLowerCase()==="img"){return"image"}if(c.tagName.toLowerCase()==="audio"){return"audio"}if(c.tagName.toLowerCase()==="video"){return"video"}return/./}function a(e,c,k,d,h,f,g,i){function j(l){var m=e.attrGetter("ngfNoObjectUrl",h,k);e.dataUrl(l,m)["finally"](function(){c(function(){var n=(m?l.$ngfDataUrl:l.$ngfBlobUrl)||l.$ngfDataUrl;if(i){d.css("background-image","url('"+(n||"")+"')")}else{d.attr("src",n)}if(n){d.removeClass("ng-hide")}else{d.addClass("ng-hide")}})})}c(function(){var l=k.$watch(h[f],function(n){var m=g;if(f==="ngfThumbnail"){if(!m){m={width:d[0].naturalWidth||d[0].clientWidth,height:d[0].naturalHeight||d[0].clientHeight}}if(m.width===0&&window.getComputedStyle){var o=getComputedStyle(d[0]);if(o.width&&o.width.indexOf("px")>-1&&o.height&&o.height.indexOf("px")>-1){m={width:parseInt(o.width.slice(0,-2)),height:parseInt(o.height.slice(0,-2))}}}}if(angular.isString(n)){d.removeClass("ng-hide");if(i){return d.css("background-image","url('"+n+"')")}else{return d.attr("src",n)}}if(n&&n.type&&n.type.search(b(d[0]))===0&&(!i||n.type.indexOf("image")===0)){if(m&&e.isResizeSupported()){m.resizeIf=function(q,p){return e.attrGetter("ngfResizeIf",h,k,{$width:q,$height:p,$file:n})};e.resize(n,m).then(function(p){j(p)},function(p){throw p})}else{j(n)}}else{d.addClass("ng-hide")}});k.$on("$destroy",function(){l()})})}ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(c,d){return{restrict:"AE",link:function(f,g,e){a(c,d,f,g,e,"ngfSrc",c.attrGetter("ngfResize",e,f),!1)}}}]);ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(c,d){return{restrict:"AE",link:function(f,g,e){a(c,d,f,g,e,"ngfBackground",c.attrGetter("ngfResize",e,f),!0)}}}]);ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(c,d){return{restrict:"AE",link:function(g,h,e){var f=c.attrGetter("ngfSize",e,g);a(c,d,g,h,e,"ngfThumbnail",f,c.attrGetter("ngfAsBackground",e,g))}}}]);ngFileUpload.config(["$compileProvider",function(c){if(c.imgSrcSanitizationWhitelist){c.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}if(c.aHrefSanitizationWhitelist){c.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}}]);ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(d,c){return function(e,g,f){if(angular.isString(e)){return c.trustAsResourceUrl(e)}var h=e&&((g?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl);if(e&&!h){if(!e.$ngfDataUrlFilterInProgress&&angular.isObject(e)){e.$ngfDataUrlFilterInProgress=!0;d.dataUrl(e,g)}return""}if(e){delete e.$ngfDataUrlFilterInProgress}return(e&&h?(f?c.trustAsResourceUrl(h):h):e)||""}}])})();ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(f,a,c){var b=f;function e(l){var k="",m=[];if(l.length>2&&l[0]==="/"&&l[l.length-1]==="/"){k=l.substring(1,l.length-1)}else{var h=l.split(",");if(h.length>1){for(var g=0;g<h.length;g++){var j=e(h[g]);if(j.regexp){k+="("+j.regexp+")";if(g<h.length-1){k+="|"}}else{m=m.concat(j.excludes)}}}else{if(l.indexOf("!")===0){m.push("^((?!"+e(l.substring(1)).regexp+").)*$")}else{if(l.indexOf(".")===0){l="*"+l}k="^"+l.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$";k=k.replace(/\\\*/g,".*").replace(/\\\?/g,".")}}}return{regexp:k,excludes:m}}b.validatePattern=function(i,m){if(!m){return !0}var l=e(m),j=!0;if(l.regexp&&l.regexp.length){var k=new RegExp(l.regexp,"i");j=(i.type!=null&&k.test(i.type))||(i.name!=null&&k.test(i.name))}var g=l.excludes.length;while(g--){var h=new RegExp(l.excludes[g],"i");j=j&&(i.type==null||h.test(i.type))&&(i.name==null||h.test(i.name))}return j};b.ratioToFloat=function(i){var h=i.toString(),g=h.search(/[x:]/i);if(g>-1){h=parseFloat(h.substring(0,g))/parseFloat(h.substring(g+1))}else{h=parseFloat(h)}return h};b.registerModelChangeValidator=function(i,g,h){if(i){i.$formatters.push(function(k){if(i.$dirty){var j=k;if(k&&!angular.isArray(k)){j=[k]}b.validate(j,0,i,g,h).then(function(){b.applyModelValidation(i,j)})}return k})}};function d(h,g){if(g!=null&&!h.$dirty){if(h.$setDirty){h.$setDirty()}else{h.$dirty=!0}}}b.applyModelValidation=function(h,g){d(h,g);angular.forEach(h.$ngfValidations,function(i){h.$setValidity(i.name,i.valid)})};b.getValidationAttr=function(g,k,h,n,j){var l="ngf"+h[0].toUpperCase()+h.substr(1);var m=b.attrGetter(l,g,k,{$file:j});if(m==null){m=b.attrGetter("ngfValidate",g,k,{$file:j});if(m){var i=(n||h).split(".");m=m[i[0]];if(i.length>1){m=m&&m[i[1]]}}}return m};b.validate=function(g,l,k,m,t){k=k||{};k.$ngfValidations=k.$ngfValidations||[];angular.forEach(k.$ngfValidations,function(u){u.valid=!0});var s=function(u,v){return b.attrGetter(u,m,t,v)};var n=(b.attrGetter("ngfIgnoreInvalid",m,t)||"").split(" ");var h=b.attrGetter("ngfRunAllValidations",m,t);if(g==null||g.length===0){return b.emptyPromise({validFiles:g,invalidFiles:[]})}g=g.length===undefined?[g]:g.slice(0);var q=[];function j(u,A,x){if(g){var w=g.length,y=null;while(w--){var v=g[w];if(v){var z=b.getValidationAttr(m,t,u,A,v);if(z!=null){if(!x(v,z,w)){if(n.indexOf(u)===-1){v.$error=u;(v.$errorMessages=(v.$errorMessages||{}))[u]=!0;v.$errorParam=z;if(q.indexOf(v)===-1){q.push(v)}if(!h){g.splice(w,1)}y=!1}else{g.splice(w,1)}}}}}if(y!==null){k.$ngfValidations.push({name:u,valid:y})}}}j("pattern",null,b.validatePattern);j("minSize","size.min",function(u,v){return u.size+0.1>=b.translateScalars(v)});j("maxSize","size.max",function(u,v){return u.size-0.1<=b.translateScalars(v)});var r=0;j("maxTotalSize",null,function(u,v){r+=u.size;if(r>b.translateScalars(v)){g.splice(0,g.length);return !1}return !0});j("validateFn",null,function(u,v){return v===!0||v===null||v===""});if(!g.length){return b.emptyPromise({validFiles:[],invalidFiles:q})}function p(w,B,z,v,y){function A(F,C,E){function D(I){if(I()){if(n.indexOf(w)===-1){C.$error=w;(C.$errorMessages=(C.$errorMessages||{}))[w]=!0;C.$errorParam=E;if(q.indexOf(C)===-1){q.push(C)}if(!h){var H=g.indexOf(C);if(H>-1){g.splice(H,1)}}F.resolve(!1)}else{var G=g.indexOf(C);if(G>-1){g.splice(G,1)}F.resolve(!0)}}else{F.resolve(!0)}}if(E!=null){v(C,E).then(function(G){D(function(){return !y(G,E)})},function(){D(function(){return s("ngfValidateForce",{$file:C})})})}else{F.resolve(!0)}}var x=[b.emptyPromise(!0)];if(g){g=g.length===undefined?[g]:g;angular.forEach(g,function(C){var D=a.defer();x.push(D.promise);if(z&&(C.type==null||C.type.search(z)!==0)){D.resolve(!0);return}if(w==="dimensions"&&b.attrGetter("ngfDimensions",m)!=null){b.imageDimensions(C).then(function(E){A(D,C,s("ngfDimensions",{$file:C,$width:E.width,$height:E.height}))},function(){D.resolve(!1)})}else{if(w==="duration"&&b.attrGetter("ngfDuration",m)!=null){b.mediaDuration(C).then(function(E){A(D,C,s("ngfDuration",{$file:C,$duration:E}))},function(){D.resolve(!1)})}else{A(D,C,b.getValidationAttr(m,t,w,B,C))}}})}var u=a.defer();a.all(x).then(function(C){var E=!0;for(var D=0;D<C.length;D++){if(!C[D]){E=!1;break}}k.$ngfValidations.push({name:w,valid:E});u.resolve(E)});return u.promise}var i=a.defer();var o=[];o.push(p("maxHeight","height.max",/image/,this.imageDimensions,function(v,u){return v.height<=u}));o.push(p("minHeight","height.min",/image/,this.imageDimensions,function(v,u){return v.height>=u}));o.push(p("maxWidth","width.max",/image/,this.imageDimensions,function(v,u){return v.width<=u}));o.push(p("minWidth","width.min",/image/,this.imageDimensions,function(v,u){return v.width>=u}));o.push(p("dimensions",null,/image/,function(u,v){return b.emptyPromise(v)},function(u){return u}));o.push(p("ratio",null,/image/,this.imageDimensions,function(y,x){var v=x.toString().split(","),w=!1;for(var u=0;u<v.length;u++){if(Math.abs((y.width/y.height)-b.ratioToFloat(v[u]))<0.01){w=!0}}return w}));o.push(p("maxRatio","ratio.max",/image/,this.imageDimensions,function(v,u){return(v.width/v.height)-b.ratioToFloat(u)<0.0001}));o.push(p("minRatio","ratio.min",/image/,this.imageDimensions,function(v,u){return(v.width/v.height)-b.ratioToFloat(u)>-0.0001}));o.push(p("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(v,u){return v<=b.translateScalars(u)}));o.push(p("minDuration","duration.min",/audio|video/,this.mediaDuration,function(v,u){return v>=b.translateScalars(u)}));o.push(p("duration",null,/audio|video/,function(u,v){return b.emptyPromise(v)},function(u){return u}));o.push(p("validateAsyncFn",null,null,function(u,v){return v},function(u){return u===!0||u===null||u===""}));a.all(o).then(function(){if(h){for(var v=0;v<g.length;v++){var u=g[v];if(u.$error){g.splice(v--,1)}}}h=!1;j("maxFiles",null,function(x,y,w){return l+w<y});i.resolve({validFiles:g,invalidFiles:q})});return i.promise};b.imageDimensions=function(h){if(h.$ngfWidth&&h.$ngfHeight){var i=a.defer();c(function(){i.resolve({width:h.$ngfWidth,height:h.$ngfHeight})});return i.promise}if(h.$ngfDimensionPromise){return h.$ngfDimensionPromise}var g=a.defer();c(function(){if(h.type.indexOf("image")!==0){g.reject("not image");return}b.dataUrl(h).then(function(m){var j=angular.element("<img>").attr("src",m).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function n(){var q=j[0].naturalWidth||j[0].clientWidth;var p=j[0].naturalHeight||j[0].clientHeight;j.remove();h.$ngfWidth=q;h.$ngfHeight=p;g.resolve({width:q,height:p})}function k(){j.remove();g.reject("load error")}j.on("load",n);j.on("error",k);var l=0;function o(){c(function(){if(j[0].parentNode){if(j[0].clientWidth){n()}else{if(l++>10){k()}else{o()}}}},1000)}o();angular.element(document.getElementsByTagName("body")[0]).append(j)},function(){g.reject("load error")})});h.$ngfDimensionPromise=g.promise;h.$ngfDimensionPromise["finally"](function(){delete h.$ngfDimensionPromise});return h.$ngfDimensionPromise};b.mediaDuration=function(h){if(h.$ngfDuration){var i=a.defer();c(function(){i.resolve(h.$ngfDuration)});return i.promise}if(h.$ngfDurationPromise){return h.$ngfDurationPromise}var g=a.defer();c(function(){if(h.type.indexOf("audio")!==0&&h.type.indexOf("video")!==0){g.reject("not media");return}b.dataUrl(h).then(function(n){var l=angular.element(h.type.indexOf("audio")===0?"<audio>":"<video>").attr("src",n).css("visibility","none").css("position","fixed");function o(){var p=l[0].duration;h.$ngfDuration=p;l.remove();g.resolve(p)}function j(){l.remove();g.reject("load error")}l.on("loadedmetadata",o);l.on("error",j);var m=0;function k(){c(function(){if(l[0].parentNode){if(l[0].duration){o()}else{if(m>10){j()}else{k()}}}},1000)}k();angular.element(document.body).append(l)},function(){g.reject("load error")})});h.$ngfDurationPromise=g.promise;h.$ngfDurationPromise["finally"](function(){delete h.$ngfDurationPromise});return h.$ngfDurationPromise};return b}]);ngFileUpload.service("UploadResize",["UploadValidate","$q",function(d,a){var c=d;var e=function(i,f,k,j,h){var g=h?Math.max(k/i,j/f):Math.min(k/i,j/f);return{width:i*g,height:f*g,marginX:i*g-k,marginY:f*g-j}};var b=function(n,f,o,m,k,h,g,j){var p=a.defer();var l=document.createElement("canvas");var i=document.createElement("img");i.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000");document.body.appendChild(i);i.onload=function(){var s=i.width,q=i.height;i.parentNode.removeChild(i);if(j!=null&&j(s,q)===!1){p.reject("resizeIf");return}try{if(h){var w=c.ratioToFloat(h);var r=s/q;if(r<w){f=s;o=f/w}else{o=q;f=o*w}}if(!f){f=s}if(!o){o=q}var u=e(s,q,f,o,g);l.width=Math.min(u.width,f);l.height=Math.min(u.height,o);var t=l.getContext("2d");t.drawImage(i,Math.min(0,-u.marginX/2),Math.min(0,-u.marginY/2),u.width,u.height);p.resolve(l.toDataURL(k||"image/WebP",m||0.934))}catch(v){p.reject(v)}};i.onerror=function(){i.parentNode.removeChild(i);p.reject()};i.src=n;return p.promise};c.dataUrltoBlob=function(m,h,k){var l=m.split(","),g=l[0].match(/:(.*?);/)[1],i=atob(l[1]),j=i.length,o=new Uint8Array(j);while(j--){o[j]=i.charCodeAt(j)}var f=new window.Blob([o],{type:g});f.name=h;f.$ngfOrigSize=k;return f};c.isResizeSupported=function(){var f=document.createElement("canvas");return window.atob&&f.getContext&&f.getContext("2d")&&window.Blob};if(c.isResizeSupported()){Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(f){this.$ngfName=f},configurable:!0})}c.resize=function(h,g){if(h.type.indexOf("image")!==0){return c.emptyPromise(h)}var f=a.defer();c.dataUrl(h,!0).then(function(i){b(i,g.width,g.height,g.quality,g.type||h.type,g.ratio,g.centerCrop,g.resizeIf).then(function(l){if(h.type==="image/jpeg"&&g.restoreExif!==!1){try{l=c.restoreExif(i,l)}catch(k){setTimeout(function(){throw k},1)}}try{var j=c.dataUrltoBlob(l,h.name,h.size);f.resolve(j)}catch(k){f.reject(k)}},function(j){if(j==="resizeIf"){f.resolve(h)}f.reject(j)})},function(i){f.reject(i)});return f.promise};return c}]);(function(){ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(f,e,g,d,h,c){return{restrict:"AEC",require:"?ngModel",link:function(j,k,i,l){b(j,k,i,l,f,e,g,d,h,c)}}}]);ngFileUpload.directive("ngfNoFileDrop",function(){return function(c,d){if(a()){d.css("display","none")}}});ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,d,c){return function(h,i,f){if(a()){var g=e(c.attrGetter("ngfDropAvailable",f));d(function(){g(h);if(g.assign){g.assign(h,!0)}})}}}]);function b(d,s,n,i,e,w,k,t,x,r){var m=a();var g=function(y,z,A){return t.attrGetter(y,n,z,A)};if(g("dropAvailable")){w(function(){if(d[g("dropAvailable")]){d[g("dropAvailable")].value=m}else{d[g("dropAvailable")]=m}})}if(!m){if(g("ngfHideOnDropNotAvailable",d)===!0){s.css("display","none")}return}function j(){return s.attr("disabled")||g("ngfDropDisabled",d)}if(g("ngfSelect")==null){t.registerModelChangeValidator(i,n,d)}var v=null;var h=e(g("ngfStopPropagation"));var f=1;var p;s[0].addEventListener("dragover",function(z){if(j()||!t.shouldUpdateOn("drop",n,d)){return}z.preventDefault();if(h(d)){z.stopPropagation()}if(navigator.userAgent.indexOf("Chrome")>-1){var y=z.dataTransfer.effectAllowed;z.dataTransfer.dropEffect=("move"===y||"linkMove"===y)?"move":"copy"}w.cancel(v);if(!p){p="C";l(d,n,z,function(A){p=A;s.addClass(p);g("ngfDrag",d,{$isDragging:!0,$class:p,$event:z})})}},!1);s[0].addEventListener("dragenter",function(y){if(j()||!t.shouldUpdateOn("drop",n,d)){return}y.preventDefault();if(h(d)){y.stopPropagation()}},!1);s[0].addEventListener("dragleave",function(y){if(j()||!t.shouldUpdateOn("drop",n,d)){return}y.preventDefault();if(h(d)){y.stopPropagation()}v=w(function(){if(p){s.removeClass(p)}p=null;g("ngfDrag",d,{$isDragging:!1,$event:y})},f||100)},!1);s[0].addEventListener("drop",function(y){if(j()||!t.shouldUpdateOn("drop",n,d)){return}y.preventDefault();if(h(d)){y.stopPropagation()}if(p){s.removeClass(p)}p=null;q(y.dataTransfer,y,"dropUrl")},!1);s[0].addEventListener("paste",function(y){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&g("ngfEnableFirefoxPaste",d)){y.preventDefault()}if(j()||!t.shouldUpdateOn("paste",n,d)){return}q(y.clipboardData||y.originalEvent.clipboardData,y,"pasteUrl")},!1);if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&g("ngfEnableFirefoxPaste",d)){s.attr("contenteditable",!0);s.on("keypress",function(y){if(!y.metaKey&&!y.ctrlKey){y.preventDefault()}})}function q(B,y,z){if(!B){return}var A;try{A=B&&B.getData&&B.getData("text/html")}catch(C){}u(B.items,B.files,g("ngfAllowDir",d)!==!1,g("multiple")||g("ngfMultiple",d)).then(function(D){if(D.length){c(D,y)}else{o(z,A).then(function(E){c(E,y)})}})}function c(z,y){t.updateModel(i,n,d,g("ngfChange")||g("ngfDrop"),z,y)}function o(B,z){if(!t.shouldUpdateOn(B,n,d)||typeof z!=="string"){return t.rejectPromise([])}var C=[];z.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(E,G,F){C.push(F)});var y=[],A=[];if(C.length){angular.forEach(C,function(E){y.push(t.urlToBlob(E).then(function(F){A.push(F)}))});var D=r.defer();r.all(y).then(function(){D.resolve(A)},function(E){D.reject(E)});return D.promise}return t.emptyPromise()}function l(G,A,E,F){var y=g("ngfDragOverClass",G,{$event:E}),D="dragover";if(angular.isString(y)){D=y}else{if(y){if(y.delay){f=y.delay}if(y.accept||y.reject){var C=E.dataTransfer.items;if(C==null||!C.length){D=y.accept}else{var B=y.pattern||g("ngfPattern",G,{$event:E});var z=C.length;while(z--){if(!t.validatePattern(C[z],B)){D=y.reject;break}else{D=y.accept}}}}}}F(D)}function u(G,N,L,O){var M=t.getValidationAttr(n,d,"maxFiles");if(M==null){M=Number.MAX_VALUE}var F=t.getValidationAttr(n,d,"maxTotalSize");if(F==null){F=Number.MAX_VALUE}var H=g("ngfIncludeDir",d);var z=[],K=0;function D(U,V){var W=r.defer();if(U!=null){if(U.isDirectory){var T=[t.emptyPromise()];if(H){var S={type:"directory"};S.name=S.path=(V||"")+U.name;z.push(S)}var R=U.createReader();var P=[];var Q=function(){R.readEntries(function(X){try{if(!X.length){angular.forEach(P.slice(0),function(Z){if(z.length<=M&&K<=F){T.push(D(Z,(V?V:"")+U.name+"/"))}});r.all(T).then(function(){W.resolve()},function(Z){W.reject(Z)})}else{P=P.concat(Array.prototype.slice.call(X||[],0));Q()}}catch(Y){W.reject(Y)}},function(X){W.reject(X)})};Q()}else{U.file(function(X){try{X.path=(V?V:"")+X.name;if(H){X=t.rename(X,X.path)}z.push(X);K+=X.size;W.resolve()}catch(Y){W.reject(Y)}},function(X){W.reject(X)})}}return W.promise}var I=[t.emptyPromise()];if(G&&G.length>0&&k.location.protocol!=="file:"){for(var C=0;C<G.length;C++){if(G[C].webkitGetAsEntry&&G[C].webkitGetAsEntry()&&G[C].webkitGetAsEntry().isDirectory){var J=G[C].webkitGetAsEntry();if(J.isDirectory&&!L){continue}if(J!=null){I.push(D(J))}}else{var E=G[C].getAsFile();if(E!=null){z.push(E);K+=E.size}}if(z.length>M||K>F||(!O&&z.length>0)){break}}}else{if(N!=null){for(var B=0;B<N.length;B++){var A=N.item(B);if(A.type||A.size>0){z.push(A);K+=A.size}if(z.length>M||K>F||(!O&&z.length>0)){break}}}}var y=r.defer();r.all(I).then(function(){if(!O&&!H&&z.length){var P=0;while(z[P]&&z[P].type==="directory"){P++}y.resolve([z[P]])}else{y.resolve(z)}},function(P){y.reject(P)});return y.promise}}function a(){var c=document.createElement("div");return("draggable" in c)&&("ondrop" in c)&&!/Edge\/12./i.test(navigator.userAgent)}})();ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,c){var d=e;d.isExifSupported=function(){return window.FileReader&&new FileReader().readAsArrayBuffer&&d.isResizeSupported()};function b(g,h,i,f){switch(h){case 2:return g.transform(-1,0,0,1,i,0);case 3:return g.transform(-1,0,0,-1,i,f);case 4:return g.transform(1,0,0,-1,0,f);case 5:return g.transform(0,1,1,0,0,0);case 6:return g.transform(0,1,-1,0,f,0);case 7:return g.transform(0,-1,-1,0,f,i);case 8:return g.transform(0,-1,1,0,0,i)}}d.readOrientation=function(h){var i=c.defer();var f=new FileReader();var g=h.slice?h.slice(0,64*1024):h;f.readAsArrayBuffer(g);f.onerror=function(j){return i.reject(j)};f.onload=function(o){var s={orientation:1};var p=new DataView(this.result);if(p.getUint16(0,!1)!==65496){return i.resolve(s)}var k=p.byteLength,l=2;while(l<k){var n=p.getUint16(l,!1);l+=2;if(n===65505){if(p.getUint32(l+=2,!1)!==1165519206){return i.resolve(s)}var r=p.getUint16(l+=6,!1)===18761;l+=p.getUint32(l+4,r);var q=p.getUint16(l,r);l+=2;for(var m=0;m<q;m++){if(p.getUint16(l+(m*12),r)===274){var j=p.getUint16(l+(m*12)+8,r);if(j>=2&&j<=8){p.setUint16(l+(m*12)+8,1,r);s.fixedArrayBuffer=o.target.result}s.orientation=j;return i.resolve(s)}}}else{if((n&65280)!==65280){break}else{l+=p.getUint16(l,!1)}}}return i.resolve(s)};return i.promise};function a(h){var k="";var g=new Uint8Array(h);var f=g.byteLength;for(var j=0;j<f;j++){k+=String.fromCharCode(g[j])}return window.btoa(k)}d.applyExifRotation=function(g){if(g.type.indexOf("image/jpeg")!==0){return d.emptyPromise(g)}var f=c.defer();d.readOrientation(g).then(function(h){if(h.orientation<2||h.orientation>8){return f.resolve(g)}d.dataUrl(g,!0).then(function(k){var j=document.createElement("canvas");var i=document.createElement("img");i.onload=function(){try{j.width=h.orientation>4?i.height:i.width;j.height=h.orientation>4?i.width:i.height;var l=j.getContext("2d");b(l,h.orientation,i.width,i.height);l.drawImage(i,0,0);var o=j.toDataURL(g.type||"image/WebP",0.934);o=d.restoreExif(a(h.fixedArrayBuffer),o);var m=d.dataUrltoBlob(o,g.name);f.resolve(m)}catch(n){return f.reject(n)}};i.onerror=function(){f.reject()};i.src=k},function(i){f.reject(i)})},function(h){f.reject(h)});return f.promise};d.restoreExif=function(h,g){var f={};f.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode64=function(l){var j="",s,q,o="",r,p,n,m="",k=0;do{s=l[k++];q=l[k++];o=l[k++];r=s>>2;p=((s&3)<<4)|(q>>4);n=((q&15)<<2)|(o>>6);m=o&63;if(isNaN(q)){n=m=64}else{if(isNaN(o)){m=64}}j=j+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(p)+this.KEY_STR.charAt(n)+this.KEY_STR.charAt(m);s=q=o="";r=p=n=m=""}while(k<l.length);return j};f.restore=function(i,m){if(i.match("data:image/jpeg;base64,")){i=i.replace("data:image/jpeg;base64,","")}var l=this.decode64(i);var j=this.slice2Segments(l);var k=this.exifManipulation(m,j);return"data:image/jpeg;base64,"+this.encode64(k)};f.exifManipulation=function(l,k){var i=this.getExifArray(k),j=this.insertExif(l,i);return new Uint8Array(j)};f.getExifArray=function(k){var j;for(var i=0;i<k.length;i++){j=k[i];if(j[0]===255&j[1]===225){return j}}return[]};f.insertExif=function(p,i){var o=p.replace("data:image/jpeg;base64,",""),k=this.decode64(o),j=k.indexOf(255,3),m=k.slice(0,j),l=k.slice(j),n=m;n=n.concat(i);n=n.concat(l);return n};f.slice2Segments=function(j){var m=0,k=[];while(1){if(j[m]===255&j[m+1]===218){break}if(j[m]===255&j[m+1]===216){m+=2}else{var n=j[m+2]*256+j[m+3],l=m+n+2,i=j.slice(m,l);k.push(i);m=l}if(m>j.length){break}}return k};f.decode64=function(m){var t,r,p="",s,q,o,n="",l=0,k=[];var j=/[^A-Za-z0-9\+\/\=]/g;if(j.exec(m)){console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, , "/',and "="\nExpect errors in decoding.')}m=m.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{s=this.KEY_STR.indexOf(m.charAt(l++));q=this.KEY_STR.indexOf(m.charAt(l++));o=this.KEY_STR.indexOf(m.charAt(l++));n=this.KEY_STR.indexOf(m.charAt(l++));t=(s<<2)|(q>>4);r=((q&15)<<4)|(o>>2);p=((o&3)<<6)|n;k.push(t);if(o!==64){k.push(r)}if(n!==64){k.push(p)}t=r=p="";s=q=o=n=""}while(l<m.length);return k};return f.restore(h,g)};return d}]);