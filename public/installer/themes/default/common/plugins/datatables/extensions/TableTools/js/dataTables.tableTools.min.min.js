/*! TableTools 2.2.4
 * 2009-2015 SpryMedia Ltd - datatables.net/license
 *
 * ZeroClipboard 1.0.4
 * Author: Joseph Huckaby - MIT licensed
 */
var TableTools;(function(h,f,g){var e=function(a,b){var c={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(d){if(typeof(d)=="string"){d=f.getElementById(d)}if(!d.addClass){d.hide=function(){this.style.display="none"};d.show=function(){this.style.display=""};d.addClass=function(j){this.removeClass(j);this.className+=" "+j};d.removeClass=function(j){this.className=this.className.replace(new RegExp("\\s*"+j+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")};d.hasClass=function(j){return !!this.className.match(new RegExp("\\s*"+j+"\\s*"))}}return d},setMoviePath:function(d){this.moviePath=d},dispatch:function(d,m,l){var n=this.clients[d];if(n){n.receiveEvent(m,l)}},register:function(d,j){this.clients[d]=j},getDOMObjectPosition:function(d){var j={left:0,top:0,width:d.width?d.width:d.offsetWidth,height:d.height?d.height:d.offsetHeight};if(d.style.width!==""){j.width=d.style.width.replace("px","")}if(d.style.height!==""){j.height=d.style.height.replace("px","")}while(d){j.left+=d.offsetLeft;j.top+=d.offsetTop;d=d.offsetParent}return j},Client:function(d){this.handlers={};this.id=c.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;c.register(this.id,this);if(d){this.glue(d)}}};c.Client.prototype={id:0,ready:false,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:true,cssEffects:true,handlers:null,sized:false,glue:function(n,m){this.domElement=c.$(n);var d=99;if(this.domElement.style.zIndex){d=parseInt(this.domElement.style.zIndex,10)+1}var o=c.getDOMObjectPosition(this.domElement);this.div=f.createElement("div");var p=this.div.style;p.position="absolute";p.left="0px";p.top="0px";p.width=(o.width)+"px";p.height=o.height+"px";p.zIndex=d;if(typeof m!="undefined"&&m!==""){this.div.title=m}if(o.width!==0&&o.height!==0){this.sized=true}if(this.domElement){this.domElement.appendChild(this.div);this.div.innerHTML=this.getHTML(o.width,o.height).replace(/&/g,"&amp;")}},positionElement:function(){var d=c.getDOMObjectPosition(this.domElement);var k=this.div.style;k.position="absolute";k.width=d.width+"px";k.height=d.height+"px";if(d.width!==0&&d.height!==0){this.sized=true}else{return}var l=this.div.childNodes[0];l.width=d.width;l.height=d.height},getHTML:function(m,p){var n="";var o="id="+this.id+"&width="+m+"&height="+p;if(navigator.userAgent.match(/MSIE/)){var d=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+d+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+m+'" height="'+p+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+c.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+o+'"/><param name="wmode" value="transparent"/></object>'}else{n+='<embed id="'+this.movieId+'" src="'+c.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+m+'" height="'+p+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+o+'" wmode="transparent" />'}return n},hide:function(){if(this.div){this.div.style.left="-2000px"}},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var j=f.getElementsByTagName("body")[0];try{j.removeChild(this.div)}catch(d){}this.domElement=null;this.div=null}},reposition:function(d){if(d){this.domElement=c.$(d);if(!this.domElement){this.hide()}}if(this.domElement&&this.div){var k=c.getDOMObjectPosition(this.domElement);var l=this.div.style;l.left=""+k.left+"px";l.top=""+k.top+"px"}},clearText:function(){this.clipText="";if(this.ready){this.movie.clearText()}},appendText:function(d){this.clipText+=d;if(this.ready){this.movie.appendText(d)}},setText:function(d){this.clipText=d;if(this.ready){this.movie.setText(d)}},setCharSet:function(d){this.charSet=d;if(this.ready){this.movie.setCharSet(d)}},setBomInc:function(d){this.incBom=d;if(this.ready){this.movie.setBomInc(d)}},setFileName:function(d){this.fileName=d;if(this.ready){this.movie.setFileName(d)}},setAction:function(d){this.action=d;if(this.ready){this.movie.setAction(d)}},addEventListener:function(j,d){j=j.toString().toLowerCase().replace(/^on/,"");if(!this.handlers[j]){this.handlers[j]=[]}this.handlers[j].push(d)},setHandCursor:function(d){this.handCursorEnabled=d;if(this.ready){this.movie.setHandCursor(d)}},setCSSEffects:function(d){this.cssEffects=!!d},receiveEvent:function(o,n){var p;o=o.toString().toLowerCase().replace(/^on/,"");switch(o){case"load":this.movie=f.getElementById(this.movieId);if(!this.movie){p=this;setTimeout(function(){p.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){p=this;setTimeout(function(){p.receiveEvent("load",null)},100);this.ready=true;return}this.ready=true;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":if(this.domElement&&this.cssEffects){if(this.recoverActive){this.domElement.addClass("active")}}break;case"mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass("active")){this.domElement.removeClass("active");this.recoverActive=true}}break;case"mousedown":if(this.domElement&&this.cssEffects){this.domElement.addClass("active")}break;case"mouseup":if(this.domElement&&this.cssEffects){this.domElement.removeClass("active");this.recoverActive=false}break}if(this.handlers[o]){for(var q=0,r=this.handlers[o].length;q<r;q++){var d=this.handlers[o][q];if(typeof(d)=="function"){d(this,n)}else{if((typeof(d)=="object")&&(d.length==2)){d[0][d[1]](this,n)}else{if(typeof(d)=="string"){h[d](this,n)}}}}}}};h.ZeroClipboard_TableTools=c;(function(d,k,l){TableTools=function(n,i){if(!this instanceof TableTools){alert("Warning: TableTools must be initialised with the keyword 'new'")}var j=d.fn.dataTable.Api?new d.fn.dataTable.Api(n).settings()[0]:n.fnSettings();this.s={that:this,dt:j,print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:false,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:false,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}};this.classes=d.extend(true,{},TableTools.classes);if(this.s.dt.bJUI){d.extend(true,this.classes,TableTools.classes_themeroller)}this.fnSettings=function(){return this.s};if(typeof i=="undefined"){i={}}TableTools._aInstances.push(this);this._fnConstruct(i);return this};TableTools.prototype={fnGetSelected:function(i){var j=[],r=this.s.dt.aoData,s=this.s.dt.aiDisplay,t,q;if(i){for(t=0,q=s.length;t<q;t++){if(r[s[t]]._DTTT_selected){j.push(r[s[t]].nTr)}}}else{for(t=0,q=r.length;t<q;t++){if(r[t]._DTTT_selected){j.push(r[t].nTr)}}}return j},fnGetSelectedData:function(){var j=[];var p=this.s.dt.aoData;var i,o;for(i=0,o=p.length;i<o;i++){if(p[i]._DTTT_selected){j.push(this.s.dt.oInstance.fnGetData(i))}}return j},fnGetSelectedIndexes:function(i){var j=[],r=this.s.dt.aoData,s=this.s.dt.aiDisplay,t,q;if(i){for(t=0,q=s.length;t<q;t++){if(r[s[t]]._DTTT_selected){j.push(s[t])}}}else{for(t=0,q=r.length;t<q;t++){if(r[t]._DTTT_selected){j.push(t)}}}return j},fnIsSelected:function(i){var j=this.s.dt.oInstance.fnGetPosition(i);return(this.s.dt.aoData[j]._DTTT_selected===true)?true:false},fnSelectAll:function(i){this._fnRowSelect(i?this.s.dt.aiDisplay:this.s.dt.aoData)},fnSelectNone:function(i){this._fnRowDeselect(this.fnGetSelectedIndexes(i))},fnSelect:function(i){if(this.s.select.type=="single"){this.fnSelectNone();this._fnRowSelect(i)}else{this._fnRowSelect(i)}},fnDeselect:function(i){this._fnRowDeselect(i)},fnGetTitle:function(i){var n="";if(typeof i.sTitle!="undefined"&&i.sTitle!==""){n=i.sTitle}else{var j=l.getElementsByTagName("title");if(j.length>0){n=j[0].innerHTML}}if("\u00A1".toString().length<4){return n.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"")}else{return n.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")}},fnCalcColRatios:function(v){var w=this.s.dt.aoColumns,j=this._fnColumnTargets(v.mColumns),x=[],u=0,t=0,i,s;for(i=0,s=j.length;i<s;i++){if(j[i]){u=w[i].nTh.offsetWidth;t+=u;x.push(u)}}for(i=0,s=x.length;i<s;i++){x[i]=x[i]/t}return x.join("\t")},fnGetTableData:function(i){if(this.s.dt){return this._fnGetDataTablesData(i)}},fnSetText:function(j,i){this._fnFlashSetText(j,i)},fnResizeButtons:function(){for(var j in c.clients){if(j){var i=c.clients[j];if(typeof i.domElement!="undefined"&&i.domElement.parentNode){i.positionElement()}}}},fnResizeRequired:function(){for(var j in c.clients){if(j){var i=c.clients[j];if(typeof i.domElement!="undefined"&&i.domElement.parentNode==this.dom.container&&i.sized===false){return true}}}return false},fnPrint:function(j,i){if(i===g){i={}}if(j===g||j){this._fnPrintStart(i)}else{this._fnPrintEnd()}},fnInfo:function(n,i){var j=d("<div/>").addClass(this.classes.print.info).html(n).appendTo("body");setTimeout(function(){j.fadeOut("normal",function(){j.remove()})},i)},fnContainer:function(){return this.dom.container},_fnConstruct:function(i){var j=this;this._fnCustomiseSettings(i);this.dom.container=l.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;if(this.s.select.type!="none"){this._fnRowSelectConfig()}this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){d(j.s.dt.nTBody).off("click.DTTT_Select",j.s.custom.sRowSelector).off("mousedown.DTTT_Select","tr").off("mouseup.DTTT_Select","tr");d(j.dom.container).empty();var n=d.inArray(j,TableTools._aInstances);if(n!==-1){TableTools._aInstances.splice(n,1)}}})},_fnCustomiseSettings:function(i){if(typeof this.s.dt._TableToolsInit=="undefined"){this.s.master=true;this.s.dt._TableToolsInit=true}this.dom.table=this.s.dt.nTable;this.s.custom=d.extend({},TableTools.DEFAULTS,i);this.s.swfPath=this.s.custom.sSwfPath;if(typeof c!="undefined"){c.moviePath=this.s.swfPath}this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;if(this.s.custom.sSelectedClass){this.classes.select.row=this.s.custom.sSelectedClass}this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(u,s){var j;for(var v=0,o=u.length;v<o;v++){if(typeof u[v]=="string"){if(typeof TableTools.BUTTONS[u[v]]=="undefined"){alert("TableTools: Warning - unknown button type: "+u[v]);continue}j=d.extend({},TableTools.BUTTONS[u[v]],true)}else{if(typeof TableTools.BUTTONS[u[v].sExtends]=="undefined"){alert("TableTools: Warning - unknown button type: "+u[v].sExtends);continue}var t=d.extend({},TableTools.BUTTONS[u[v].sExtends],true);j=d.extend(t,u[v],true)}var i=this._fnCreateButton(j,d(s).hasClass(this.classes.collection.container));if(i){s.appendChild(i)}}},_fnCreateButton:function(i,n){var j=this._fnButtonBase(i,n);if(i.sAction.match(/flash/)){if(!this._fnHasFlash()){return false}this._fnFlashConfig(j,i)}else{if(i.sAction=="text"){this._fnTextConfig(j,i)}else{if(i.sAction=="div"){this._fnTextConfig(j,i)}else{if(i.sAction=="collection"){this._fnTextConfig(j,i);this._fnCollectionConfig(j,i)}}}}if(this.s.dt.iTabIndex!==-1){d(j).attr("tabindex",this.s.dt.iTabIndex).attr("aria-controls",this.s.dt.sTableId).on("keyup.DTTT",function(m){if(m.keyCode===13){m.stopPropagation();d(this).trigger("click")}}).on("mousedown.DTTT",function(m){if(!i.sAction.match(/flash/)){m.preventDefault()}})}return j},_fnButtonBase:function(u,j){var i,w,t;if(j){i=u.sTag&&u.sTag!=="default"?u.sTag:this.s.tags.collection.button;w=u.sLinerTag&&u.sLinerTag!=="default"?u.sLiner:this.s.tags.collection.liner;t=this.classes.collection.buttons.normal}else{i=u.sTag&&u.sTag!=="default"?u.sTag:this.s.tags.button;w=u.sLinerTag&&u.sLinerTag!=="default"?u.sLiner:this.s.tags.liner;t=this.classes.buttons.normal}var x=l.createElement(i),o=l.createElement(w),v=this._fnGetMasterSettings();x.className=t+" "+u.sButtonClass;x.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+v.buttonCounter);x.appendChild(o);o.innerHTML=u.sButtonText;v.buttonCounter++;return x},_fnGetMasterSettings:function(){if(this.s.master){return this.s}else{var i=TableTools._aInstances;for(var j=0,n=i.length;j<n;j++){if(this.dom.table==i[j].s.dt.nTable){return i[j].s}}}},_fnCollectionConfig:function(n,j){var i=l.createElement(this.s.tags.collection.container);i.style.display="none";i.className=this.classes.collection.container;j._collection=i;l.body.appendChild(i);this._fnButtonDefinations(j.aButtons,i)},_fnCollectionShow:function(z,i){var H=this,F=d(z).offset(),y=i._collection,C=F.left,D=F.top+d(z).outerHeight(),I=d(k).height(),j=d(l).height(),J=d(k).width(),G=d(l).width();y.style.position="absolute";y.style.left=C+"px";y.style.top=D+"px";y.style.display="block";d(y).css("opacity",0);var B=l.createElement("div");B.style.position="absolute";B.style.left="0px";B.style.top="0px";B.style.height=((I>j)?I:j)+"px";B.style.width=((J>G)?J:G)+"px";B.className=this.classes.collection.background;d(B).css("opacity",0);l.body.appendChild(B);l.body.appendChild(y);var A=d(y).outerWidth();var E=d(y).outerHeight();if(C+A>G){y.style.left=(G-A)+"px"}if(D+E>j){y.style.top=(D-E-d(z).outerHeight())+"px"}this.dom.collection.collection=y;this.dom.collection.background=B;setTimeout(function(){d(y).animate({opacity:1},500);d(B).animate({opacity:0.25},500)},10);this.fnResizeButtons();d(B).click(function(){H._fnCollectionHide.call(H,null,null)})},_fnCollectionHide:function(j,i){if(i!==null&&i.sExtends=="collection"){return}if(this.dom.collection.collection!==null){d(this.dom.collection.collection).animate({opacity:0},500,function(n){this.style.display="none"});d(this.dom.collection.background).animate({opacity:0},500,function(n){this.parentNode.removeChild(this)});this.dom.collection.collection=null;this.dom.collection.background=null}},_fnRowSelectConfig:function(){if(this.s.master){var r=this,j,p,i=this.s.dt,q=this.s.dt.aoOpenRows;d(i.nTable).addClass(this.classes.select.table);if(this.s.select.type==="os"){d(i.nTBody).on("mousedown.DTTT_Select","tr",function(m){if(m.shiftKey){d(i.nTBody).css("-moz-user-select","none").one("selectstart.DTTT_Select","tr",function(){return false})}});d(i.nTBody).on("mouseup.DTTT_Select","tr",function(m){d(i.nTBody).css("-moz-user-select","")})}d(i.nTBody).on("click.DTTT_Select",this.s.custom.sRowSelector,function(o){var n=this.nodeName.toLowerCase()==="tr"?this:d(this).parents("tr")[0];var B=r.s.select;var m=r.s.dt.oInstance.fnGetPosition(n);if(n.parentNode!=i.nTBody){return}if(i.oInstance.fnGetData(n)===null){return}if(B.type=="os"){if(o.ctrlKey||o.metaKey){if(r.fnIsSelected(n)){r._fnRowDeselect(n,o)}else{r._fnRowSelect(n,o)}}else{if(o.shiftKey){var y=r.s.dt.aiDisplay.slice();var z=d.inArray(B.lastRow,y);var A=d.inArray(m,y);if(r.fnGetSelected().length===0||z===-1){y.splice(d.inArray(m,y)+1,y.length)}else{if(z>A){var x=A;A=z;z=x}y.splice(A+1,y.length);y.splice(0,z)}if(!r.fnIsSelected(n)){r._fnRowSelect(y,o)}else{y.splice(d.inArray(m,y),1);r._fnRowDeselect(y,o)}}else{if(r.fnIsSelected(n)&&r.fnGetSelected().length===1){r._fnRowDeselect(n,o)}else{r.fnSelectNone();r._fnRowSelect(n,o)}}}}else{if(r.fnIsSelected(n)){r._fnRowDeselect(n,o)}else{if(B.type=="single"){r.fnSelectNone();r._fnRowSelect(n,o)}else{if(B.type=="multi"){r._fnRowSelect(n,o)}}}}B.lastRow=m});i.oApi._fnCallbackReg(i,"aoRowCreatedCallback",function(m,n,o){if(i.aoData[o]._DTTT_selected){d(m).addClass(r.classes.select.row)}},"TableTools-SelectAll")}},_fnRowSelect:function(t,u){var w=this,v=this._fnSelectData(t),i=v.length===0?null:v[0].nTr,j=[],x,s;for(x=0,s=v.length;x<s;x++){if(v[x].nTr){j.push(v[x].nTr)}}if(this.s.select.preRowSelect!==null&&!this.s.select.preRowSelect.call(this,u,j,true)){return}for(x=0,s=v.length;x<s;x++){v[x]._DTTT_selected=true;if(v[x].nTr){d(v[x].nTr).addClass(w.classes.select.row)}}if(this.s.select.postSelected!==null){this.s.select.postSelected.call(this,j)}TableTools._fnEventDispatch(this,"select",j,true)},_fnRowDeselect:function(t,u){var x=this,w=this._fnSelectData(t),j=w.length===0?null:w[0].nTr,v=[],i,s;for(i=0,s=w.length;i<s;i++){if(w[i].nTr){v.push(w[i].nTr)}}if(this.s.select.preRowSelect!==null&&!this.s.select.preRowSelect.call(this,u,v,false)){return}for(i=0,s=w.length;i<s;i++){w[i]._DTTT_selected=false;if(w[i].nTr){d(w[i].nTr).removeClass(x.classes.select.row)}}if(this.s.select.postDeselected!==null){this.s.select.postDeselected.call(this,v)}TableTools._fnEventDispatch(this,"select",v,false)},_fnSelectData:function(r){var j=[],q,i,p;if(r.nodeName){q=this.s.dt.oInstance.fnGetPosition(r);j.push(this.s.dt.aoData[q])}else{if(typeof r.length!=="undefined"){for(i=0,p=r.length;i<p;i++){if(r[i].nodeName){q=this.s.dt.oInstance.fnGetPosition(r[i]);j.push(this.s.dt.aoData[q])}else{if(typeof r[i]==="number"){j.push(this.s.dt.aoData[r[i]])}else{j.push(r[i])}}}return j}else{if(typeof r==="number"){j.push(this.s.dt.aoData[r])}else{j.push(r)}}}return j},_fnTextConfig:function(n,i){var j=this;if(i.fnInit!==null){i.fnInit.call(this,n,i)}if(i.sToolTip!==""){n.title=i.sToolTip}d(n).hover(function(){if(i.fnMouseover!==null){i.fnMouseover.call(this,n,i,null)}},function(){if(i.fnMouseout!==null){i.fnMouseout.call(this,n,i,null)}});if(i.fnSelect!==null){TableTools._fnEventListen(this,"select",function(m){i.fnSelect.call(j,n,i,m)})}d(n).click(function(m){if(i.fnClick!==null){i.fnClick.call(j,n,i,null,m)}if(i.fnComplete!==null){i.fnComplete.call(j,n,i,null,null)}j._fnCollectionHide(n,i)})},_fnHasFlash:function(){try{var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(j){return true}}catch(i){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==g&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return true}}return false},_fnFlashConfig:function(j,p){var i=this;var o=new c.Client();if(p.fnInit!==null){p.fnInit.call(this,j,p)}o.setHandCursor(true);if(p.sAction=="flash_save"){o.setAction("save");o.setCharSet((p.sCharSet=="utf16le")?"UTF16LE":"UTF8");o.setBomInc(p.bBomInc);o.setFileName(p.sFileName.replace("*",this.fnGetTitle(p)))}else{if(p.sAction=="flash_pdf"){o.setAction("pdf");o.setFileName(p.sFileName.replace("*",this.fnGetTitle(p)))}else{o.setAction("copy")}}o.addEventListener("mouseOver",function(m){if(p.fnMouseover!==null){p.fnMouseover.call(i,j,p,o)}});o.addEventListener("mouseOut",function(m){if(p.fnMouseout!==null){p.fnMouseout.call(i,j,p,o)}});o.addEventListener("mouseDown",function(m){if(p.fnClick!==null){p.fnClick.call(i,j,p,o)}});o.addEventListener("complete",function(n,m){if(p.fnComplete!==null){p.fnComplete.call(i,j,p,o,m)}i._fnCollectionHide(j,p)});if(p.fnSelect!==null){TableTools._fnEventListen(this,"select",function(m){p.fnSelect.call(i,j,p,m)})}this._fnFlashGlue(o,j,p.sToolTip)},_fnFlashGlue:function(p,i,r){var j=this;var q=i.getAttribute("id");if(l.getElementById(q)){p.glue(i,r)}else{setTimeout(function(){j._fnFlashGlue(p,i,r)},100)}},_fnFlashSetText:function(q,j){var r=this._fnChunkData(j,8192);q.clearText();for(var i=0,p=r.length;i<p;i++){q.appendText(r[i])}},_fnColumnTargets:function(w){var t=[];var v=this.s.dt;var x,s;var i=v.aoColumns;var u=i.length;if(typeof w=="function"){var j=w.call(this,v);for(x=0,s=u;x<s;x++){t.push(d.inArray(x,j)!==-1?true:false)}}else{if(typeof w=="object"){for(x=0,s=u;x<s;x++){t.push(false)}for(x=0,s=w.length;x<s;x++){t[w[x]]=true}}else{if(w=="visible"){for(x=0,s=u;x<s;x++){t.push(i[x].bVisible?true:false)}}else{if(w=="hidden"){for(x=0,s=u;x<s;x++){t.push(i[x].bVisible?false:true)}}else{if(w=="sortable"){for(x=0,s=u;x<s;x++){t.push(i[x].bSortable?true:false)}}else{for(x=0,s=u;x<s;x++){t.push(true)}}}}}}return t},_fnNewline:function(i){if(i.sNewLine=="auto"){return navigator.userAgent.match(/Windows/)?"\r\n":"\n"}else{return i.sNewLine}},_fnGetDataTablesData:function(M){var i,D,j,J;var R,P=[],T="",S;var E=this.s.dt,Q,H;var O=new RegExp(M.sFieldBoundary,"g");var F=this._fnColumnTargets(M.mColumns);var N=(typeof M.bSelectedOnly!="undefined")?M.bSelectedOnly:false;if(M.bHeader){R=[];for(i=0,D=E.aoColumns.length;i<D;i++){if(F[i]){T=E.aoColumns[i].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");T=this._fnHtmlDecode(T);R.push(this._fnBoundData(T,M.sFieldBoundary,O))}}P.push(R.join(M.sFieldSeperator))}N=true;var K;var L=this.fnGetSelectedIndexes();N=this.s.select.type!=="none"&&N&&L.length!==0;if(N){K=L}else{if(b.Api){K=new b.Api(E).rows(M.oSelectorOpts).indexes().flatten().toArray()}else{K=E.oInstance.$("tr",M.oSelectorOpts).map(function(m,n){return E.oInstance.fnGetPosition(n)}).get()}}for(j=0,J=K.length;j<J;j++){Q=E.aoData[K[j]].nTr;R=[];for(i=0,D=E.aoColumns.length;i<D;i++){if(F[i]){var G=E.oApi._fnGetCellData(E,K[j],i,"display");if(M.fnCellRender){T=M.fnCellRender(G,i,Q,K[j])+""}else{if(typeof G=="string"){T=G.replace(/\n/g," ");T=T.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3");T=T.replace(/<.*?>/g,"")}else{T=G+""}}T=T.replace(/^\s+/,"").replace(/\s+$/,"");T=this._fnHtmlDecode(T);R.push(this._fnBoundData(T,M.sFieldBoundary,O))}}P.push(R.join(M.sFieldSeperator));if(M.bOpenRows){S=d.grep(E.aoOpenRows,function(m){return m.nParent===Q});if(S.length===1){T=this._fnBoundData(d("td",S[0].nTr).html(),M.sFieldBoundary,O);P.push(T)}}}if(M.bFooter&&E.nTFoot!==null){R=[];for(i=0,D=E.aoColumns.length;i<D;i++){if(F[i]&&E.aoColumns[i].nTf!==null){T=E.aoColumns[i].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,"");T=this._fnHtmlDecode(T);R.push(this._fnBoundData(T,M.sFieldBoundary,O))}}P.push(R.join(M.sFieldSeperator))}var I=P.join(this._fnNewline(M));return I},_fnBoundData:function(n,i,j){if(i===""){return n}else{return i+n.replace(j,i+i)+i}},_fnChunkData:function(p,i){var r=[];var q=p.length;for(var j=0;j<q;j+=i){if(j+i<q){r.push(p.substring(j,j+i))}else{r.push(p.substring(j,q))}}return r},_fnHtmlDecode:function(j){if(j.indexOf("&")===-1){return j}var i=l.createElement("div");return j.replace(/&([^\s]*?);/g,function(o,p){if(o.substr(1,1)==="#"){return String.fromCharCode(Number(p.substr(1)))}else{i.innerHTML=o;return i.childNodes[0].nodeValue}})},_fnPrintStart:function(t){var u=this;var i=this.s.dt;this._fnPrintHideNodes(i.nTable);this.s.print.saveStart=i._iDisplayStart;this.s.print.saveLength=i._iDisplayLength;if(t.bShowAll){i._iDisplayStart=0;i._iDisplayLength=-1;if(i.oApi._fnCalculateEnd){i.oApi._fnCalculateEnd(i)}i.oApi._fnDraw(i)}if(i.oScroll.sX!==""||i.oScroll.sY!==""){this._fnPrintScrollStart(i);d(this.s.dt.nTable).bind("draw.DTTT_Print",function(){u._fnPrintScrollStart(i)})}var j=i.aanFeatures;for(var s in j){if(s!="i"&&s!="t"&&s.length==1){for(var v=0,r=j[s].length;v<r;v++){this.dom.print.hidden.push({node:j[s][v],display:"block"});j[s][v].style.display="none"}}}d(l.body).addClass(this.classes.print.body);if(t.sInfo!==""){this.fnInfo(t.sInfo,3000)}if(t.sMessage){d("<div/>").addClass(this.classes.print.message).html(t.sMessage).prependTo("body")}this.s.print.saveScroll=d(k).scrollTop();k.scrollTo(0,0);d(l).bind("keydown.DTTT",function(m){if(m.keyCode==27){m.preventDefault();u._fnPrintEnd.call(u,m)}})},_fnPrintEnd:function(q){var i=this;var p=this.s.dt;var r=this.s.print;var j=this.dom.print;this._fnPrintShowNodes();if(p.oScroll.sX!==""||p.oScroll.sY!==""){d(this.s.dt.nTable).unbind("draw.DTTT_Print");this._fnPrintScrollEnd()}k.scrollTo(0,r.saveScroll);d("div."+this.classes.print.message).remove();d(l.body).removeClass("DTTT_Print");p._iDisplayStart=r.saveStart;p._iDisplayLength=r.saveLength;if(p.oApi._fnCalculateEnd){p.oApi._fnCalculateEnd(p)}p.oApi._fnDraw(p);d(l).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var i=this.s.dt,s=i.nScrollHead.getElementsByTagName("div")[0],q=s.getElementsByTagName("table")[0],r=i.nTable.parentNode,j,t;j=i.nTable.getElementsByTagName("thead");if(j.length>0){i.nTable.removeChild(j[0])}if(i.nTFoot!==null){t=i.nTable.getElementsByTagName("tfoot");if(t.length>0){i.nTable.removeChild(t[0])}}j=i.nTHead.cloneNode(true);i.nTable.insertBefore(j,i.nTable.childNodes[0]);if(i.nTFoot!==null){t=i.nTFoot.cloneNode(true);i.nTable.insertBefore(t,i.nTable.childNodes[1])}if(i.oScroll.sX!==""){i.nTable.style.width=d(i.nTable).outerWidth()+"px";r.style.width=d(i.nTable).outerWidth()+"px";r.style.overflow="visible"}if(i.oScroll.sY!==""){r.style.height=d(i.nTable).outerHeight()+"px";r.style.overflow="visible"}},_fnPrintScrollEnd:function(){var j=this.s.dt,i=j.nTable.parentNode;if(j.oScroll.sX!==""){i.style.width=j.oApi._fnStringToCss(j.oScroll.sX);i.style.overflow="auto"}if(j.oScroll.sY!==""){i.style.height=j.oApi._fnStringToCss(j.oScroll.sY);i.style.overflow="auto"}},_fnPrintShowNodes:function(){var i=this.dom.print.hidden;for(var j=0,n=i.length;j<n;j++){i[j].node.style.display=i[j].display}i.splice(0,i.length)},_fnPrintHideNodes:function(j){var v=this.dom.print.hidden;var t=j.parentNode;var s=t.childNodes;for(var i=0,r=s.length;i<r;i++){if(s[i]!=j&&s[i].nodeType==1){var u=d(s[i]).css("display");if(u!="none"){v.push({node:s[i],display:u});s[i].style.display="none"}}}if(t.nodeName.toUpperCase()!="BODY"){this._fnPrintHideNodes(t)}}};TableTools._aInstances=[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){var j=[];for(var i=0,n=TableTools._aInstances.length;i<n;i++){if(TableTools._aInstances[i].s.master){j.push(TableTools._aInstances[i])}}return j};TableTools.fnGetInstance=function(i){if(typeof i!="object"){i=l.getElementById(i)}for(var j=0,n=TableTools._aInstances.length;j<n;j++){if(TableTools._aInstances[j].s.master&&TableTools._aInstances[j].dom.table==i){return TableTools._aInstances[j]}}return null};TableTools._fnEventListen=function(i,j,n){TableTools._aListeners.push({that:i,type:j,fn:n})};TableTools._fnEventDispatch=function(s,u,t,v){var i=TableTools._aListeners;for(var j=0,r=i.length;j<r;j++){if(s.dom.table==i[j].that.dom.table&&i[j].type==u){i[j].fn(t,v)}}};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:false,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:true,bFooter:true,bOpenRows:false,bSelectedOnly:false,oSelectorOpts:g,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:d.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(j,i,n){this.fnSetText(n,this.fnGetTableData(i))}}),xls:d.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:true,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(j,i,n){this.fnSetText(n,this.fnGetTableData(i))}}),copy:d.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(j,i,n){this.fnSetText(n,this.fnGetTableData(i))},fnComplete:function(t,s,i,r){var q=r.split("\n").length;if(s.bHeader){q--}if(this.s.dt.nTFoot!==null&&s.bFooter){q--}var j=(q==1)?"":"s";this.fnInfo("<h6>Table copied</h6><p>Copied "+q+" row"+j+" to the clipboard.</p>",1500)}}),pdf:d.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(j,i,n){this.fnSetText(n,"title:"+this.fnGetTitle(i)+"\nmessage:"+i.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(i)+"\norientation:"+i.sPdfOrientation+"\nsize:"+i.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(i))}}),print:d.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>",sMessage:null,bShowAll:true,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(j,i){this.fnPrint(true,i)}}),text:d.extend({},TableTools.buttonBase),select:d.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(j,i){if(this.fnGetSelected().length!==0){d(j).removeClass(this.classes.buttons.disabled)}else{d(j).addClass(this.classes.buttons.disabled)}},fnInit:function(j,i){d(j).addClass(this.classes.buttons.disabled)}}),select_single:d.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(j,i){var n=this.fnGetSelected().length;if(n==1){d(j).removeClass(this.classes.buttons.disabled)}else{d(j).addClass(this.classes.buttons.disabled)}},fnInit:function(j,i){d(j).addClass(this.classes.buttons.disabled)}}),select_all:d.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(j,i){this.fnSelectAll()},fnSelect:function(j,i){if(this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()){d(j).addClass(this.classes.buttons.disabled)}else{d(j).removeClass(this.classes.buttons.disabled)}}}),select_none:d.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(j,i){this.fnSelectNone()},fnSelect:function(j,i){if(this.fnGetSelected().length!==0){d(j).removeClass(this.classes.buttons.disabled)}else{d(j).addClass(this.classes.buttons.disabled)}},fnInit:function(j,i){d(j).addClass(this.classes.buttons.disabled)}}),ajax:d.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(j,i){var n=this.fnGetTableData(i);d.ajax({url:i.sAjaxUrl,data:[{name:"tableData",value:n}],success:i.fnAjaxComplete,dataType:"json",type:"POST",cache:false,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(i){alert("Ajax complete")}}),div:d.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:d.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(j,i){this._fnCollectionShow(j,i)}})};TableTools.buttons=TableTools.BUTTONS;TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"../swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sRowSelector:"tr",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.defaults=TableTools.DEFAULTS;TableTools.prototype.CLASS="TableTools";TableTools.version="2.2.4";if(d.fn.dataTable.Api){d.fn.dataTable.Api.register("tabletools()",function(){var i=null;if(this.context.length>0){i=TableTools.fnGetInstance(this.context[0].nTable)}return i})}if(typeof d.fn.dataTable=="function"&&typeof d.fn.dataTableExt.fnVersionCheck=="function"&&d.fn.dataTableExt.fnVersionCheck("1.9.0")){d.fn.dataTableExt.aoFeatures.push({fnInit:function(i){var j=i.oInit;var n=j?j.tableTools||j.oTableTools||{}:{};return new TableTools(i.oInstance,n).dom.container},cFeature:"T",sFeature:"TableTools"})}else{alert("Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download")}d.fn.DataTable.TableTools=TableTools})(jQuery,h,f);if(typeof a.fn.dataTable=="function"&&typeof a.fn.dataTableExt.fnVersionCheck=="function"&&a.fn.dataTableExt.fnVersionCheck("1.9.0")){a.fn.dataTableExt.aoFeatures.push({fnInit:function(d){var k=typeof d.oInit.oTableTools!="undefined"?d.oInit.oTableTools:{};var l=new TableTools(d.oInstance,k);TableTools._aInstances.push(l);return l.dom.container},cFeature:"T",sFeature:"TableTools"})}else{alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download")}a.fn.dataTable.TableTools=TableTools;a.fn.DataTable.TableTools=TableTools;return TableTools};if(typeof define==="function"&&define.amd){define(["jquery","datatables"],e)}else{if(typeof exports==="object"){e(require("jquery"),require("datatables"))}else{if(jQuery&&!jQuery.fn.dataTable.TableTools){e(jQuery,jQuery.fn.dataTable)}}}})(window,document);