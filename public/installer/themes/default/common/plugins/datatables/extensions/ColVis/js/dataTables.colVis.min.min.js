/*! ColVis 1.1.2
 * Â©2010-2015 SpryMedia Ltd - datatables.net/license
 */
(function(h,f,g){var e=function(a,b){var c=function(d,k){if(!this.CLASS||this.CLASS!="ColVis"){alert("Warning: ColVis must be initialised with the keyword 'new'")}if(typeof k=="undefined"){k={}}var l=a.fn.dataTable.camelToHungarian;if(l){l(c.defaults,c.defaults,true);l(c.defaults,k)}this.s={dt:null,oInit:k,hidden:true,abOriginal:[]};this.dom={wrapper:null,button:null,collection:null,background:null,catcher:null,buttons:[],groupButtons:[],restore:null};c.aInstances.push(this);this.s.dt=a.fn.dataTable.Api?new a.fn.dataTable.Api(d).settings()[0]:d;this._fnConstruct(k);return this};c.prototype={button:function(){return this.dom.wrapper},fnRebuild:function(){this.rebuild()},rebuild:function(){for(var d=this.dom.buttons.length-1;d>=0;d--){this.dom.collection.removeChild(this.dom.buttons[d])}this.dom.buttons.splice(0,this.dom.buttons.length);this.dom.groupButtons.splice(0,this.dom.groupButtons.length);if(this.dom.restore){this.dom.restore.parentNode(this.dom.restore)}this._fnAddGroups();this._fnAddButtons();this._fnDrawCallback()},_fnConstruct:function(d){this._fnApplyCustomisation(d);var i=this;var m,n;this.dom.wrapper=f.createElement("div");this.dom.wrapper.className="ColVis";this.dom.button=a("<button />",{"class":!this.s.dt.bJUI?"ColVis_Button ColVis_MasterButton":"ColVis_Button ColVis_MasterButton ui-button ui-state-default"}).append("<span>"+this.s.buttonText+"</span>").bind(this.s.activate=="mouseover"?"mouseover":"click",function(j){j.preventDefault();i._fnCollectionShow()}).appendTo(this.dom.wrapper)[0];this.dom.catcher=this._fnDomCatcher();this.dom.collection=this._fnDomCollection();this.dom.background=this._fnDomBackground();this._fnAddGroups();this._fnAddButtons();for(m=0,n=this.s.dt.aoColumns.length;m<n;m++){this.s.abOriginal.push(this.s.dt.aoColumns[m].bVisible)}this.s.dt.aoDrawCallback.push({fn:function(){i._fnDrawCallback.call(i)},sName:"ColVis"});a(this.s.dt.oInstance).bind("column-reorder.dt",function(l,p,j){for(m=0,n=i.s.aiExclude.length;m<n;m++){i.s.aiExclude[m]=j.aiInvertMapping[i.s.aiExclude[m]]}var k=i.s.abOriginal.splice(j.iFrom,1)[0];i.s.abOriginal.splice(j.iTo,0,k);i.fnRebuild()});a(this.s.dt.oInstance).bind("destroy.dt",function(){a(i.dom.wrapper).remove()});this._fnDrawCallback()},_fnApplyCustomisation:function(d){a.extend(true,this.s,c.defaults,d);if(!this.s.showAll&&this.s.bShowAll){this.s.showAll=this.s.sShowAll}if(!this.s.restore&&this.s.bRestore){this.s.restore=this.s.sRestore}var p=this.s.groups;var i=this.s.aoGroups;if(p){for(var n=0,o=p.length;n<o;n++){if(p[n].title){i[n].sTitle=p[n].title}if(p[n].columns){i[n].aiColumns=p[n].columns}}}},_fnDrawCallback:function(){var x=this.s.dt.aoColumns;var t=this.dom.buttons;var y=this.s.aoGroups;var u;for(var v=0,d=t.length;v<d;v++){u=t[v];if(u.__columnIdx!==g){a("input",u).prop("checked",x[u.__columnIdx].bVisible)}}var i=function(m){for(var l=0,k=m.length;l<k;l++){if(x[m[l]].bVisible===false){return false}}return true};var j=function(k){for(var m=0,l=k.length;m<l;m++){if(x[k[m]].bVisible===true){return false}}return true};for(var w=0,z=y.length;w<z;w++){if(i(y[w].aiColumns)){a("input",this.dom.groupButtons[w]).prop("checked",true);a("input",this.dom.groupButtons[w]).prop("indeterminate",false)}else{if(j(y[w].aiColumns)){a("input",this.dom.groupButtons[w]).prop("checked",false);a("input",this.dom.groupButtons[w]).prop("indeterminate",false)}else{a("input",this.dom.groupButtons[w]).prop("indeterminate",true)}}}},_fnAddGroups:function(){var d;if(typeof this.s.aoGroups!="undefined"){for(var i=0,l=this.s.aoGroups.length;i<l;i++){d=this._fnDomGroupButton(i);this.dom.groupButtons.push(d);this.dom.buttons.push(d);this.dom.collection.appendChild(d)}}},_fnAddButtons:function(){var d,i=this.s.dt.aoColumns;if(a.inArray("all",this.s.aiExclude)===-1){for(var m=0,n=i.length;m<n;m++){if(a.inArray(m,this.s.aiExclude)===-1){d=this._fnDomColumnButton(m);d.__columnIdx=m;this.dom.buttons.push(d)}}}if(this.s.order==="alpha"){this.dom.buttons.sort(function(j,k){var l=i[j.__columnIdx].sTitle;var p=i[k.__columnIdx].sTitle;return l===p?0:l<p?-1:1})}if(this.s.restore){d=this._fnDomRestoreButton();d.className+=" ColVis_Restore";this.dom.buttons.push(d)}if(this.s.showAll){d=this._fnDomShowXButton(this.s.showAll,true);d.className+=" ColVis_ShowAll";this.dom.buttons.push(d)}if(this.s.showNone){d=this._fnDomShowXButton(this.s.showNone,false);d.className+=" ColVis_ShowNone";this.dom.buttons.push(d)}a(this.dom.collection).append(this.dom.buttons)},_fnDomRestoreButton:function(){var d=this,j=this.s.dt;return a('<li class="ColVis_Special '+(j.bJUI?"ui-button ui-state-default":"")+'">'+this.s.restore+"</li>").click(function(i){for(var m=0,n=d.s.abOriginal.length;m<n;m++){d.s.dt.oInstance.fnSetColumnVis(m,d.s.abOriginal[m],false)}d._fnAdjustOpenRows();d.s.dt.oInstance.fnAdjustColumnSizing(false);d.s.dt.oInstance.fnDraw(false)})[0]},_fnDomShowXButton:function(d,l){var m=this,n=this.s.dt;return a('<li class="ColVis_Special '+(n.bJUI?"ui-button ui-state-default":"")+'">'+d+"</li>").click(function(k){for(var i=0,j=m.s.abOriginal.length;i<j;i++){if(m.s.aiExclude.indexOf(i)===-1){m.s.dt.oInstance.fnSetColumnVis(i,l,false)}}m._fnAdjustOpenRows();m.s.dt.oInstance.fnAdjustColumnSizing(false);m.s.dt.oInstance.fnDraw(false)})[0]},_fnDomGroupButton:function(m){var d=this,i=this.s.dt,n=this.s.aoGroups[m];return a('<li class="ColVis_Special '+(i.bJUI?"ui-button ui-state-default":"")+'"><label><input type="checkbox" /><span>'+n.sTitle+"</span></label></li>").click(function(j){var l=!a("input",this).is(":checked");if(j.target.nodeName.toLowerCase()!=="li"){l=!l}for(var k=0;k<n.aiColumns.length;k++){d.s.dt.oInstance.fnSetColumnVis(n.aiColumns[k],l)}})[0]},_fnDomColumnButton:function(p){var i=this,o=this.s.dt.aoColumns[p],n=this.s.dt;var d=this.s.fnLabel===null?o.sTitle:this.s.fnLabel(p,o.sTitle,o.nTh);return a("<li "+(n.bJUI?'class="ui-button ui-state-default"':"")+'><label><input type="checkbox" /><span>'+d+"</span></label></li>").click(function(j){var l=!a("input",this).is(":checked");if(j.target.nodeName.toLowerCase()!=="li"){if(j.target.nodeName.toLowerCase()=="input"||i.s.fnStateChange===null){l=!l}}var k=a.fn.dataTableExt.iApiIndex;a.fn.dataTableExt.iApiIndex=i._fnDataTablesApiIndex.call(i);if(n.oFeatures.bServerSide){i.s.dt.oInstance.fnSetColumnVis(p,l,false);i.s.dt.oInstance.fnAdjustColumnSizing(false);if(n.oScroll.sX!==""||n.oScroll.sY!==""){i.s.dt.oInstance.oApi._fnScrollDraw(i.s.dt)}i._fnDrawCallback()}else{i.s.dt.oInstance.fnSetColumnVis(p,l)}a.fn.dataTableExt.iApiIndex=k;if(i.s.fnStateChange!==null){if(j.target.nodeName.toLowerCase()=="span"){j.preventDefault()}i.s.fnStateChange.call(i,p,l)}})[0]},_fnDataTablesApiIndex:function(){for(var d=0,i=this.s.dt.oInstance.length;d<i;d++){if(this.s.dt.oInstance[d]==this.s.dt.nTable){return d}}return 0},_fnDomCollection:function(){return a("<ul />",{"class":!this.s.dt.bJUI?"ColVis_collection":"ColVis_collection ui-buttonset ui-buttonset-multi"}).css({display:"none",opacity:0,position:!this.s.bCssPosition?"absolute":""})[0]},_fnDomCatcher:function(){var d=this,j=f.createElement("div");j.className="ColVis_catcher";a(j).click(function(){d._fnCollectionHide.call(d,null,null)});return j},_fnDomBackground:function(){var d=this;var j=a("<div></div>").addClass("ColVis_collectionBackground").css("opacity",0).click(function(){d._fnCollectionHide.call(d,null,null)});if(this.s.activate=="mouseover"){j.mouseover(function(){d.s.overcollection=false;d._fnCollectionHide.call(d,null,null)})}return j[0]},_fnCollectionShow:function(){var i=this,w,y,v;var F=a(this.dom.button).offset();var x=this.dom.collection;var A=this.dom.background;var B=parseInt(F.left,10);var C=parseInt(F.top+a(this.dom.button).outerHeight(),10);if(!this.s.bCssPosition){x.style.top=C+"px";x.style.left=B+"px"}a(x).css({display:"block",opacity:0});A.style.bottom="0px";A.style.right="0px";var D=this.dom.catcher.style;D.height=a(this.dom.button).outerHeight()+"px";D.width=a(this.dom.button).outerWidth()+"px";D.top=F.top+"px";D.left=B+"px";f.body.appendChild(A);f.body.appendChild(x);f.body.appendChild(this.dom.catcher);a(x).animate({opacity:1},i.s.iOverlayFade);a(A).animate({opacity:0.1},i.s.iOverlayFade,"linear",function(){if(a.browser&&a.browser.msie&&a.browser.version=="6.0"){i._fnDrawCallback()}});if(!this.s.bCssPosition){v=(this.s.sAlign=="left")?B:B-a(x).outerWidth()+a(this.dom.button).outerWidth();x.style.left=v+"px";var z=a(x).outerWidth();var E=a(x).outerHeight();var d=a(f).width();if(v+z>d){x.style.left=(d-z)+"px"}}this.s.hidden=false},_fnCollectionHide:function(){var d=this;if(!this.s.hidden&&this.dom.collection!==null){this.s.hidden=true;a(this.dom.collection).animate({opacity:0},d.s.iOverlayFade,function(j){this.style.display="none"});a(this.dom.background).animate({opacity:0},d.s.iOverlayFade,function(j){f.body.removeChild(d.dom.background);f.body.removeChild(d.dom.catcher)})}},_fnAdjustOpenRows:function(){var d=this.s.dt.aoOpenRows;var m=this.s.dt.oApi._fnVisbleColumns(this.s.dt);for(var i=0,n=d.length;i<n;i++){d[i].nTr.getElementsByTagName("td")[0].colSpan=m}}};c.fnRebuild=function(m){var i=null;if(typeof m!="undefined"){i=a.fn.dataTable.Api?new a.fn.dataTable.Api(m).table().node():m.fnSettings().nTable}for(var d=0,n=c.aInstances.length;d<n;d++){if(typeof m=="undefined"||i==c.aInstances[d].s.dt.nTable){c.aInstances[d].fnRebuild()}}};c.defaults={active:"click",buttonText:"Show / hide columns",aiExclude:[],bRestore:false,sRestore:"Restore original",bShowAll:false,sShowAll:"Show All",sAlign:"left",fnStateChange:null,iOverlayFade:500,fnLabel:null,bCssPosition:false,aoGroups:[],order:"column"};c.aInstances=[];c.prototype.CLASS="ColVis";c.VERSION="1.1.2";c.prototype.VERSION=c.VERSION;if(typeof a.fn.dataTable=="function"&&typeof a.fn.dataTableExt.fnVersionCheck=="function"&&a.fn.dataTableExt.fnVersionCheck("1.7.0")){a.fn.dataTableExt.aoFeatures.push({fnInit:function(d){var l=d.oInit;var k=new c(d,l.colVis||l.oColVis||{});return k.button()},cFeature:"C",sFeature:"ColVis"})}else{alert("Warning: ColVis requires DataTables 1.7 or greater - www.datatables.net/download")}a.fn.dataTable.ColVis=c;a.fn.DataTable.ColVis=c;return c};if(typeof define==="function"&&define.amd){define(["jquery","datatables"],e)}else{if(typeof exports==="object"){e(require("jquery"),require("datatables"))}else{if(jQuery&&!jQuery.fn.dataTable.ColVis){e(jQuery,jQuery.fn.dataTable)}}}})(window,document);