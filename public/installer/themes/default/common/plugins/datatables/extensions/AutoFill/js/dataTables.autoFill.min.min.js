/*! AutoFill 1.2.1
 * Â©2008-2014 SpryMedia Ltd - datatables.net/license
 */
(function(h,f,g){var e=function(a,b){var c=function(j,d){if(!(this instanceof c)){throw ("Warning: AutoFill must be initialised with the keyword 'new'")}if(!a.fn.dataTableExt.fnVersionCheck("1.7.0")){throw ("Warning: AutoFill requires DataTables 1.7 or greater")}this.c={};this.s={filler:{height:0,width:0},border:{width:2},drag:{startX:-1,startY:-1,startTd:null,endTd:null,dragging:false},screen:{interval:null,y:0,height:0,scrollTop:0},scroller:{top:0,bottom:0},columns:[]};this.dom={table:null,filler:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,currentTarget:null};this.fnSettings=function(){return this.s};this._fnInit(j,d);return this};c.prototype={_fnInit:function(t,i){var u=this,v,s;this.s.dt=b.Api?new b.Api(t).settings()[0]:t.fnSettings();this.s.init=i||{};this.dom.table=this.s.dt.nTable;a.extend(true,this.c,c.defaults,i);this._initColumns();var d=a("<div/>",{"class":"AutoFill_filler"}).appendTo("body");this.dom.filler=d[0];this.s.filler.height=d.height();this.s.filler.width=d.width();d[0].style.display="none";var q;var r=f.body;if(u.s.dt.oScroll.sY!==""){u.s.dt.nTable.parentNode.style.position="relative";r=u.s.dt.nTable.parentNode}q=a("<div/>",{"class":"AutoFill_border"});this.dom.borderTop=q.clone().appendTo(r)[0];this.dom.borderRight=q.clone().appendTo(r)[0];this.dom.borderBottom=q.clone().appendTo(r)[0];this.dom.borderLeft=q.clone().appendTo(r)[0];d.on("mousedown.DTAF",function(j){this.onselectstart=function(){return false};u._fnFillerDragStart.call(u,j);return false});a("tbody",this.dom.table).on("mouseover.DTAF mouseout.DTAF",">tr>td, >tr>th",function(j){u._fnFillerDisplay.call(u,j)});a(this.dom.table).on("destroy.dt.DTAF",function(){d.off("mousedown.DTAF").remove();a("tbody",this.dom.table).off("mouseover.DTAF mouseout.DTAF")})},_initColumns:function(){var r=this;var o,q;var d=this.s.dt;var p=this.s.init;for(o=0,q=d.aoColumns.length;o<q;o++){this.s.columns[o]=a.extend(true,{},c.defaults.column)}d.oApi._fnApplyColumnDefs(d,p.aoColumnDefs||p.columnDefs,p.aoColumns||p.columns,function(k,j){r._fnColumnOptions(k,j)});for(o=0,q=d.aoColumns.length;o<q;o++){var i=this.s.columns[o];if(!i.read){i.read=this._fnReadCell}if(!i.write){i.read=this._fnWriteCell}if(!i.step){i.read=this._fnStep}}},_fnColumnOptions:function(n,i){var m=this.s.columns[n];var d=function(k,j){if(i[j[0]]!==g){m[k]=i[j[0]]}if(i[j[1]]!==g){m[k]=i[j[1]]}};d("enable",["bEnable","enable"]);d("read",["fnRead","read"]);d("write",["fnWrite","write"]);d("step",["fnStep","step"]);d("increment",["bIncrement","increment"])},_fnTargetCoords:function(k){var d=a(k).parents("tr")[0];var l=this.s.dt.oInstance.fnGetPosition(k);return{x:a("td",d).index(k),y:a("tr",d.parentNode).index(d),row:l[0],column:l[2]}},_fnUpdateBorder:function(x,w){var z=this.s.border.width,y=a(x).offset(),J=a(w).offset(),C=y.left-z,E=J.left+a(w).outerWidth(),I=y.top-z,d=J.top+a(w).outerHeight(),D=J.left+a(w).outerWidth()-y.left+(2*z),G=J.top+a(w).outerHeight()-y.top+(2*z),H;if(y.left>J.left){C=J.left-z;E=y.left+a(x).outerWidth();D=y.left+a(x).outerWidth()-J.left+(2*z)}if(this.s.dt.oScroll.sY!==""){var F=a(this.s.dt.nTable.parentNode).offset(),B=a(this.s.dt.nTable.parentNode).scrollTop(),A=a(this.s.dt.nTable.parentNode).scrollLeft();C-=F.left-A;E-=F.left-A;I-=F.top-B;d-=F.top-B}H=this.dom.borderTop.style;H.top=I+"px";H.left=C+"px";H.height=this.s.border.width+"px";H.width=D+"px";H=this.dom.borderBottom.style;H.top=d+"px";H.left=C+"px";H.height=this.s.border.width+"px";H.width=D+"px";H=this.dom.borderLeft.style;H.top=I+"px";H.left=C+"px";H.height=G+"px";H.width=this.s.border.width+"px";H=this.dom.borderRight.style;H.top=I+"px";H.left=E+"px";H.height=G+"px";H.width=this.s.border.width+"px"},_fnFillerDragStart:function(l){var n=this;var d=this.dom.currentTarget;this.s.drag.dragging=true;n.dom.borderTop.style.display="block";n.dom.borderRight.style.display="block";n.dom.borderBottom.style.display="block";n.dom.borderLeft.style.display="block";var m=this._fnTargetCoords(d);this.s.drag.startX=m.x;this.s.drag.startY=m.y;this.s.drag.startTd=d;this.s.drag.endTd=d;this._fnUpdateBorder(d,d);a(f).bind("mousemove.AutoFill",function(i){n._fnFillerDragMove.call(n,i)});a(f).bind("mouseup.AutoFill",function(i){n._fnFillerFinish.call(n,i)});this.s.screen.y=l.pageY;this.s.screen.height=a(h).height();this.s.screen.scrollTop=a(f).scrollTop();if(this.s.dt.oScroll.sY!==""){this.s.scroller.top=a(this.s.dt.nTable.parentNode).offset().top;this.s.scroller.bottom=this.s.scroller.top+a(this.s.dt.nTable.parentNode).height()}this.s.screen.interval=setInterval(function(){var j=a(f).scrollTop();var i=j-n.s.screen.scrollTop;n.s.screen.y+=i;if(n.s.screen.height-n.s.screen.y+j<50){a("html, body").animate({scrollTop:j+50},240,"linear")}else{if(n.s.screen.y-j<50){a("html, body").animate({scrollTop:j-50},240,"linear")}}if(n.s.dt.oScroll.sY!==""){if(n.s.screen.y>n.s.scroller.bottom-50){a(n.s.dt.nTable.parentNode).animate({scrollTop:a(n.s.dt.nTable.parentNode).scrollTop()+50},240,"linear")}else{if(n.s.screen.y<n.s.scroller.top+50){a(n.s.dt.nTable.parentNode).animate({scrollTop:a(n.s.dt.nTable.parentNode).scrollTop()-50},240,"linear")}}}},250)},_fnFillerDragMove:function(d){if(d.target&&d.target.nodeName.toUpperCase()=="TD"&&d.target!=this.s.drag.endTd){var k=this._fnTargetCoords(d.target);if(this.c.mode=="y"&&k.x!=this.s.drag.startX){d.target=a("tbody>tr:eq("+k.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]}if(this.c.mode=="x"&&k.y!=this.s.drag.startY){d.target=a("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+k.x+")",this.dom.table)[0]}if(this.c.mode=="either"){if(k.x!=this.s.drag.startX){d.target=a("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+k.x+")",this.dom.table)[0]}else{if(k.y!=this.s.drag.startY){d.target=a("tbody>tr:eq("+k.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]}}}if(this.c.mode!=="both"){k=this._fnTargetCoords(d.target)}var l=this.s.drag;l.endTd=d.target;if(k.y>=this.s.drag.startY){this._fnUpdateBorder(l.startTd,l.endTd)}else{this._fnUpdateBorder(l.endTd,l.startTd)}this._fnFillerPosition(d.target)}this.s.screen.y=d.pageY;this.s.screen.scrollTop=a(f).scrollTop();if(this.s.dt.oScroll.sY!==""){this.s.scroller.scrollTop=a(this.s.dt.nTable.parentNode).scrollTop();this.s.scroller.top=a(this.s.dt.nTable.parentNode).offset().top;this.s.scroller.bottom=this.s.scroller.top+a(this.s.dt.nTable.parentNode).height()}},_fnFillerFinish:function(L){var j=this,A,D,B;a(f).unbind("mousemove.AutoFill mouseup.AutoFill");this.dom.borderTop.style.display="none";this.dom.borderRight.style.display="none";this.dom.borderBottom.style.display="none";this.dom.borderLeft.style.display="none";this.s.drag.dragging=false;clearInterval(this.s.screen.interval);var F=[];var G=this.dom.table;var i=this._fnTargetCoords(this.s.drag.startTd);var H=this._fnTargetCoords(this.s.drag.endTd);var d=function(k){return j.s.dt.oApi._fnVisibleToColumnIndex(j.s.dt,k)};if(i.y<=H.y){for(A=i.y;A<=H.y;A++){if(i.x<=H.x){for(B=i.x;B<=H.x;B++){F.push({node:a("tbody>tr:eq("+A+")>td:eq("+B+")",G)[0],x:B-i.x,y:A-i.y,colIdx:d(B)})}}else{for(B=i.x;B>=H.x;B--){F.push({node:a("tbody>tr:eq("+A+")>td:eq("+B+")",G)[0],x:B-i.x,y:A-i.y,colIdx:d(B)})}}}}else{for(A=i.y;A>=H.y;A--){if(i.x<=H.x){for(B=i.x;B<=H.x;B++){F.push({node:a("tbody>tr:eq("+A+")>td:eq("+B+")",G)[0],x:B-i.x,y:A-i.y,colIdx:d(B)})}}else{for(B=i.x;B>=H.x;B--){F.push({node:a("tbody>tr:eq("+A+")>td:eq("+B+")",G)[0],x:i.x-B,y:i.y-A,colIdx:d(B)})}}}}if(F.length<=1){return}var J=[];var z;for(A=0,D=F.length;A<D;A++){var I=F[A];var C=this.s.columns[I.colIdx];var E=C.read.call(C,I.node);var K=C.step.call(C,I.node,E,z,A,I.x,I.y);C.write.call(C,I.node,K);z=K;J.push({cell:I,colIdx:I.colIdx,newValue:K,oldValue:E})}if(this.c.complete!==null){this.c.complete.call(this,J)}if(b.Api){new b.Api(this.s.dt).draw(false)}else{this.s.dt.oInstance.fnDraw()}},_fnFillerDisplay:function(d){var l=this.dom.filler;if(this.s.drag.dragging){return}var m=(d.target.nodeName.toLowerCase()=="td")?d.target:a(d.target).parents("td")[0];var n=this._fnTargetCoords(m).column;if(!this.s.columns[n].enable){l.style.display="none";return}if(d.type=="mouseover"){this.dom.currentTarget=m;this._fnFillerPosition(m);l.style.display="block"}else{if(!d.relatedTarget||!d.relatedTarget.className.match(/AutoFill/)){l.style.display="none"}}},_fnFillerPosition:function(l){var d=a(l).offset();var k=this.dom.filler;k.style.top=(d.top-(this.s.filler.height/2)-1+a(l).outerHeight())+"px";k.style.left=(d.left-(this.s.filler.width/2)-1+a(l).outerWidth())+"px"}};b.AutoFill=c;b.AutoFill=c;c.version="1.2.1";c.defaults={mode:"y",complete:null,column:{enable:true,increment:true,read:function(d){return a(d).html()},write:function(p,m){var n=a(p).parents("table");if(b.Api){n.DataTable().cell(p).data(m)}else{var o=n.dataTable();var d=o.fnGetPosition(p);o.fnUpdate(m,d[0],d[2],false)}},step:function(r,u,v,i,s,t){var d=/(\-?\d+)/;var q=this.increment&&v?v.match(d):null;if(q){return v.replace(d,parseInt(q[1],10)+(s<0||t<0?-1:1))}return v===g?u:v}}};return c};if(typeof define==="function"&&define.amd){define(["jquery","datatables"],e)}else{if(typeof exports==="object"){e(require("jquery"),require("datatables"))}else{if(jQuery&&!jQuery.fn.dataTable.AutoFill){e(jQuery,jQuery.fn.dataTable)}}}}(window,document));