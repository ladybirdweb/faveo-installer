(function(){angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(b,a){this.scope=b;b.$element=a;b.$modelValue=null;b.$parentNodeScope=null;b.$childNodesScope=null;b.$parentNodesScope=null;b.$treeScope=null;b.$handleScope=null;b.$type="uiTreeNode";b.$$allowNodeDrop=false;b.collapsed=false;b.expandOnHover=false;b.init=function(e){var d=e[0];b.$treeScope=e[1]?e[1].scope:null;b.$parentNodeScope=d.scope.$nodeScope;b.$modelValue=d.scope.$modelValue[b.$index];b.$parentNodesScope=d.scope;d.scope.initSubNode(b);a.on("$destroy",function(){d.scope.destroySubNode(b)})};b.index=function(){return b.$parentNodesScope.$modelValue.indexOf(b.$modelValue)};b.dragEnabled=function(){return !(b.$treeScope&&!b.$treeScope.dragEnabled)};b.isSibling=function(d){return b.$parentNodesScope==d.$parentNodesScope};b.isChild=function(e){var d=b.childNodes();return d&&d.indexOf(e)>-1};b.prev=function(){var d=b.index();if(d>0){return b.siblings()[d-1]}return null};b.siblings=function(){return b.$parentNodesScope.childNodes()};b.childNodesCount=function(){return b.childNodes()?b.childNodes().length:0};b.hasChild=function(){return b.childNodesCount()>0};b.childNodes=function(){return b.$childNodesScope&&b.$childNodesScope.$modelValue?b.$childNodesScope.childNodes():null};b.accept=function(e,d){return b.$childNodesScope&&b.$childNodesScope.$modelValue&&b.$childNodesScope.accept(e,d)};b.remove=function(){return b.$parentNodesScope.removeNode(b)};b.toggle=function(){b.collapsed=!b.collapsed;b.$treeScope.$callbacks.toggle(b.collapsed,b)};b.collapse=function(){b.collapsed=true};b.expand=function(){b.collapsed=false};b.depth=function(){var d=b.$parentNodeScope;if(d){return d.depth()+1}return 1};function c(g){if(!g){return 0}var h=0,j=g.childNodes(),e,f,d;if(!j||j.length===0){return 0}for(d=j.length-1;d>=0;d--){e=j[d],f=1+c(e);h=Math.max(h,f)}return h}b.maxSubDepth=function(){return b.$childNodesScope?c(b.$childNodesScope):0}}])})();