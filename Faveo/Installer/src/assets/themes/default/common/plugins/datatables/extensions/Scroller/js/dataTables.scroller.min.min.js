/*! Scroller 1.2.2
 * Â©2011-2014 SpryMedia Ltd - datatables.net/license
 */
(function(h,f,g){var e=function(a,b){var c=function(k,l){if(!this instanceof c){alert("Scroller warning: Scroller must be initialised with the 'new' keyword.");return}if(typeof l=="undefined"){l={}}this.s={dt:k,tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,autoHeight:true,viewportRows:0,stateTO:null,drawTO:null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null},topRowFloat:0,scrollDrawDiff:null,loaderVisible:false};this.s=a.extend(this.s,c.oDefaults,l);this.s.heights.row=this.s.rowHeight;this.dom={force:f.createElement("div"),scroller:null,table:null,loader:null};this.s.dt.oScroller=this;this._fnConstruct()};c.prototype={fnRowToPixels:function(r,o,p){var n;if(p){n=this._domain("virtualToPhysical",r*this.s.heights.row)}else{var q=r-this.s.baseRowTop;n=this.s.baseScrollTop+(q*this.s.heights.row)}return o||o===g?parseInt(n,10):n},fnPixelsToRow:function(n,p,q){var r=n-this.s.baseScrollTop;var o=q?this._domain("physicalToVirtual",n)/this.s.heights.row:(r/this.s.heights.row)+this.s.baseRowTop;return p||p===g?parseInt(o,10):o},fnScrollToRow:function(u,v){var p=this;var s=false;var q=this.fnRowToPixels(u);var t=((this.s.displayBuffer-1)/2)*this.s.viewportRows;var r=u-t;if(r<0){r=0}if((q>this.s.redrawBottom||q<this.s.redrawTop)&&this.s.dt._iDisplayStart!==r){s=true;q=this.fnRowToPixels(u,false,true)}if(typeof v=="undefined"||v){this.s.ani=s;a(this.dom.scroller).animate({scrollTop:q},function(){setTimeout(function(){p.s.ani=false},25)})}else{a(this.dom.scroller).scrollTop(q)}},fnMeasure:function(k){if(this.s.autoHeight){this._fnCalcRowHeight()}var l=this.s.heights;l.viewport=a(this.dom.scroller).height();this.s.viewportRows=parseInt(l.viewport/l.row,10)+1;this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer;if(k===g||k){this.s.dt.oInstance.fnDraw()}},_fnConstruct:function(){var l=this;if(!this.s.dt.oFeatures.bPaginate){this.s.dt.oApi._fnLog(this.s.dt,0,"Pagination must be enabled for Scroller");return}this.dom.force.style.position="absolute";this.dom.force.style.top="0px";this.dom.force.style.left="0px";this.dom.force.style.width="1px";this.dom.scroller=a("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0];this.dom.scroller.appendChild(this.dom.force);this.dom.scroller.style.position="relative";this.dom.table=a(">table",this.dom.scroller)[0];this.dom.table.style.position="absolute";this.dom.table.style.top="0px";this.dom.table.style.left="0px";a(this.s.dt.nTableWrapper).addClass("DTS");if(this.s.loadingIndicator){this.dom.loader=a('<div class="DTS_Loading">'+this.s.dt.oLanguage.sLoadingRecords+"</div>").css("display","none");a(this.dom.scroller.parentNode).css("position","relative").append(this.dom.loader)}if(this.s.heights.row&&this.s.heights.row!="auto"){this.s.autoHeight=false}this.fnMeasure(false);this.s.ingnoreScroll=true;this.s.stateSaveThrottle=this.s.dt.oApi._fnThrottle(function(){l.s.dt.oApi._fnSaveState(l.s.dt)},500);a(this.dom.scroller).on("scroll.DTS",function(i){l._fnScroll.call(l)});a(this.dom.scroller).on("touchstart.DTS",function(){l._fnScroll.call(l)});this.s.dt.aoDrawCallback.push({fn:function(){if(l.s.dt.bInitialised){l._fnDrawCallback.call(l)}},sName:"Scroller"});a(h).on("resize.DTS",function(){l.fnMeasure(false);l._fnInfo()});var k=true;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(j,i){if(k&&l.s.dt.oLoadedState){i.iScroller=l.s.dt.oLoadedState.iScroller;i.iScrollerTopRow=l.s.dt.oLoadedState.iScrollerTopRow;k=false}else{i.iScroller=l.dom.scroller.scrollTop;i.iScrollerTopRow=l.s.topRowFloat}},"Scroller_State");if(this.s.dt.oLoadedState){this.s.topRowFloat=this.s.dt.oLoadedState.iScrollerTopRow||0}this.s.dt.aoDestroyCallback.push({sName:"Scroller",fn:function(){a(h).off("resize.DTS");a(l.dom.scroller).off("touchstart.DTS scroll.DTS");a(l.s.dt.nTableWrapper).removeClass("DTS");a("div.DTS_Loading",l.dom.scroller.parentNode).remove();l.dom.table.style.position="";l.dom.table.style.top="";l.dom.table.style.left=""}})},_fnScroll:function(){var p=this,o=this.s.heights,q=this.dom.scroller.scrollTop,t;if(this.s.skip){return}if(this.s.ingnoreScroll){return}if(this.s.dt.bFiltered||this.s.dt.bSorted){this.s.lastScrollTop=0;return}this._fnInfo();clearTimeout(this.s.stateTO);this.s.stateTO=setTimeout(function(){p.s.dt.oApi._fnSaveState(p.s.dt)},250);if(q<this.s.redrawTop||q>this.s.redrawBottom){var r=Math.ceil(((this.s.displayBuffer-1)/2)*this.s.viewportRows);if(Math.abs(q-this.s.lastScrollTop)>o.viewport||this.s.ani){t=parseInt(this._domain("physicalToVirtual",q)/o.row,10)-r;this.s.topRowFloat=(this._domain("physicalToVirtual",q)/o.row)}else{t=this.fnPixelsToRow(q)-r;this.s.topRowFloat=this.fnPixelsToRow(q,false)}if(t<=0){t=0}else{if(t+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()){t=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength;if(t<0){t=0}}else{if(t%2!==0){t++}}}if(t!=this.s.dt._iDisplayStart){this.s.tableTop=a(this.s.dt.nTable).offset().top;this.s.tableBottom=a(this.s.dt.nTable).height()+this.s.tableTop;var s=function(){if(p.s.scrollDrawReq===null){p.s.scrollDrawReq=q}p.s.dt._iDisplayStart=t;if(p.s.dt.oApi._fnCalculateEnd){p.s.dt.oApi._fnCalculateEnd(p.s.dt)}p.s.dt.oApi._fnDraw(p.s.dt)};if(this.s.dt.oFeatures.bServerSide){clearTimeout(this.s.drawTO);this.s.drawTO=setTimeout(s,this.s.serverWait)}else{s()}if(this.dom.loader&&!this.s.loaderVisible){this.dom.loader.css("display","block");this.s.loaderVisible=true}}}this.s.lastScrollTop=q;this.s.stateSaveThrottle()},_domain:function(r,o){var p=this.s.heights;var s;if(p.virtual===p.scroll){s=(p.virtual-p.viewport)/(p.scroll-p.viewport);if(r==="virtualToPhysical"){return o/s}else{if(r==="physicalToVirtual"){return o*s}}}var t=(p.scroll-p.viewport)/2;var q=(p.virtual-p.viewport)/2;s=q/(t*t);if(r==="virtualToPhysical"){if(o<q){return Math.pow(o/s,0.5)}else{o=(q*2)-o;return o<0?p.scroll:(t*2)-Math.pow(o/s,0.5)}}else{if(r==="physicalToVirtual"){if(o<t){return o*o*s}else{o=(t*2)-o;return o<0?p.virtual:(q*2)-(o*o*s)}}}},_fnDrawCallback:function(){var z=this,y=this.s.heights,A=this.dom.scroller.scrollTop,F=A,C=A+y.viewport,v=a(this.s.dt.nTable).height(),E=this.s.dt._iDisplayStart,B=this.s.dt._iDisplayLength,D=this.s.dt.fnRecordsDisplay();this.s.skip=true;this._fnScrollForce();if(E===0){A=this.s.topRowFloat*y.row}else{if(E+B>=D){A=y.scroll-((D-this.s.topRowFloat)*y.row)}else{A=this._domain("virtualToPhysical",this.s.topRowFloat*y.row)}}this.dom.scroller.scrollTop=A;this.s.baseScrollTop=A;this.s.baseRowTop=this.s.topRowFloat;var u=A-((this.s.topRowFloat-E)*y.row);if(E===0){u=0}else{if(E+B>=D){u=y.scroll-v}}this.dom.table.style.top=u+"px";this.s.tableTop=u;this.s.tableBottom=v+this.s.tableTop;var w=(A-this.s.tableTop)*this.s.boundaryScale;this.s.redrawTop=A-w;this.s.redrawBottom=A+w;this.s.skip=false;if(this.s.dt.oFeatures.bStateSave&&this.s.dt.oLoadedState!==null&&typeof this.s.dt.oLoadedState.iScroller!="undefined"){var x=(this.s.dt.sAjaxSource||z.s.dt.ajax)&&!this.s.dt.oFeatures.bServerSide?true:false;if((x&&this.s.dt.iDraw==2)||(!x&&this.s.dt.iDraw==1)){setTimeout(function(){a(z.dom.scroller).scrollTop(z.s.dt.oLoadedState.iScroller);z.s.redrawTop=z.s.dt.oLoadedState.iScroller-(y.viewport/2);setTimeout(function(){z.s.ingnoreScroll=false},0)},0)}}else{z.s.ingnoreScroll=false}setTimeout(function(){z._fnInfo.call(z)},0);if(this.dom.loader&&this.s.loaderVisible){this.dom.loader.css("display","none");this.s.loaderVisible=false}},_fnScrollForce:function(){var k=this.s.heights;var l=1000000;k.virtual=k.row*this.s.dt.fnRecordsDisplay();k.scroll=k.virtual;if(k.scroll>l){k.scroll=l}this.dom.force.style.height=k.scroll+"px"},_fnCalcRowHeight:function(){var t=this.s.dt;var s=t.nTable;var o=s.cloneNode(false);var p=a("<tbody/>").appendTo(o);var r=a('<div class="'+t.oClasses.sWrapper+' DTS"><div class="'+t.oClasses.sScrollWrapper+'"><div class="'+t.oClasses.sScrollBody+'"></div></div></div>');a("tbody tr:lt(4)",s).clone().appendTo(p);while(a("tr",p).length<3){p.append("<tr><td>&nbsp;</td></tr>")}a("div."+t.oClasses.sScrollBody,r).append(o);var q;if(t._bInitComplete){q=s.parentNode}else{if(!this.s.dt.nHolding){this.s.dt.nHolding=a("<div></div>").insertBefore(this.s.dt.nTable)}q=this.s.dt.nHolding}r.appendTo(q);this.s.heights.row=a("tr",p).eq(1).outerHeight();r.remove()},_fnInfo:function(){if(!this.s.dt.oFeatures.bInfo){return}var F=this.s.dt,M=F.oLanguage,n=this.dom.scroller.scrollTop,H=Math.floor(this.fnPixelsToRow(n,false,this.s.ani)+1),i=F.fnRecordsTotal(),L=F.fnRecordsDisplay(),P=Math.ceil(this.fnPixelsToRow(n+this.s.heights.viewport,false,this.s.ani)),D=L<P?L:P,G=F.fnFormatNumber(H),B=F.fnFormatNumber(D),J=F.fnFormatNumber(i),K=F.fnFormatNumber(L),N;if(F.fnRecordsDisplay()===0&&F.fnRecordsDisplay()==F.fnRecordsTotal()){N=M.sInfoEmpty+M.sInfoPostFix}else{if(F.fnRecordsDisplay()===0){N=M.sInfoEmpty+" "+M.sInfoFiltered.replace("_MAX_",J)+M.sInfoPostFix}else{if(F.fnRecordsDisplay()==F.fnRecordsTotal()){N=M.sInfo.replace("_START_",G).replace("_END_",B).replace("_MAX_",J).replace("_TOTAL_",K)+M.sInfoPostFix}else{N=M.sInfo.replace("_START_",G).replace("_END_",B).replace("_MAX_",J).replace("_TOTAL_",K)+" "+M.sInfoFiltered.replace("_MAX_",F.fnFormatNumber(F.fnRecordsTotal()))+M.sInfoPostFix}}}var I=M.fnInfoCallback;if(I){N=I.call(F.oInstance,F,H,D,i,L,N)}var C=F.aanFeatures.i;if(typeof C!="undefined"){for(var O=0,E=C.length;O<E;O++){a(C[O]).html(N)}}}};c.defaults={trace:false,rowHeight:"auto",serverWait:200,displayBuffer:9,boundaryScale:0.5,loadingIndicator:false};c.oDefaults=c.defaults;c.version="1.2.2";if(typeof a.fn.dataTable=="function"&&typeof a.fn.dataTableExt.fnVersionCheck=="function"&&a.fn.dataTableExt.fnVersionCheck("1.9.0")){a.fn.dataTableExt.aoFeatures.push({fnInit:function(m){var n=m.oInit;var o=n.scroller||n.oScroller||{};var p=new c(m,o);return p.dom.wrapper},cFeature:"S",sFeature:"Scroller"})}else{alert("Warning: Scroller requires DataTables 1.9.0 or greater - www.datatables.net/download")}a.fn.dataTable.Scroller=c;a.fn.DataTable.Scroller=c;if(a.fn.dataTable.Api){var d=a.fn.dataTable.Api;d.register("scroller()",function(){return this});d.register("scroller().rowToPixels()",function(o,m,n){var p=this.context;if(p.length&&p[0].oScroller){return p[0].oScroller.fnRowToPixels(o,m,n)}});d.register("scroller().pixelsToRow()",function(m,n,o){var p=this.context;if(p.length&&p[0].oScroller){return p[0].oScroller.fnPixelsToRow(m,n,o)}});d.register("scroller().scrollToRow()",function(k,l){this.iterator("table",function(i){if(i.oScroller){i.oScroller.fnScrollToRow(k,l)}});return this});d.register("scroller().measure()",function(j){this.iterator("table",function(i){if(i.oScroller){i.oScroller.fnMeasure(j)}});return this})}return c};if(typeof define==="function"&&define.amd){define(["jquery","datatables"],e)}else{if(typeof exports==="object"){e(require("jquery"),require("datatables"))}else{if(jQuery&&!jQuery.fn.dataTable.Scroller){e(jQuery,jQuery.fn.dataTable)}}}})(window,document);